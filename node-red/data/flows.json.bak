[
    {
        "id": "79f6047133543b6d",
        "type": "tab",
        "label": "AIO",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ba9285a6.957868",
        "type": "tab",
        "label": "SAVE",
        "disabled": true,
        "info": ""
    },
    {
        "id": "e52631fa86fdd3be",
        "type": "tab",
        "label": "Home",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "44b7dbcf27bd28ae",
        "type": "tab",
        "label": "FIWARE",
        "disabled": false,
        "info": ""
    },
    {
        "id": "828bae03b631ac33",
        "type": "tab",
        "label": "Ethereum",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "48a7733923a33252",
        "type": "tab",
        "label": "Files v2 (reduced)",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "f29ecd9eab0f0d83",
        "type": "tab",
        "label": "System v3",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "416fb17dde932093",
        "type": "group",
        "z": "ba9285a6.957868",
        "name": "SETUP",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "30b8aaf6d52456ce"
        ],
        "x": 334,
        "y": 19,
        "w": 192,
        "h": 82
    },
    {
        "id": "34047250a1f44ce1",
        "type": "group",
        "z": "48a7733923a33252",
        "name": "",
        "style": {
            "stroke": "none",
            "fill": "#ffbfbf",
            "label": true
        },
        "nodes": [
            "1a1a090377e2b43e"
        ],
        "x": 334,
        "y": 19,
        "w": 232,
        "h": 82
    },
    {
        "id": "ed8605f54d7c9002",
        "type": "group",
        "z": "44b7dbcf27bd28ae",
        "name": "SETUP",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "32069561c52cb26e",
            "532151c821513cdf"
        ],
        "x": 294,
        "y": 19,
        "w": 192,
        "h": 142
    },
    {
        "id": "67d94c6b13c37cc2",
        "type": "group",
        "z": "79f6047133543b6d",
        "name": "SETUP",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "d3da3a597cad7169"
        ],
        "x": 414,
        "y": 2879,
        "w": 192,
        "h": 82
    },
    {
        "id": "c732681448a48707",
        "type": "group",
        "z": "79f6047133543b6d",
        "name": "SETUP",
        "style": {
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "ea805040d9020dd5",
            "96a0b0a9148cf3c7",
            "3f187d9f2efa8a86",
            "04431ebc17ac8506",
            "d54329b98064c750",
            "d854c838d33833a0",
            "951839e97eff5667",
            "df7028ca82489e66",
            "b0695fca8a7f9430",
            "9ad0c568481392a4",
            "5cbad5e31e662c6c",
            "671488855392edf3",
            "2d96bddfb3b7217f",
            "e8e8ab7fdc96aef0",
            "36a9710a40eeec8e",
            "762f0f8fd7a3322c",
            "f550df0fe64a32d4",
            "87901b1cdb67528b",
            "ce581a260ef4589e",
            "8fee3591df052e52"
        ],
        "x": 34,
        "y": 19,
        "w": 892,
        "h": 442
    },
    {
        "id": "15d84497.52381b",
        "type": "Context-Broker",
        "name": "Orion LD + PEP Proxy",
        "endpoint": "http://host.docker.internal:1029",
        "service": "",
        "servicepath": "",
        "idmEndpoint": "http://host.docker.internal:3005"
    },
    {
        "id": "95f6c009.fa934",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "ade1f84b9abbf285",
        "type": "ui_group",
        "name": "Monitoring data",
        "tab": "e6013c6f.69328",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "a9912d64.97094",
        "type": "ui_group",
        "name": "System Information",
        "tab": "e6013c6f.69328",
        "order": 1,
        "disp": true,
        "width": "6"
    },
    {
        "id": "b6cc1aae65862dae",
        "type": "ui_group",
        "name": "Realtime",
        "tab": "e6013c6f.69328",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f6e5eaea1a3d31cf",
        "type": "ui_group",
        "name": "Loadavg",
        "tab": "e6013c6f.69328",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "e6013c6f.69328",
        "type": "ui_tab",
        "name": "System Monitor",
        "icon": "memory",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "68ea59a18e66e807",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "47bd647b0bf55722",
        "type": "ui_group",
        "name": "Default",
        "tab": "68ea59a18e66e807",
        "order": 1,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "428fc8e6d916cf55",
        "type": "ui_group",
        "name": "FIWARE",
        "tab": "68ea59a18e66e807",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "3887268fb207a290",
        "type": "ui_group",
        "name": "Ethereum",
        "tab": "68ea59a18e66e807",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "a5b0ce2eb275e336",
        "type": "ethereum-client",
        "name": "Rete di test Goerli",
        "url": "https://rpc.goerli.mudit.blog/"
    },
    {
        "id": "511b16494c95c3e9",
        "type": "smart-contract",
        "name": "My_PoE.sol (Remix)",
        "ethereumClient": "a5b0ce2eb275e336",
        "address": "0xE1989a90127A449Bd22176299104cf6d2cb5Ba86",
        "abi": "[ \t{ \t\t\"inputs\": [ \t\t\t{ \t\t\t\t\"internalType\": \"string\", \t\t\t\t\"name\": \"document\", \t\t\t\t\"type\": \"string\" \t\t\t} \t\t], \t\t\"name\": \"notarize\", \t\t\"outputs\": [ \t\t\t{ \t\t\t\t\"internalType\": \"bytes32\", \t\t\t\t\"name\": \"\", \t\t\t\t\"type\": \"bytes32\" \t\t\t} \t\t], \t\t\"stateMutability\": \"nonpayable\", \t\t\"type\": \"function\" \t}, \t{ \t\t\"inputs\": [ \t\t\t{ \t\t\t\t\"internalType\": \"string\", \t\t\t\t\"name\": \"document\", \t\t\t\t\"type\": \"string\" \t\t\t} \t\t], \t\t\"name\": \"checkDocument\", \t\t\"outputs\": [ \t\t\t{ \t\t\t\t\"internalType\": \"bool\", \t\t\t\t\"name\": \"\", \t\t\t\t\"type\": \"bool\" \t\t\t} \t\t], \t\t\"stateMutability\": \"view\", \t\t\"type\": \"function\" \t} ]"
    },
    {
        "id": "160e81fb.f1c86e",
        "type": "ui_group",
        "name": "File Browser",
        "tab": "b63d1f91.68095",
        "order": 1,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "26e8fe8026c92abb",
        "type": "ui_group",
        "name": "Properties",
        "tab": "b63d1f91.68095",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4128a70510a0cd4e",
        "type": "ui_group",
        "name": "Preview",
        "tab": "b63d1f91.68095",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "b63d1f91.68095",
        "type": "ui_tab",
        "name": "File Manager",
        "icon": "folder_open",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "a46f63f7bc8183e7",
        "type": "sender-account",
        "name": "Account 2 Test",
        "ethereumClient": "a5b0ce2eb275e336",
        "address": "0x7efC9d38581c7Cb8372325c349Ec5095D027B3Dd",
        "managedByEthereumClient": false,
        "transactionQueueSize": "100"
    },
    {
        "id": "93b18379800c0f5a",
        "type": "ethers-wallet",
        "name": "Account 2 Test",
        "keyPublic": "0406c16dffbd03799962604dac8056a0615fd0586c1a1df8c09c05bedd41acec25ab9756c6bc577d0804d4244ed08d86a5bd3fb83991fc67ca13c096a8b8f040e9",
        "keyPublicType": "str",
        "keyPrivateType": "str"
    },
    {
        "id": "d9ce9f5276beafeb",
        "type": "ethers-network",
        "name": "",
        "url": "goerli"
    },
    {
        "id": "0a1c6c0edd1fd842",
        "type": "ethers-network",
        "name": "",
        "url": "ropsten"
    },
    {
        "id": "26a531bf9aef221a",
        "type": "ethers-contract",
        "name": "My_PoE.sol (Remix)",
        "address": "0xE1989a90127A449Bd22176299104cf6d2cb5Ba86",
        "abi": "[\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"document\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"notarize\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"bytes32\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"bytes32\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"document\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"checkDocument\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"bool\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"bool\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t}\n]"
    },
    {
        "id": "bb8657c15acd1db1",
        "type": "ui_group",
        "name": "Preview",
        "tab": "af20b3f79a99fb33",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "af20b3f79a99fb33",
        "type": "ui_tab",
        "name": "HTML Viewer",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ab8a838eb23942ff",
        "type": "Context-Broker",
        "name": "Orion LD",
        "endpoint": "http://host.docker.internal:1028",
        "service": "",
        "servicepath": "",
        "idmEndpoint": ""
    },
    {
        "id": "ea805040d9020dd5",
        "type": "http request",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "GET /version (v2)",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/version",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "payload.access_token"
            }
        ],
        "x": 550,
        "y": 300,
        "wires": [
            [
                "96a0b0a9148cf3c7"
            ]
        ]
    },
    {
        "id": "96a0b0a9148cf3c7",
        "type": "debug",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "orion version",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.orion.version",
        "statusType": "msg",
        "x": 790,
        "y": 300,
        "wires": []
    },
    {
        "id": "3f187d9f2efa8a86",
        "type": "debug",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "set flow vars and access token",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:payload.access_token)",
        "statusType": "jsonata",
        "x": 210,
        "y": 360,
        "wires": []
    },
    {
        "id": "04431ebc17ac8506",
        "type": "http request",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "POST /oauth2/token",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/oauth2/token",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "authorization"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "content-type"
            }
        ],
        "x": 540,
        "y": 240,
        "wires": [
            [
                "d854c838d33833a0",
                "3f187d9f2efa8a86"
            ]
        ]
    },
    {
        "id": "d54329b98064c750",
        "type": "debug",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "headers",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "\"Basic \" & clientCredentials",
        "statusType": "jsonata",
        "x": 140,
        "y": 240,
        "wires": []
    },
    {
        "id": "d854c838d33833a0",
        "type": "change",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "set flow vars and access token",
        "rules": [
            {
                "t": "set",
                "p": "keyrock",
                "pt": "flow",
                "to": "keyrock",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "clientId",
                "pt": "flow",
                "to": "clientId",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "clientSecret",
                "pt": "flow",
                "to": "clientSecret",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "username",
                "pt": "flow",
                "to": "username",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "password",
                "pt": "flow",
                "to": "password",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "flow",
                "to": "orion=\"http://host.docker.internal:1026\"?\"http://host.docker.internal:1027\":orion",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "flow",
                "to": "http://host.docker.internal:1029",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "flow",
                "to": "payload.access_token",
                "tot": "msg",
                "dc": true
            },
            {
                "t": "set",
                "p": "link",
                "pt": "flow",
                "to": "<https://raw.githubusercontent.com/FIWARE/tutorials.CRUD-Operations/NGSI-LD/data-models/ngsi-context.jsonld>; rel=\"http://www.w3.org/ns/json-ld#context\"; type=\"application/ld+json\"",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 360,
        "wires": [
            [
                "ea805040d9020dd5",
                "36a9710a40eeec8e",
                "951839e97eff5667"
            ]
        ]
    },
    {
        "id": "951839e97eff5667",
        "type": "http request",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "GET /version (IdM)",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/version",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "payload.access_token"
            }
        ],
        "x": 550,
        "y": 420,
        "wires": [
            [
                "df7028ca82489e66",
                "9f5e340582b9332c"
            ]
        ]
    },
    {
        "id": "df7028ca82489e66",
        "type": "debug",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "keyrock version",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.keyrock.version",
        "statusType": "msg",
        "x": 800,
        "y": 420,
        "wires": []
    },
    {
        "id": "b0695fca8a7f9430",
        "type": "change",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "headers",
        "rules": [
            {
                "t": "set",
                "p": "authorization",
                "pt": "msg",
                "to": "\"Basic \" & clientCredentials",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "content-type",
                "pt": "msg",
                "to": "application/x-www-form-urlencoded",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 140,
        "y": 240,
        "wires": [
            [
                "5cbad5e31e662c6c"
            ]
        ]
    },
    {
        "id": "9a9c685fcb9170e8",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /v2/entities?{query}",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion}}}/v2/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 590,
        "y": 1840,
        "wires": [
            [
                "e3a2a68e60c50c1a"
            ]
        ]
    },
    {
        "id": "184ad4c6e5f1f05c",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "payload",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"type\": \"Person\",\n    \"options\": \"keyValues\"\n}\n",
        "output": "json",
        "x": 320,
        "y": 2560,
        "wires": [
            [
                "43b6e49183de6c14"
            ]
        ]
    },
    {
        "id": "2084b4952294ad3d",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 435,
        "y": 2540,
        "wires": [
            [
                "8df1613573cdf27b"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "9ad0c568481392a4",
        "type": "inject",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "get new token",
        "props": [
            {
                "p": "orion",
                "v": "http://host.docker.internal:1026",
                "vt": "str"
            },
            {
                "p": "orion-ld",
                "v": "http://host.docker.internal:1028",
                "vt": "str"
            },
            {
                "p": "keyrock",
                "v": "http://host.docker.internal:3005",
                "vt": "str"
            },
            {
                "p": "username",
                "v": "alice-the-admin@test.com",
                "vt": "str"
            },
            {
                "p": "password",
                "v": "test",
                "vt": "str"
            },
            {
                "p": "clientId",
                "v": "tutorial-dckr-site-0000-xpresswebapp",
                "vt": "str"
            },
            {
                "p": "clientSecret",
                "v": "tutorial-dckr-site-0000-clientsecret",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 160,
        "y": 60,
        "wires": [
            [
                "87901b1cdb67528b"
            ]
        ]
    },
    {
        "id": "5cbad5e31e662c6c",
        "type": "template",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "payload",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "grant_type=password&username={{{username}}}&password={{{password}}}",
        "output": "str",
        "x": 360,
        "y": 240,
        "wires": [
            [
                "04431ebc17ac8506"
            ]
        ]
    },
    {
        "id": "671488855392edf3",
        "type": "base64",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "",
        "action": "str",
        "property": "clientCredentials",
        "x": 580,
        "y": 180,
        "wires": [
            [
                "b0695fca8a7f9430",
                "d54329b98064c750",
                "f550df0fe64a32d4",
                "8fee3591df052e52",
                "2d96bddfb3b7217f",
                "e8e8ab7fdc96aef0"
            ]
        ]
    },
    {
        "id": "2d96bddfb3b7217f",
        "type": "debug",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "client id",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "clientId",
        "targetType": "msg",
        "statusVal": "clientId",
        "statusType": "auto",
        "x": 780,
        "y": 180,
        "wires": []
    },
    {
        "id": "e8e8ab7fdc96aef0",
        "type": "debug",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "client secret",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "clientSecret",
        "targetType": "msg",
        "statusVal": "clientId",
        "statusType": "auto",
        "x": 790,
        "y": 240,
        "wires": []
    },
    {
        "id": "946d42a189d8ded4",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "POST /v1/auth/tokens",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/v1/auth/tokens",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            }
        ],
        "x": 560,
        "y": 3560,
        "wires": [
            [
                "5646ebefc5115ab7",
                "d0df24d21c89790d"
            ]
        ]
    },
    {
        "id": "d0df24d21c89790d",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "set flow.x-subject-token",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "headers[\"x-subject-token\"]",
        "statusType": "msg",
        "x": 330,
        "y": 3640,
        "wires": []
    },
    {
        "id": "e2ffa84cb0ee03fc",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "keyrock",
        "props": [
            {
                "p": "keyrock",
                "v": "keyrock",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 3560,
        "wires": [
            [
                "4174a6cb8309c0c4"
            ]
        ]
    },
    {
        "id": "4174a6cb8309c0c4",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "set msg.payload",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"name\": \"{{{flow.username}}}\",\n    \"password\": \"{{{flow.password}}}\"\n}",
        "output": "str",
        "x": 300,
        "y": 3560,
        "wires": [
            [
                "946d42a189d8ded4"
            ]
        ]
    },
    {
        "id": "bc7f55281bb57553",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /v1/auth/tokens",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/v1/auth/tokens",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "x-subject-token"
            },
            {
                "keyType": "other",
                "keyValue": "X-Subject-token",
                "valueType": "msg",
                "valueValue": "x-subject-token"
            }
        ],
        "x": 560,
        "y": 3700,
        "wires": [
            [
                "81c286ce316b124a"
            ]
        ]
    },
    {
        "id": "59a78e0c241bfe8c",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "keyrock",
        "props": [
            {
                "p": "keyrock",
                "v": "keyrock",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 3700,
        "wires": [
            [
                "fe1aafcae2f9ac2a"
            ]
        ]
    },
    {
        "id": "5646ebefc5115ab7",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "x-subject-token",
                "pt": "flow",
                "to": "headers[\"x-subject-token\"]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 3640,
        "wires": [
            []
        ]
    },
    {
        "id": "fe1aafcae2f9ac2a",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "x-subject-token",
                "pt": "msg",
                "to": "x-subject-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 3700,
        "wires": [
            [
                "bc7f55281bb57553"
            ]
        ]
    },
    {
        "id": "81c286ce316b124a",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "user id",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.User.id",
        "statusType": "msg",
        "x": 910,
        "y": 3700,
        "wires": []
    },
    {
        "id": "b227049b54e90a75",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "urn:ngsi-ld:Building:farm001",
        "payloadType": "str",
        "x": 130,
        "y": 2780,
        "wires": [
            [
                "99b9e7a12bb460a8"
            ]
        ]
    },
    {
        "id": "bfbc9a220a0eee98",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 2780,
        "wires": []
    },
    {
        "id": "99b9e7a12bb460a8",
        "type": "NGSI-Entity",
        "z": "79f6047133543b6d",
        "name": "",
        "endpoint": "15d84497.52381b",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "mode": "normalized",
        "mimeType": "application/ld+json",
        "attrs": "",
        "x": 290,
        "y": 2780,
        "wires": [
            [
                "2c25a46132db7045"
            ]
        ]
    },
    {
        "id": "6edff22aa81d7442",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 2740,
        "wires": [
            [
                "4654956ef27a1cb9"
            ]
        ]
    },
    {
        "id": "2c25a46132db7045",
        "type": "json",
        "z": "79f6047133543b6d",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 530,
        "y": 2780,
        "wires": [
            [
                "bfbc9a220a0eee98"
            ]
        ]
    },
    {
        "id": "717455b5fea28586",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 2700,
        "wires": [
            [
                "d9d65eb8169ba86b"
            ]
        ]
    },
    {
        "id": "bbbf31bdb81571be",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "farm003",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t   \"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\t   \"id\":\"urn:ngsi-ld:Building:farm003\",\t   \"type\":\"https://uri.fiware.org/ns/data-models#Building\",\t   \"https://schema.org/address\":{\t       \"type\":\"Property\",\t       \"value\":{\t           \"streetAddress\":\"SS113\",\t           \"addressRegion\":\"Palermo\",\t           \"addressLocality\":\"San Nicola\",\t           \"postalCode\":\"12345\"\t       },\t       \"verified\":{\"type\":\"Property\",\"value\":true}\t   },\t   \"name\":{\t       \"type\":\"Property\",\t       \"value\":\"Lido Vetrana\"\t   },\t   \"https://uri.fiware.org/ns/data-models#category\":{\"type\":\"Property\",\"value\":\"farm\"},\t   \"https://uri.fiware.org/ns/data-models#owner\":{\t       \"type\":\"Relationship\",\t       \"object\":\"urn:ngsi-ld:Person:person001\"\t   },\t   \"location\":{\t       \"type\":\"GeoProperty\",\t       \"value\":{\t           \"type\":\"Point\",\t           \"coordinates\":[13.3505,52.5144]\t       }\t   }\t}",
        "payloadType": "jsonata",
        "x": 140,
        "y": 2920,
        "wires": [
            [
                "d3da3a597cad7169"
            ]
        ]
    },
    {
        "id": "d3da3a597cad7169",
        "type": "NGSI-Update",
        "z": "79f6047133543b6d",
        "g": "67d94c6b13c37cc2",
        "name": "",
        "endpoint": "15d84497.52381b",
        "protocol": "LD",
        "updateMode": "upsert-update",
        "updateModev2": "append",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "mimeType": "application/ld+json",
        "x": 510,
        "y": 2920,
        "wires": [
            [
                "de8f098e918bdf35"
            ]
        ]
    },
    {
        "id": "de8f098e918bdf35",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "status",
        "active": true,
        "tosidebar": false,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 670,
        "y": 2960,
        "wires": []
    },
    {
        "id": "d9d65eb8169ba86b",
        "type": "NGSI-Dataset",
        "z": "79f6047133543b6d",
        "name": "",
        "endpoint": "15d84497.52381b",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "TemperatureSensor",
        "attrs": "",
        "q": "",
        "mode": "keyValues",
        "x": 310,
        "y": 2700,
        "wires": [
            [
                "2c25a46132db7045"
            ]
        ]
    },
    {
        "id": "45bfbe9db02d9cdb",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "sensors",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\t   {\t       \"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\t       \"id\":\"urn:ngsi-ld:TemperatureSensor:001\",\t       \"type\":\"TemperatureSensor\",\t       \"description\":{\t           \"type\":\"Property\",\t           \"value\":\"Temperature Gauge 1\"\t       },\t       \"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\t       \"controlledProperty\":{\"type\":\"Property\",\"value\":\"temperature\"},\t       \"temperature\":{\t           \"type\":\"Property\",\t           \"value\":$random()*45,\t           \"unitCode\":\"CEL\"\t       },\t       \"inter\":{\t           \"type\":\"Property\",\t           \"value\":\"Triplete 2010\"\t       }\t   },\t   {\t       \"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\t       \"id\":\"urn:ngsi-ld:TemperatureSensor:002\",\t       \"type\":\"TemperatureSensor\",\t       \"description\":{\t           \"type\":\"Property\",\t           \"value\":\"Temperature Gauge 2\"\t       },\t       \"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\t       \"controlledProperty\":{\"type\":\"Property\",\"value\":\"temperature\"},\t       \"temperature\":{\t           \"type\":\"Property\",\t           \"value\":$random()*45,\t           \"unitCode\":\"CEL\"\t       }\t   },\t   {\t       \"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\t       \"id\":\"urn:ngsi-ld:TemperatureSensor:003\",\t       \"type\":\"TemperatureSensor\",\t       \"description\":{\t           \"type\":\"Property\",\t           \"value\":\"Temperature Gauge 3\"\t       },\t       \"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\t       \"controlledProperty\":{\"type\":\"Property\",\"value\":\"temperature\"},\t       \"temperature\":{\t           \"type\":\"Property\",\t           \"value\":$random()*45,\t           \"unitCode\":\"CEL\"\t       }\t   }\t]",
        "payloadType": "jsonata",
        "x": 130,
        "y": 2960,
        "wires": [
            [
                "d3da3a597cad7169"
            ]
        ]
    },
    {
        "id": "4654956ef27a1cb9",
        "type": "NGSI-Dataset",
        "z": "79f6047133543b6d",
        "name": "",
        "endpoint": "15d84497.52381b",
        "protocol": "LD",
        "ldContext": "https://fiware.github.io/data-models/context.jsonld",
        "entityType": "Building",
        "attrs": "",
        "q": "",
        "mode": "keyValues",
        "x": 280,
        "y": 2740,
        "wires": [
            [
                "2c25a46132db7045"
            ]
        ]
    },
    {
        "id": "5c949488930be2f0",
        "type": "NGSI-v2ToLD",
        "z": "79f6047133543b6d",
        "name": "",
        "x": 300,
        "y": 3020,
        "wires": [
            [
                "d3da3a597cad7169",
                "6df04493fb63806a"
            ]
        ]
    },
    {
        "id": "2d21a1e049c120ad",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "farm003",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t   \"id\":\"urn:ngsi-ld:Building:farm003\",\t   \"type\":\"https://uri.fiware.org/ns/data-models#Building\",\t   \"https://schema.org/address\":{\t       \"type\":\"Property\",\t       \"value\":{\t           \"streetAddress\":\"SS113\",\t           \"addressRegion\":\"Palermo\",\t           \"addressLocality\":\"San Nicola\",\t           \"postalCode\":\"12345\"\t       },\t       \"verified\":{\"type\":\"Property\",\"value\":true}\t   },\t   \"name\":{\t       \"type\":\"Property\",\t       \"value\":\"Lido Vetrana\"\t   },\t   \"https://uri.fiware.org/ns/data-models#category\":{\"type\":\"Property\",\"value\":\"farm\"},\t   \"https://uri.fiware.org/ns/data-models#owner\":{\t       \"type\":\"Relationship\",\t       \"object\":\"urn:ngsi-ld:Person:person001\"\t   },\t   \"location\":{\t       \"type\":\"GeoProperty\",\t       \"value\":{\t           \"type\":\"Point\",\t           \"coordinates\":[13.3505,52.5144]\t       }\t   }\t}",
        "payloadType": "jsonata",
        "x": 140,
        "y": 3020,
        "wires": [
            [
                "5c949488930be2f0"
            ]
        ]
    },
    {
        "id": "bc48f57a3f7a7546",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "sensors",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\t   {\t       \"id\":\"urn:ngsi-ld:TemperatureSensor:001\",\t       \"type\":\"TemperatureSensor\",\t       \"description\":{\t           \"type\":\"Property\",\t           \"value\":\"Temperature Gauge 1\"\t       },\t       \"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\t       \"controlledProperty\":{\"type\":\"Property\",\"value\":\"temperature\"},\t       \"temperature\":{\t           \"type\":\"Property\",\t           \"value\":$random()*45,\t           \"unitCode\":\"CEL\"\t       },\t       \"inter\":{\t           \"type\":\"Property\",\t           \"value\":\"Triplete 2010\"\t       }\t   },\t   {\t       \"id\":\"urn:ngsi-ld:TemperatureSensor:002\",\t       \"type\":\"TemperatureSensor\",\t       \"description\":{\t           \"type\":\"Property\",\t           \"value\":\"Temperature Gauge 2\"\t       },\t       \"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\t       \"controlledProperty\":{\"type\":\"Property\",\"value\":\"temperature\"},\t       \"temperature\":{\t           \"type\":\"Property\",\t           \"value\":$random()*45,\t           \"unitCode\":\"CEL\"\t       }\t   },\t   {\t       \"id\":\"urn:ngsi-ld:TemperatureSensor:003\",\t       \"type\":\"TemperatureSensor\",\t       \"description\":{\t           \"type\":\"Property\",\t           \"value\":\"Temperature Gauge 3\"\t       },\t       \"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\t       \"controlledProperty\":{\"type\":\"Property\",\"value\":\"temperature\"},\t       \"temperature\":{\t           \"type\":\"Property\",\t           \"value\":$random()*45,\t           \"unitCode\":\"CEL\"\t       }\t   }\t]",
        "payloadType": "jsonata",
        "x": 130,
        "y": 3060,
        "wires": [
            [
                "b4b9bada4b3c04c8"
            ]
        ]
    },
    {
        "id": "6df04493fb63806a",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "debug 2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 3020,
        "wires": []
    },
    {
        "id": "e3a2a68e60c50c1a",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 790,
        "y": 1840,
        "wires": []
    },
    {
        "id": "b4b9bada4b3c04c8",
        "type": "split",
        "z": "79f6047133543b6d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 270,
        "y": 3060,
        "wires": [
            [
                "c12fccc24909a459"
            ]
        ]
    },
    {
        "id": "2dd5bee2a2dcd024",
        "type": "join",
        "z": "79f6047133543b6d",
        "name": "",
        "mode": "auto",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 670,
        "y": 3060,
        "wires": [
            [
                "d3da3a597cad7169"
            ]
        ]
    },
    {
        "id": "c12fccc24909a459",
        "type": "NGSI-v2ToLD",
        "z": "79f6047133543b6d",
        "name": "",
        "x": 500,
        "y": 3060,
        "wires": [
            [
                "2dd5bee2a2dcd024",
                "6df04493fb63806a"
            ]
        ]
    },
    {
        "id": "236a1e5eac628165",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "READ",
        "info": "",
        "x": 130,
        "y": 2640,
        "wires": []
    },
    {
        "id": "068fb9f6ec8ab97e",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "WRITE",
        "info": "",
        "x": 130,
        "y": 2860,
        "wires": []
    },
    {
        "id": "721c7174bac318c6",
        "type": "NGSI-Subscription",
        "z": "79f6047133543b6d",
        "name": "",
        "endpoint": "15d84497.52381b",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "TemperatureSensor",
        "watchedAttributes": "",
        "q": "",
        "notificationMode": "normalized",
        "notificationEndpoint": "https://fiware.zeldalegends.repl.co/fiware",
        "notificationAttributes": "",
        "mimeType": "application/ld+json",
        "x": 310,
        "y": 3260,
        "wires": [
            [
                "a6d5635e98dc1996"
            ]
        ]
    },
    {
        "id": "d1c4db468b1053ed",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "subscribe",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 3260,
        "wires": [
            [
                "721c7174bac318c6"
            ]
        ]
    },
    {
        "id": "a6d5635e98dc1996",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "subscribe",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload.subscriptionId",
        "targetType": "msg",
        "statusVal": "payload.statusCode",
        "statusType": "msg",
        "x": 680,
        "y": 3260,
        "wires": []
    },
    {
        "id": "044d4397f76a797f",
        "type": "http in",
        "z": "79f6047133543b6d",
        "name": "",
        "url": "/fiware",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 290,
        "y": 3300,
        "wires": [
            [
                "0e5ed2971e2d33f5",
                "edda449fb8360d9f"
            ]
        ]
    },
    {
        "id": "0e5ed2971e2d33f5",
        "type": "json",
        "z": "79f6047133543b6d",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 530,
        "y": 3360,
        "wires": [
            [
                "7e8c2e6a599ba928"
            ]
        ]
    },
    {
        "id": "7e8c2e6a599ba928",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "notify",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload.data[0]",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature.value",
        "statusType": "msg",
        "x": 670,
        "y": 3360,
        "wires": []
    },
    {
        "id": "edda449fb8360d9f",
        "type": "http response",
        "z": "79f6047133543b6d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 530,
        "y": 3300,
        "wires": []
    },
    {
        "id": "812d3231e58c474c",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "clear subs",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 3420,
        "wires": [
            [
                "384cddec055168be"
            ]
        ]
    },
    {
        "id": "816d938cd85c4a38",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "bearer"
            }
        ],
        "x": 530,
        "y": 3420,
        "wires": [
            [
                "2777e92525d2e273",
                "04e30d14490f5890"
            ]
        ]
    },
    {
        "id": "2777e92525d2e273",
        "type": "split",
        "z": "79f6047133543b6d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 670,
        "y": 3420,
        "wires": [
            [
                "e0e2585a32e06107"
            ]
        ]
    },
    {
        "id": "e0e2585a32e06107",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "DELETE",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/{{payload.id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "bearer"
            }
        ],
        "x": 860,
        "y": 3420,
        "wires": [
            [
                "ac3dd8c003117567"
            ]
        ]
    },
    {
        "id": "04e30d14490f5890",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "list",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 3480,
        "wires": []
    },
    {
        "id": "384cddec055168be",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "set header with access token",
        "rules": [
            {
                "t": "set",
                "p": "access_token",
                "pt": "msg",
                "to": "access_token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "bearer",
                "pt": "msg",
                "to": "\"Bearer \" & access_token",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 3420,
        "wires": [
            [
                "816d938cd85c4a38"
            ]
        ]
    },
    {
        "id": "7ccf90436ed39bb0",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "SUBSCRIBE",
        "info": "",
        "x": 150,
        "y": 3200,
        "wires": []
    },
    {
        "id": "a6624090426f72da",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "USER INFO",
        "info": "",
        "x": 150,
        "y": 3500,
        "wires": []
    },
    {
        "id": "f0f3ab856a793130",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 3120,
        "wires": [
            [
                "3a81952067648370"
            ]
        ]
    },
    {
        "id": "23832ed745cb9007",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "POST",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entityOperations/upsert",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/ld+json"
            }
        ],
        "x": 670,
        "y": 3120,
        "wires": [
            [
                "0eb052775f5dea1b"
            ]
        ]
    },
    {
        "id": "0eb052775f5dea1b",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "temperature",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature.value",
        "statusType": "msg",
        "x": 850,
        "y": 3120,
        "wires": []
    },
    {
        "id": "3a81952067648370",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "new entities",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "[\n    {\n        \"@context\": \"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\n        \"id\": \"urn:ngsi-ld:TemperatureSensor:123\",\n        \"type\": \"TemperatureSensor\",\n        \"description\": {\n            \"type\": \"Property\",\n            \"value\": \"Temperature Gauge 133\"\n        },\n        \"category\": {\n            \"type\": \"Property\",\n            \"value\": \"sensor\"\n        },\n        \"controlledProperty\": {\n            \"type\": \"Property\",\n            \"value\": \"temperature\"\n        },\n        \"temperature\": {\n            \"type\": \"Property\",\n            \"value\":{{value}},\n            \"unitCode\": \"CEL\"\n        }\n    }\n]",
        "output": "str",
        "x": 510,
        "y": 3120,
        "wires": [
            [
                "23832ed745cb9007"
            ]
        ]
    },
    {
        "id": "286b66154cb14735",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "orion-ld",
        "props": [
            {
                "p": "value",
                "v": "$random()*45",
                "vt": "jsonata"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 3120,
        "wires": [
            [
                "f0f3ab856a793130"
            ]
        ]
    },
    {
        "id": "4d2960b7ae5f755e",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "UNSUBSCRIBE",
        "info": "",
        "x": 160,
        "y": 3360,
        "wires": []
    },
    {
        "id": "ac3dd8c003117567",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "debug 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 860,
        "y": 3480,
        "wires": []
    },
    {
        "id": "36a9710a40eeec8e",
        "type": "http request",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "GET /version (LD)",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/version",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "payload.access_token"
            }
        ],
        "x": 550,
        "y": 360,
        "wires": [
            [
                "762f0f8fd7a3322c"
            ]
        ]
    },
    {
        "id": "762f0f8fd7a3322c",
        "type": "debug",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "orion ld version",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload[\"orionld version\"]",
        "statusType": "msg",
        "x": 800,
        "y": 360,
        "wires": []
    },
    {
        "id": "53db56ea1f3756f2",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /ngsi-ld/v1/entities",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 410,
        "y": 2600,
        "wires": [
            [
                "891ba69b8242765e"
            ]
        ]
    },
    {
        "id": "c86c2ff3052891fb",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "import-data (LD)",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Building:farm001\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Großer Stern 1\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3505,52.5144]}},\"name\":{\"type\":\"Property\",\"value\":\"Victory Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:barn002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"barn\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Straße des 17. Juni\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3698,52.5163]}},\"name\":{\"type\":\"Property\",\"value\":\"Big Red Barn\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:tower003\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"water_tower\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"John-Foster-Dulles-Allee\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3598,52.5165]}},\"name\":{\"type\":\"Property\",\"value\":\"Triton Tower\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:farm002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Hardenbergplatz 8\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10787\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3127,52.4893]}},\"name\":{\"type\":\"Property\",\"value\":\"Animal Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person002\"}},{\"id\":\"urn:ngsi-ld:Person:person001\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Old MacDonald\"}},{\"id\":\"urn:ngsi-ld:Person:person002\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Napoleon the Pig\"}}]",
        "payloadType": "json",
        "x": 140,
        "y": 2440,
        "wires": [
            [
                "22e76f0d2b15b5c5"
            ]
        ]
    },
    {
        "id": "e13c4909d866f86d",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "orion-ld proxy",
        "props": [
            {
                "p": "orion",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 2560,
        "wires": [
            [
                "184ad4c6e5f1f05c"
            ]
        ]
    },
    {
        "id": "0b7a927a37ce4b60",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "all entities",
        "props": [
            {
                "p": "options",
                "v": "keyValues",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 1900,
        "wires": [
            [
                "a084457a496023a2"
            ]
        ]
    },
    {
        "id": "a084457a496023a2",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "options",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"options\": \"{{options}}\"\n}\n",
        "output": "json",
        "x": 360,
        "y": 1900,
        "wires": [
            [
                "4618c0719f5b816c"
            ]
        ]
    },
    {
        "id": "891ba69b8242765e",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "$count(payload) & ($count(payload)=1?\" entity\":\" entities\")",
        "statusType": "jsonata",
        "x": 730,
        "y": 2600,
        "wires": []
    },
    {
        "id": "f550df0fe64a32d4",
        "type": "debug",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "username",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "username",
        "targetType": "msg",
        "statusVal": "username",
        "statusType": "auto",
        "x": 780,
        "y": 60,
        "wires": []
    },
    {
        "id": "87901b1cdb67528b",
        "type": "change",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "encode credentials",
        "rules": [
            {
                "t": "set",
                "p": "clientCredentials",
                "pt": "msg",
                "to": "clientId & \":\" & clientSecret",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 180,
        "wires": [
            [
                "671488855392edf3"
            ]
        ]
    },
    {
        "id": "227340f51c6e37f5",
        "type": "NGSI-v2ToLD",
        "z": "79f6047133543b6d",
        "name": "",
        "x": 420,
        "y": 2440,
        "wires": [
            [
                "664b857060060db7"
            ]
        ]
    },
    {
        "id": "8df1613573cdf27b",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "POST /ngsi-ld/v1/entityOperations/upsert",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entityOperations/upsert",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/ld+json"
            }
        ],
        "x": 620,
        "y": 2540,
        "wires": [
            [
                "31c88d0dcfe2c1b5"
            ]
        ]
    },
    {
        "id": "31c88d0dcfe2c1b5",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "status",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 880,
        "y": 2540,
        "wires": []
    },
    {
        "id": "43b6e49183de6c14",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 275,
        "y": 2600,
        "wires": [
            [
                "53db56ea1f3756f2"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "4618c0719f5b816c",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 455,
        "y": 1840,
        "wires": [
            [
                "9a9c685fcb9170e8"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "e796e5a7feecb218",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "NGSI-LD",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 2440,
        "wires": []
    },
    {
        "id": "22e76f0d2b15b5c5",
        "type": "split",
        "z": "79f6047133543b6d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 315,
        "y": 2440,
        "wires": [
            [
                "227340f51c6e37f5"
            ]
        ],
        "l": false
    },
    {
        "id": "697ab99699d65a7e",
        "type": "join",
        "z": "79f6047133543b6d",
        "name": "",
        "mode": "auto",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 835,
        "y": 2480,
        "wires": [
            [
                "2084b4952294ad3d"
            ]
        ],
        "l": false
    },
    {
        "id": "07e1a8ae70298a45",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "WRITE",
        "info": "",
        "x": 130,
        "y": 2320,
        "wires": []
    },
    {
        "id": "b6e5178d51d809f9",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "POST /v2/op/update",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/op/update",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 580,
        "y": 1600,
        "wires": [
            [
                "f413ac63ad357584"
            ]
        ]
    },
    {
        "id": "0c8648c0267971fa",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t    \"actionType\": \"append\",\t    \"entities\": [payload]\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 2500,
        "wires": [
            []
        ]
    },
    {
        "id": "c80a8ddeecba5234",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "get orion and token",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "authtoken",
                "pt": "msg",
                "to": "authtoken",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 205,
        "y": 2500,
        "wires": [
            [
                "0c8648c0267971fa"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "1ec586901d85691c",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "entity",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"id\": \"urn:ngsi-ld:Temperature{{topic}}\",\n    \"type\": \"TemperatureSensor\",\n    \"category\": {\n        \"type\": \"Text\",\n        \"value\": \"sensor\"\n    },\n    \"temperature\": {\n        \"type\": \"Integer\",\n        \"value\": {{payload}},\n        \"metadata\": {\n            \"unitCode\": {\n                \"type\": \"Text\",\n                \"value\": \"CEL\"\n            }\n        }\n    },\n    \"TimeInstant\": {\n        \"type\": \"Text\",\n        \"value\": \"{{timeinstant}}\"\n    }\n}",
        "output": "json",
        "x": 120,
        "y": 2500,
        "wires": [
            [
                "c80a8ddeecba5234"
            ]
        ],
        "icon": "node-red-contrib-letsfiware-ngsi/fiware-non-free.svg"
    },
    {
        "id": "24fbc5c8978f7209",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 455,
        "y": 1600,
        "wires": [
            [
                "b6e5178d51d809f9"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "728d378a2e6989c5",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "import-data (v2)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Store:001\",\"type\":\"Store\",\"address\":{\"type\":\"PostalAddress\",\"value\":{\"streetAddress\":\"Bornholmer Straße 65\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Prenzlauer Berg\",\"postalCode\":\"10439\"}},\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3986,52.5547]}},\"name\":{\"type\":\"Text\",\"value\":\"Bösebrücke Einkauf\"}},{\"id\":\"urn:ngsi-ld:Store:002\",\"type\":\"Store\",\"address\":{\"type\":\"PostalAddress\",\"value\":{\"streetAddress\":\"Friedrichstraße 44\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Kreuzberg\",\"postalCode\":\"10969\"}},\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3903,52.5075]}},\"name\":{\"type\":\"Text\",\"value\":\"Checkpoint Markt\"}},{\"id\":\"urn:ngsi-ld:Store:003\",\"type\":\"Store\",\"address\":{\"type\":\"PostalAddress\",\"value\":{\"streetAddress\":\"Mühlenstrasse 10\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Friedrichshain\",\"postalCode\":\"10243\"}},\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.4447,52.5031]}},\"name\":{\"type\":\"Text\",\"value\":\"East Side Galleria\"}},{\"id\":\"urn:ngsi-ld:Store:004\",\"type\":\"Store\",\"address\":{\"type\":\"PostalAddress\",\"value\":{\"streetAddress\":\"Panoramastraße 1A\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Mitte\",\"postalCode\":\"10178\"}},\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.4094,52.5208]}},\"name\":{\"type\":\"Text\",\"value\":\"Tower Trödelmarkt\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit001\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3986112,52.554699]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":50},\"name\":{\"type\":\"Text\",\"value\":\"Corner Unit\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:001\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit002\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3987221,52.554664]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":100},\"name\":{\"type\":\"Text\",\"value\":\"Wall Unit 1\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:001\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit003\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3987221,52.554664]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":100},\"name\":{\"type\":\"Text\",\"value\":\"Wall Unit 2\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:001\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit004\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.390311,52.507522]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":50},\"name\":{\"type\":\"Text\",\"value\":\"Corner Unit\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:002\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit005\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.390309,52.50751]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":200},\"name\":{\"type\":\"Text\",\"value\":\"Long Wall Unit\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:002\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit006\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.4447112,52.503199]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":50},\"name\":{\"type\":\"Text\",\"value\":\"Corner Unit\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit007\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.4447221,52.503164]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":100},\"name\":{\"type\":\"Text\",\"value\":\"Wall Unit 1\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit008\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.4447221,52.503164]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":100},\"name\":{\"type\":\"Text\",\"value\":\"Wall Unit 2\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit009\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.444711,52.503122]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":50},\"name\":{\"type\":\"Text\",\"value\":\"Corner Unit\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit010\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.4094111,52.5208028]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":200},\"name\":{\"type\":\"Text\",\"value\":\"Long Wall Unit\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:004\"}},{\"id\":\"urn:ngsi-ld:Product:001\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Beer\"},\"size\":{\"type\":\"Text\",\"value\":\"S\"},\"price\":{\"type\":\"Integer\",\"value\":99}},{\"id\":\"urn:ngsi-ld:Product:002\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Red Wine\"},\"size\":{\"type\":\"Text\",\"value\":\"M\"},\"price\":{\"type\":\"Integer\",\"value\":1099}},{\"id\":\"urn:ngsi-ld:Product:003\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"White Wine\"},\"size\":{\"type\":\"Text\",\"value\":\"M\"},\"price\":{\"type\":\"Integer\",\"value\":1499}},{\"id\":\"urn:ngsi-ld:Product:004\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Vodka\"},\"size\":{\"type\":\"Text\",\"value\":\"XL\"},\"price\":{\"type\":\"Integer\",\"value\":5000}},{\"id\":\"urn:ngsi-ld:Product:005\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Lager\"},\"size\":{\"type\":\"Text\",\"value\":\"S\"},\"price\":{\"type\":\"Integer\",\"value\":99}},{\"id\":\"urn:ngsi-ld:Product:006\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Whisky\"},\"size\":{\"type\":\"Text\",\"value\":\"S\"},\"price\":{\"type\":\"Integer\",\"value\":99}},{\"id\":\"urn:ngsi-ld:Product:007\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Gin\"},\"size\":{\"type\":\"Text\",\"value\":\"S\"},\"price\":{\"type\":\"Integer\",\"value\":99}},{\"id\":\"urn:ngsi-ld:Product:008\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Apple Juice\"},\"size\":{\"type\":\"Text\",\"value\":\"S\"},\"price\":{\"type\":\"Integer\",\"value\":99}},{\"id\":\"urn:ngsi-ld:Product:009\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Orange Juice\"},\"size\":{\"type\":\"Text\",\"value\":\"S\"},\"price\":{\"type\":\"Integer\",\"value\":99}},{\"id\":\"urn:ngsi-ld:InventoryItem:001\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:001\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit001\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:001\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":15}},{\"id\":\"urn:ngsi-ld:InventoryItem:002\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:001\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit002\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:003\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":50}},{\"id\":\"urn:ngsi-ld:InventoryItem:003\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:001\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit003\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:004\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":50}},{\"id\":\"urn:ngsi-ld:InventoryItem:004\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:002\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit004\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:001\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":15}},{\"id\":\"urn:ngsi-ld:InventoryItem:005\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:002\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit005\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:002\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":15}},{\"id\":\"urn:ngsi-ld:InventoryItem:006\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit006\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:001\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":50}},{\"id\":\"urn:ngsi-ld:InventoryItem:007\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit007\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:008\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":50}},{\"id\":\"urn:ngsi-ld:InventoryItem:008\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit008\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:009\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":50}},{\"id\":\"urn:ngsi-ld:InventoryItem:401\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:004\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit010\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:001\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":50}}]",
        "payloadType": "json",
        "x": 160,
        "y": 1660,
        "wires": [
            [
                "eab3254812aaea16"
            ]
        ]
    },
    {
        "id": "664b857060060db7",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "@context file from github",
        "rules": [
            {
                "t": "set",
                "p": "payload[\"@context\"]",
                "pt": "msg",
                "to": "https://fiware.github.io/tutorials.Step-by-Step/tutorials-context.jsonld",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 2440,
        "wires": [
            [
                "e796e5a7feecb218",
                "697ab99699d65a7e"
            ]
        ]
    },
    {
        "id": "a52e0b5cc4e7a8c3",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "@context file (CRUD tutorial)",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"@context\": {\n        \"type\": \"@type\",\n        \"id\": \"@id\",\n        \"ngsi-ld\": \"https://uri.etsi.org/ngsi-ld/\",\n        \"fiware\": \"https://uri.fiware.org/ns/data-models#\",\n        \"schema\": \"https://schema.org/\",\n        \"tutorial\": \"https://ngsi-ld-tutorials.readthedocs.io/en/latest/datamodels.html#\",\n        \"Building\": \"fiware:Building\",\n        \"Device\": \"fiware:Device\",\n        \"Animal\": \"fiware:Animal\",\n        \"Female\": \"schema:Female\",\n        \"FillingLevelSensor\": \"tutorial:FillingLevelSensor\",\n        \"Herbicide\": \"tutorial:Product\",\n        \"HVAC\": \"https://w3id.org/saref#HVAC\",\n        \"Male\": \"schema:Male\",\n        \"PartField\": \"tutorial:PartField\",\n        \"Person\": \"fiware:Person\",\n        \"SoilSensor\": \"tutorial:SoilSensor\",\n        \"TemperatureSensor\": \"tutorial:TemperatureSensor\",\n        \"Task\": \"fiware:Activity\",\n        \"Tractor\": \"tutorial:Tractor\",\n        \"Water\": \"tutorial:Water\",\n        \"actuator\": \"https://w3id.org/saref#actuator\",\n        \"additionalName\": \"schema:additionalName\",\n        \"address\": \"schema:address\",\n        \"airPollution\": \"https://w3id.org/saref#airPollution\",\n        \"atmosphericPressure\": \"https://w3id.org/saref#atmosphericPressure\",\n        \"barn\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dbarn\",\n        \"batteryLevel\": \"fiware:batteryLevel\",\n        \"category\": \"fiware:category\",\n        \"configuration\": \"fiware:configuration\",\n        \"conservatory\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dconservatory\",\n        \"containedInPlace\": \"fiware:containedInPlace\",\n        \"controlledAsset\": \"fiware:controlledAsset\",\n        \"controlledProperty\": \"fiware:controlledProperty\",\n        \"cowshed\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dcowshed\",\n        \"dataProvider\": \"fiware:dataProvider\",\n        \"dateCreated\": \"fiware:dateCreated\",\n        \"dateFirstUsed\": \"fiware:dateFirstUsed\",\n        \"dateInstalled\": \"fiware:dateInstalled\",\n        \"dateLastCalibration\": \"fiware:dateLastCalibration\",\n        \"dateLastValueReported\": \"fiware:dateLastValueReported\",\n        \"dateManufactured\": \"fiware:dateManufactured\",\n        \"dateModified\": \"fiware:dateModified\",\n        \"depth\": \"https://w3id.org/saref#depth\",\n        \"description\": \"ngsi-ld:description\",\n        \"deviceState\": \"fiware:deviceState\",\n        \"digester\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Ddigester\",\n        \"eatingActivity\": \"https://w3id.org/saref#eatingActivity\",\n        \"email\": \"schema:email\",\n        \"endgun\": \"https://w3id.org/saref#endgun\",\n        \"familyName\": \"schema:familyName\",\n        \"farm\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dfarm\",\n        \"farm_auxiliary\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dfarm_auxiliary\",\n        \"faxNumber\": \"schema:faxNumber\",\n        \"filling\": \"https://w3id.org/saref#fillingLevel\",\n        \"firmwareVersion\": \"fiware:firmwareVersion\",\n        \"floorsAboveGround\": \"fiware:floorsAboveGround\",\n        \"floorsBelowGround\": \"fiware:floorsBelowGround\",\n        \"gender\": \"schema:gender\",\n        \"givenName\": \"schema:givenName\",\n        \"greenhouse\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dgreenhouse\",\n        \"hangar\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dhangar\",\n        \"hardwareVersion\": \"fiware:hardwareVersion\",\n        \"honorificPrefix\": \"schema:honorificPrefix\",\n        \"honorificSuffix\": \"schema:honorificSuffix\",\n        \"humidity\": \"https://w3id.org/saref#humidity\",\n        \"hut\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dhut\",\n        \"implement\": \"https://w3id.org/saref#implement\",\n        \"ipAddress\": \"fiware:ipAddress\",\n        \"irrSection\": \"https://w3id.org/saref#irrSection\",\n        \"irrSystem\": \"https://w3id.org/saref#irrSystem\",\n        \"isicV4\": \"schema:isicV4\",\n        \"jobTitle\": \"schema:jobTitle\",\n        \"location\": \"https://w3id.org/saref#location\",\n        \"macAddress\": \"fiware:macAddress\",\n        \"mcc\": \"fiware:mcc\",\n        \"meter\": \"https://w3id.org/saref#meter\",\n        \"milking\": \"https://w3id.org/saref#milking\",\n        \"mnc\": \"fiware:mnc\",\n        \"motion\": \"https://w3id.org/saref#motion\",\n        \"movementActivity\": \"https://w3id.org/saref#movementActivity\",\n        \"multimedia\": \"https://w3id.org/saref#multimedia\",\n        \"name\": \"ngsi-ld:name\",\n        \"network\": \"https://w3id.org/saref#network\",\n        \"observedAt\": \"ngsi-ld:observedAt\",\n        \"occupancy\": \"https://w3id.org/saref#occupancy\",\n        \"occupier\": \"fiware:occupier\",\n        \"openingHours\": \"fiware:openingHours\",\n        \"osVersion\": \"fiware:osVersion\",\n        \"owner\": \"fiware:owner\",\n        \"precipitation\": \"https://w3id.org/saref#precipitation\",\n        \"pressure\": \"https://w3id.org/saref#pressure\",\n        \"providedBy\": \"fiware:providedBy\",\n        \"provider\": \"fiware:provider\",\n        \"refDeviceModel\": \"fiware:refDeviceModel\",\n        \"refMap\": \"fiware:refMap\",\n        \"rssi\": \"fiware:rssi\",\n        \"sensor\": \"https://w3id.org/saref#sensor\",\n        \"serialNumber\": \"fiware:serialNumber\",\n        \"service\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dservice\",\n        \"shed\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dshed\",\n        \"softwareVersion\": \"fiware:softwareVersion\",\n        \"soilMoisture\": \"https://w3id.org/saref#soilMoisture\",\n        \"solarRadiation\": \"https://w3id.org/saref#solarRadiation\",\n        \"source\": \"fiware:source\",\n        \"stable\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dstable\",\n        \"sty\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dsty\",\n        \"supportedProtocol\": \"fiware:supportedProtocol\",\n        \"taxID\": \"schema:taxID\",\n        \"telephone\": \"schema:telephone\",\n        \"temperature\": \"https://w3id.org/saref#temperature\",\n        \"transformer_tower\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dtransformer_tower\",\n        \"unitCode\": \"ngsi-ld:unitCode\",\n        \"value\": \"fiware:value\",\n        \"vatID\": \"schema:vatID\",\n        \"waterConsumption\": \"https://w3id.org/saref#waterConsumption\",\n        \"water_tower\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dwater_tower\",\n        \"weatherConditions\": \"https://w3id.org/saref#weatherConditions\",\n        \"weight\": \"https://w3id.org/saref#weight\",\n        \"windDirection\": \"https://w3id.org/saref#windDirection\",\n        \"windSpeed\": \"https://w3id.org/saref#windSpeed\",\n        \"status\": \"https://saref.etsi.org/core/status\",\n        \"state\": \"https://saref.etsi.org/core/hasState\",\n        \"heartRate\": \"https://purl.bioontology.org/ontology/MESH/D006339\",\n        \"product\": \"fiware:refObject\",\n        \"worker\": \"fiware:refAgent\",\n        \"field\": \"fiware:refTarget\",\n\n        \"on\": \"https://w3id.org/saref#on\",\n        \"off\": \"https://w3id.org/saref#off\",\n\n        \"species\": \"fiware:species\",\n        \"sex\": \"fiware:sex\",\n        \"legalID\": \"fiware:legalID\"\n    }\n}",
        "output": "str",
        "x": 340,
        "y": 3780,
        "wires": [
            [
                "041ea3ffd9c54499"
            ]
        ]
    },
    {
        "id": "041ea3ffd9c54499",
        "type": "file",
        "z": "79f6047133543b6d",
        "name": "",
        "filename": "public/data-models/ngsi-context.jsonld",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 630,
        "y": 3780,
        "wires": [
            [
                "c79274e81bdd5712"
            ]
        ]
    },
    {
        "id": "374b0c7dc5dfd648",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "create",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 3840,
        "wires": [
            [
                "a52e0b5cc4e7a8c3",
                "80e8740ea82f9558",
                "a38618b679e47a46"
            ]
        ]
    },
    {
        "id": "c79274e81bdd5712",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "JSONLD file",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 890,
        "y": 3840,
        "wires": []
    },
    {
        "id": "8145dcfdd1b4542a",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "all @context files",
        "rules": [
            {
                "t": "set",
                "p": "payload[\"@context\"]",
                "pt": "msg",
                "to": "[\"https://schema.lab.fiware.org/ld/context.jsonld\",\"https://fiware.github.io/data-models/context.jsonld\",\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\"https://fiware.github.io/tutorials.Step-by-Step/tutorials-context.jsonld\",\"https://fiware.zeldalegends.repl.co/data-models/ngsi-context.jsonld\",\"https://fiware.github.io/data-models/context.jsonld\"]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 2360,
        "wires": [
            [
                "1c8844199563d4c6",
                "697ab99699d65a7e"
            ]
        ]
    },
    {
        "id": "a7424c9caa495515",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "@context file from replit",
        "rules": [
            {
                "t": "set",
                "p": "payload[\"@context\"]",
                "pt": "msg",
                "to": "https://fiware.zeldalegends.repl.co/data-models/ngsi-context.jsonld",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 2400,
        "wires": [
            [
                "ac0ea8afb3c8b818",
                "697ab99699d65a7e"
            ]
        ]
    },
    {
        "id": "ac0ea8afb3c8b818",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "NGSI-LD",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 2400,
        "wires": []
    },
    {
        "id": "1c8844199563d4c6",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "NGSI-LD",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 2360,
        "wires": []
    },
    {
        "id": "14f1424f1f44dc55",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "import-data (LD)",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Building:farm001\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Großer Stern 1\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3505,52.5144]}},\"name\":{\"type\":\"Property\",\"value\":\"Victory Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:barn002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"barn\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Straße des 17. Juni\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3698,52.5163]}},\"name\":{\"type\":\"Property\",\"value\":\"Big Red Barn\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:tower003\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"water_tower\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"John-Foster-Dulles-Allee\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3598,52.5165]}},\"name\":{\"type\":\"Property\",\"value\":\"Triton Tower\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:farm002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Hardenbergplatz 8\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10787\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3127,52.4893]}},\"name\":{\"type\":\"Property\",\"value\":\"Animal Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person002\"}},{\"id\":\"urn:ngsi-ld:Person:person001\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Old MacDonald\"}},{\"id\":\"urn:ngsi-ld:Person:person002\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Napoleon the Pig\"}}]",
        "payloadType": "json",
        "x": 160,
        "y": 2400,
        "wires": [
            [
                "9ba4dadc34b1ecc5"
            ]
        ]
    },
    {
        "id": "18369b9574c31679",
        "type": "NGSI-v2ToLD",
        "z": "79f6047133543b6d",
        "name": "",
        "x": 460,
        "y": 2400,
        "wires": [
            [
                "a7424c9caa495515"
            ]
        ]
    },
    {
        "id": "9ba4dadc34b1ecc5",
        "type": "split",
        "z": "79f6047133543b6d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 355,
        "y": 2400,
        "wires": [
            [
                "18369b9574c31679"
            ]
        ],
        "l": false
    },
    {
        "id": "3dba0473abccf502",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "import-data (LD)",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Building:farm001\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Großer Stern 1\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3505,52.5144]}},\"name\":{\"type\":\"Property\",\"value\":\"Victory Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:barn002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"barn\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Straße des 17. Juni\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3698,52.5163]}},\"name\":{\"type\":\"Property\",\"value\":\"Big Red Barn\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:tower003\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"water_tower\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"John-Foster-Dulles-Allee\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3598,52.5165]}},\"name\":{\"type\":\"Property\",\"value\":\"Triton Tower\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:farm002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Hardenbergplatz 8\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10787\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3127,52.4893]}},\"name\":{\"type\":\"Property\",\"value\":\"Animal Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person002\"}},{\"id\":\"urn:ngsi-ld:Person:person001\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Old MacDonald\"}},{\"id\":\"urn:ngsi-ld:Person:person002\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Napoleon the Pig\"}}]",
        "payloadType": "json",
        "x": 180,
        "y": 2360,
        "wires": [
            [
                "d7c21bee2f8f5a50"
            ]
        ]
    },
    {
        "id": "de84031eafc72208",
        "type": "NGSI-v2ToLD",
        "z": "79f6047133543b6d",
        "name": "",
        "x": 480,
        "y": 2360,
        "wires": [
            [
                "8145dcfdd1b4542a"
            ]
        ]
    },
    {
        "id": "d7c21bee2f8f5a50",
        "type": "split",
        "z": "79f6047133543b6d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 375,
        "y": 2360,
        "wires": [
            [
                "de84031eafc72208"
            ]
        ],
        "l": false
    },
    {
        "id": "80e8740ea82f9558",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "@context file (CRUD tutorial)",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"@context\": {\n        \"type\": \"@type\",\n        \"id\": \"@id\",\n        \"ngsi-ld\": \"https://uri.etsi.org/ngsi-ld/\",\n        \"fiware\": \"https://uri.fiware.org/ns/data-models#\",\n        \"schema\": \"https://schema.org/\",\n        \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n        \"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\n        \"tutorial\": \"https://ngsi-ld-tutorials.readthedocs.io/en/latest/datamodels.html#\",\n        \"Building\": \"fiware:Building\",\n        \"Device\": \"fiware:Device\",\n        \"Animal\": \"fiware:Animal\",\n        \"Female\": \"schema:Female\",\n        \"FillingLevelSensor\": \"tutorial:FillingLevelSensor\",\n        \"Herbicide\": \"tutorial:Product\",\n        \"HVAC\": \"https://w3id.org/saref#HVAC\",\n        \"Male\": \"schema:Male\",\n        \"PartField\": \"tutorial:PartField\",\n        \"Person\": \"fiware:Person\",\n        \"SoilSensor\": \"tutorial:SoilSensor\",\n        \"TemperatureSensor\": \"tutorial:TemperatureSensor\",\n        \"Task\": \"fiware:Activity\",\n        \"Tractor\": \"tutorial:Tractor\",\n        \"Water\": \"tutorial:Water\",\n        \"actuator\": \"https://w3id.org/saref#actuator\",\n        \"additionalName\": {\n            \"@id\": \"schema:additionalName\",\n            \"@type\": \"xsd:string\"\n        },\n        \"address\": \"schema:address\",\n        \"airPollution\": \"https://w3id.org/saref#airPollution\",\n        \"atmosphericPressure\": \"https://w3id.org/saref#atmosphericPressure\",\n        \"barn\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dbarn\",\n        \"batteryLevel\": {\n            \"@id\": \"fiware:batteryLevel\",\n            \"@type\": \"xsd:number\"\n        },\n        \"category\": {\n            \"@id\": \"fiware:category\",\n            \"@type\": \"@vocab\"\n        },\n        \"configuration\": {\n            \"@id\": \"fiware:configuration\",\n            \"@type\": \"xsd:string\"\n        },\n        \"conservatory\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dconservatory\",\n        \"containedInPlace\": {\n            \"@id\": \"fiware:containedInPlace\",\n            \"@type\": \"@id\"\n        },\n        \"controlledAsset\": {\n            \"@id\": \"fiware:controlledAsset\",\n            \"@type\": \"@id\"\n        },\n        \"controlledProperty\": {\n            \"@id\": \"fiware:controlledProperty\",\n            \"@type\": \"@vocab\"\n        },\n        \"cowshed\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dcowshed\",\n        \"dataProvider\": {\n            \"@id\": \"fiware:dataProvider\",\n            \"@type\": \"xsd:string\"\n        },\n        \"dateCreated\": {\n            \"@id\": \"fiware:dateCreated\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"dateFirstUsed\": {\n            \"@id\": \"fiware:dateFirstUsed\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"dateInstalled\": {\n            \"@id\": \"fiware:dateInstalled\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"dateLastCalibration\": {\n            \"@id\": \"fiware:dateLastCalibration\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"dateLastValueReported\": {\n            \"@id\": \"fiware:dateLastValueReported\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"dateManufactured\": {\n            \"@id\": \"fiware:dateManufactured\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"dateModified\": {\n            \"@id\": \"fiware:dateModified\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"depth\": \"https://w3id.org/saref#depth\",\n        \"description\": {\n            \"@id\": \"ngsi-ld:description\",\n            \"@type\": \"xsd:string\"\n        },\n        \"deviceState\": {\n            \"@id\": \"fiware:deviceState\",\n            \"@type\": \"xsd:string\"\n        },\n        \"digester\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Ddigester\",\n        \"eatingActivity\": \"https://w3id.org/saref#eatingActivity\",\n        \"email\": {\n            \"@id\": \"schema:email\",\n            \"@type\": \"xsd:string\"\n        },\n        \"endgun\": \"https://w3id.org/saref#endgun\",\n        \"familyName\": {\n            \"@id\": \"schema:familyName\",\n            \"@type\": \"xsd:string\"\n        },\n        \"farm\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dfarm\",\n        \"farm_auxiliary\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dfarm_auxiliary\",\n        \"faxNumber\": {\n            \"@id\": \"schema:faxNumber\",\n            \"@type\": \"xsd:string\"\n        },\n        \"filling\": \"https://w3id.org/saref#fillingLevel\",\n        \"firmwareVersion\": {\n            \"@id\": \"fiware:firmwareVersion\",\n            \"@type\": \"xsd:string\"\n        },\n        \"floorsAboveGround\": {\n            \"@id\": \"fiware:floorsAboveGround\",\n            \"@type\": \"xsd:integer\"\n        },\n        \"floorsBelowGround\": {\n            \"@id\": \"fiware:floorsBelowGround\",\n            \"@type\": \"xsd:integer\"\n        },\n        \"gender\": {\n            \"@id\": \"schema:gender\",\n            \"@type\": \"@vocab\"\n        },\n        \"givenName\": {\n            \"@id\": \"schema:givenName\",\n            \"@type\": \"xsd:string\"\n        },\n        \"greenhouse\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dgreenhouse\",\n        \"hangar\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dhangar\",\n        \"hardwareVersion\": {\n            \"@id\": \"fiware:hardwareVersion\",\n            \"@type\": \"xsd:string\"\n        },\n        \"honorificPrefix\": {\n            \"@id\": \"schema:honorificPrefix\",\n            \"@type\": \"xsd:string\"\n        },\n        \"honorificSuffix\": {\n            \"@id\": \"schema:honorificSuffix\",\n            \"@type\": \"xsd:string\"\n        },\n        \"humidity\": \"https://w3id.org/saref#humidity\",\n        \"hut\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dhut\",\n        \"implement\": \"https://w3id.org/saref#implement\",\n        \"ipAddress\": {\n            \"@id\": \"fiware:ipAddress\",\n            \"@type\": \"xsd:string\"\n        },\n        \"irrSection\": \"https://w3id.org/saref#irrSection\",\n        \"irrSystem\": \"https://w3id.org/saref#irrSystem\",\n        \"isicV4\": {\n            \"@id\": \"schema:isicV4\",\n            \"@type\": \"xsd:string\"\n        },\n        \"jobTitle\": {\n            \"@id\": \"schema:jobTitle\",\n            \"@type\": \"xsd:string\"\n        },\n        \"location\": \"https://w3id.org/saref#location\",\n        \"macAddress\": {\n            \"@id\": \"fiware:macAddress\",\n            \"@type\": \"xsd:string\"\n        },\n        \"mcc\": {\n            \"@id\": \"fiware:mcc\",\n            \"@type\": \"xsd:string\"\n        },\n        \"meter\": \"https://w3id.org/saref#meter\",\n        \"milking\": \"https://w3id.org/saref#milking\",\n        \"mnc\": {\n            \"@id\": \"fiware:mnc\",\n            \"@type\": \"xsd:string\"\n        },\n        \"motion\": \"https://w3id.org/saref#motion\",\n        \"movementActivity\": \"https://w3id.org/saref#movementActivity\",\n        \"multimedia\": \"https://w3id.org/saref#multimedia\",\n        \"name\": {\n            \"@id\": \"ngsi-ld:name\",\n            \"@type\": \"xsd:string\"\n        },\n        \"network\": \"https://w3id.org/saref#network\",\n        \"occupancy\": \"https://w3id.org/saref#occupancy\",\n        \"occupier\": {\n            \"@id\": \"fiware:occupier\",\n            \"@type\": \"@id\"\n        },\n        \"openingHours\": {\n            \"@id\": \"fiware:openingHours\",\n            \"@type\": \"xsd:array\"\n        },\n        \"osVersion\": {\n            \"@id\": \"fiware:osVersion\",\n            \"@type\": \"xsd:string\"\n        },\n        \"owner\": {\n            \"@id\": \"fiware:owner\",\n            \"@type\": \"@id\"\n        },\n        \"precipitation\": \"https://w3id.org/saref#precipitation\",\n        \"pressure\": \"https://w3id.org/saref#pressure\",\n        \"provider\": {\n            \"@id\": \"fiware:provider\",\n            \"@type\": \"xsd:string\"\n        },\n        \"refDeviceModel\": {\n            \"@id\": \"fiware:refDeviceModel\",\n            \"@type\": \"@id\"\n        },\n        \"refMap\": {\n            \"@id\": \"fiware:refMap\",\n            \"@type\": \"xs:anyURI\"\n        },\n        \"rssi\": {\n            \"@id\": \"fiware:rssi\",\n            \"@type\": \"xsd:string\"\n        },\n        \"sensor\": \"https://w3id.org/saref#sensor\",\n        \"serialNumber\": {\n            \"@id\": \"fiware:serialNumber\",\n            \"@type\": \"xsd:string\"\n        },\n        \"service\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dservice\",\n        \"shed\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dshed\",\n        \"softwareVersion\": {\n            \"@id\": \"fiware:softwareVersion\",\n            \"@type\": \"xsd:string\"\n        },\n        \"soilMoisture\": \"https://w3id.org/saref#soilMoisture\",\n        \"solarRadiation\": \"https://w3id.org/saref#solarRadiation\",\n        \"source\": {\n            \"@id\": \"fiware:source\",\n            \"@type\": \"xsd:string\"\n        },\n        \"stable\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dstable\",\n        \"sty\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dsty\",\n        \"supportedProtocol\": {\n            \"@id\": \"fiware:supportedProtocol\",\n            \"@type\": \"@vocab\"\n        },\n        \"taxID\": {\n            \"@id\": \"schema:taxID\",\n            \"@type\": \"xsd:string\"\n        },\n        \"telephone\": {\n            \"@id\": \"schema:telephone\",\n            \"@type\": \"xsd:string\"\n        },\n        \"temperature\": \"https://w3id.org/saref#temperature\",\n        \"transformer_tower\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dtransformer_tower\",\n        \"value\": {\n            \"@id\": \"fiware:value\",\n            \"@type\": \"xsd:string\"\n        },\n        \"vatID\": {\n            \"@id\": \"schema:vatID\",\n            \"@type\": \"xsd:string\"\n        },\n        \"waterConsumption\": \"https://w3id.org/saref#waterConsumption\",\n        \"water_tower\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dwater_tower\",\n        \"weatherConditions\": \"https://w3id.org/saref#weatherConditions\",\n        \"weight\": \"https://w3id.org/saref#weight\",\n        \"windDirection\": \"https://w3id.org/saref#windDirection\",\n        \"windSpeed\": \"https://w3id.org/saref#windSpeed\",\n        \"state\": \"https://saref.etsi.org/core/hasState\",\n        \"heartRate\": \"https://purl.bioontology.org/ontology/MESH/D006339\",\n        \"status\": \"https://saref.etsi.org/core/status\",\n        \"product\": {\n            \"@id\": \"fiware:refObject\",\n            \"@type\": \"@id\"\n        },\n        \"worker\": {\n            \"@id\": \"fiware:refAgent\",\n            \"@type\": \"@id\"\n        },\n        \"field\": {\n            \"@id\": \"fiware:refTarget\",\n            \"@type\": \"@id\"\n        },\n        \"on\": \"https://w3id.org/saref#on\",\n        \"off\": \"https://w3id.org/saref#off\",\n        \"species\": \"fiware:species\",\n        \"sex\": \"fiware:sex\",\n        \"legalID\": \"fiware:legalID\"\n    },\n    \"@graph\": [\n        {\n            \"@id\": \"fiware:Building\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Building\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"schema:Thing\"\n            }\n        },\n        {\n            \"@id\": \"fiware:TemperatureSensor\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"A device that consists of a sensor, has category `saref:Sensor` and is used for the purpose of sensing temperature`.\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"TemperatureSensor\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"schema:Thing\"\n            }\n        },\n        {\n            \"@id\": \"fiware:FillingLevelSensor\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"A device that consists of a sensor, has category `saref:Sensor` and is used for the purpose of sensing filling Level.\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"FillingLevelSensor\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"schema:Thing\"\n            }\n        },\n        {\n            \"@id\": \"fiware:Person\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Person\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"schema:Thing\"\n            }\n        },\n        {\n            \"@id\": \"fiware:temperature\",\n            \"@type\": \"ngsi-ld:Property\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Property related to some measurements that are characterized by a certain value that is measured in a temperature unit (degree_Celsius, degree_Fahrenheit, or degree_kelvin)\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"temperature\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"fiware:fillingLevel\",\n            \"@type\": \"ngsi-ld:Property\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Property related to some measurements that are characterized by a certain value that is a filling level.\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"fillingLevel\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"fiware:temperature\",\n            \"@type\": \"ngsi-ld:Property\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Property related to some measurements that are characterized by a certain value that is measured in a temperature unit (degree_Celsius, degree_Fahrenheit, or degree_kelvin)\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"temperature\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"fiware:fillingLevel\",\n            \"@type\": \"ngsi-ld:Property\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Property related to some measurements that are characterized by a certain value that is a filling level.\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"fillingLevel\"\n                }\n            ]\n        }\n    ]\n}",
        "output": "str",
        "x": 340,
        "y": 3840,
        "wires": [
            [
                "71f772e43d6d8376"
            ]
        ]
    },
    {
        "id": "71f772e43d6d8376",
        "type": "file",
        "z": "79f6047133543b6d",
        "name": "",
        "filename": "public/data-models/json-context.jsonld",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 630,
        "y": 3840,
        "wires": [
            [
                "c79274e81bdd5712"
            ]
        ]
    },
    {
        "id": "a38618b679e47a46",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "@context file (PEP Proxy)",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"@context\": {\n        \"type\": \"@type\",\n        \"id\": \"@id\",\n        \"schema\": \"https://schema.org/\",\n        \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n        \"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\n        \"fiware\": \"https://uri.fiware.org/ns/data-models#\",\n        \"tutorial\": \"https://fiware.github.io/tutorials.Step-by-Step/schema/\",\n        \"Building\": \"fiware:Building\",\n        \"Product\": \"tutorial:Product\",\n        \"Shelf\": \"tutorial:Shelf\",\n        \"StockOrder\": \"tutorial:StockOrder\",\n        \"Person\": \"schema:Person\",\n        \"address\": \"schema:address\",\n        \"category\": \"fiware:category\",\n        \"commercial\": \"fiware:commercial\",\n        \"office\": \"fiware:office\",\n        \"industrial\": \"fiware:industrial\",\n        \"retail\": \"fiware:retail\",\n        \"residential\": \"fiware:residential\",\n        \"containedInPlace\": \"fiware:containedInPlace\",\n        \"dataProvider\": \"fiware:dataProvider\",\n        \"description\": \"fiware:description\",\n        \"floorsAboveGround\": \"fiware:floorsAboveGround\",\n        \"floorsBelowGround\": \"fiware:floorsBelowGround\",\n        \"tweets\": \"tutorial:tweets\",\n        \"owner\": \"fiware:owner\",\n        \"occupier\": \"fiware:occupier\",\n        \"refMap\": \"fiware:refMap\",\n        \"source\": \"fiware:source\",\n        \"installedBy\": \"tutorial:installedBy\",\n        \"locatedIn\": \"tutorial:locatedIn\",\n        \"maxCapacity\": \"tutorial:maxCapacity\",\n        \"statusOfWork\": \"tutorial:statusOfWork\",\n        \"requested\": \"tutorial:requested\",\n        \"completed\": \"tutorial:completed\",\n        \"scheduled\": \"tutorial:scheduled\",\n        \"inProgress\": \"tutorial:inProgress\",\n        \"stocks\": \"tutorial:stocks\",\n        \"currency\": \"tutorial:currency\",\n        \"price\": \"tutorial:price\",\n        \"size\": \"tutorial:size\",\n        \"furniture\": \"tutorial:furniture\",\n        \"verified\": \"tutorial:verified\",\n        \"requestedFor\": \"tutorial:requestedFor\",\n        \"requestedBy\": \"tutorial:requestedBy\",\n        \"orderedProduct\": \"tutorial:orderedProduct\",\n        \"orderDate\": \"tutorial:orderDate\",\n        \"stockCount\": \"tutorial:stockCount\",\n        \"numberOfItems\": \"tutorial:numberOfItems\"\n    },\n    \"@graph\": [\n        {\n            \"@id\": \"tutorial:Product\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Product is something sold in a Store.\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"製品はストアで販売されている物\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Product\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"製品\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"http://schema.org/Thing\"\n            }\n        },\n        {\n            \"@id\": \"tutorial:Shelf\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"A Shelf is a unit of Store Furniture\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"棚はストア用家具のユニット\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Shelf\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"棚\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"http://schema.org/Thing\"\n            }\n        },\n        {\n            \"@id\": \"tutorial:StockOrder\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"StockOrder an entry in a list of items sold in one or more stores\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"在庫注文は1つ以上のストアで販売されるアイテムの一覧のエントリ\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"StockOrder\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"在庫注文\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"http://schema.org/Intangible\"\n            }\n        },\n        {\n            \"@id\": \"schema:Person\",\n            \"@type\": \"rdfs:Class\",\n            \"http://purl.org/dc/terms/source\": {\n                \"@id\": \"http://www.w3.org/wiki/WebSchemas/SchemaDotOrgSources#source_rNews\"\n            },\n            \"http://www.w3.org/2002/07/owl#equivalentClass\": {\n                \"@id\": \"http://xmlns.com/foaf/0.1/Person\"\n            },\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"A person (alive, dead, undead, or fictional).\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"人 (生きている, 死んでいる, 完全に死んでいない, または架空の人)\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Person\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"人\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"http://schema.org/Thing\"\n            }\n        },\n        {\n            \"@id\": \"tutoral:requestedBy\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"tutorial:Shelf\"\n                },\n                {\n                    \"@id\": \"tutorial:StockOrder\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"schema:Person\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Object requested by person.\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"人が要求したオブジェクト\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"requestedBy\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"要求者\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"tutoral:installedBy\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"tutorial:Shelf\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"schema:Person\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Person who installs an Object\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"オブジェクトを設置する人\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"installedBy\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"設置者\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"tutorial:furniture\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"fiware:Building\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"tutorial:Shelf\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Units found within a Building\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"建物内で見つかったユニット\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"furniture\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"家具\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"tutorial:locatedIn\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"tutorial:Shelf\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"fiware:Building\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Building in which an item is found\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"アイテムが見つかった建物\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"locatedIn\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"置き場所\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"tutorial:stocks\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"tutorial:Shelf\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"tutorial:Product\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"The product found on a shelf\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"棚の上にある製品\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"stocks\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"在庫\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"tutorial:requestedFor\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"tutorial:StockOrder\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"fiware:Building\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Store for which an item is requested\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"アイテムが要求されたストア\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"requestedFor\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"要求対象\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"tutorial:orderedProduct\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"tutorial:StockOrder\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"tutorial:Product\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"The Product ordered for a store\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"ストアで注文された製品\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"orderedProduct\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"注文された製品\"\n                }\n            ]\n        }\n    ]\n}",
        "output": "str",
        "x": 330,
        "y": 3900,
        "wires": [
            [
                "5a91ed4d3eb10e24"
            ]
        ]
    },
    {
        "id": "5a91ed4d3eb10e24",
        "type": "file",
        "z": "79f6047133543b6d",
        "name": "",
        "filename": "public/data-models/tutorial-context.jsonld",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 620,
        "y": 3900,
        "wires": [
            [
                "c79274e81bdd5712"
            ]
        ]
    },
    {
        "id": "5cd412f1fd3381c7",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /ngsi-ld/v1/entities",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "other",
                "valueValue": "<https://fiware.github.io/tutorials.Step-by-Step/tutorials-context.jsonld>; rel=\"http://www.w3.org/ns/json-ld#context\"; type=\"application/ld+json\""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 430,
        "y": 2620,
        "wires": [
            []
        ]
    },
    {
        "id": "c2c2b39e392748df",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "WRITE (v2)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-v2)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-v2)\n",
        "x": 150,
        "y": 1500,
        "wires": []
    },
    {
        "id": "cf1230af0f3e1eed",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "entities (v2)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Product:011\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Brandy\"},\"size\":{\"type\":\"Text\",\"value\":\"M\"},\"price\":{\"type\":\"Integer\",\"value\":1199}},{\"id\":\"urn:ngsi-ld:Product:012\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Port\"},\"size\":{\"type\":\"Text\",\"value\":\"M\"},\"price\":{\"type\":\"Integer\",\"value\":1099}}]",
        "payloadType": "json",
        "x": 150,
        "y": 1600,
        "wires": [
            [
                "eab3254812aaea16"
            ]
        ]
    },
    {
        "id": "15048879f59aeb19",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "READ (v2)",
        "info": " - [CRUD Tutorial](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-v2)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-v2)\n",
        "x": 140,
        "y": 1740,
        "wires": []
    },
    {
        "id": "ed4a8afb7bf5a60f",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "search by",
        "props": [
            {
                "p": "type",
                "v": "Product",
                "vt": "str"
            },
            {
                "p": "attrs",
                "v": "name,price",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 1840,
        "wires": [
            [
                "a9dc501fc784cd07"
            ]
        ]
    },
    {
        "id": "a9dc501fc784cd07",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "type,attrs",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"type\": \"{{type}}\",\n    \"attrs\": \"{{attrs}}\"\n}\n",
        "output": "json",
        "x": 360,
        "y": 1840,
        "wires": [
            [
                "4618c0719f5b816c"
            ]
        ]
    },
    {
        "id": "7611948b82fa72cd",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "sensor",
        "props": [
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 1780,
        "wires": [
            [
                "cac190608c03ab39"
            ]
        ]
    },
    {
        "id": "323a9b6a0f3086d0",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "sensor",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ {\"id\":\"urn:ngsi-ld:TemperatureSensor:001\"}]",
        "payloadType": "json",
        "x": 130,
        "y": 2020,
        "wires": [
            [
                "fb94cbe73aa04821"
            ]
        ]
    },
    {
        "id": "8f6c9392d723fd9e",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "POST /v2/op/update",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/op/update",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 580,
        "y": 2080,
        "wires": [
            [
                "b187aa12e3555ce1"
            ]
        ]
    },
    {
        "id": "c3723a5e91b454b0",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 455,
        "y": 2080,
        "wires": [
            [
                "8f6c9392d723fd9e"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "425a08b1ce961f76",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "import-data (v2)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Store:001\",\"type\":\"Store\"},{\"id\":\"urn:ngsi-ld:Store:002\",\"type\":\"Store\"},{\"id\":\"urn:ngsi-ld:Store:003\",\"type\":\"Store\"},{\"id\":\"urn:ngsi-ld:Store:004\",\"type\":\"Store\"},{\"id\":\"urn:ngsi-ld:Shelf:unit001\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit002\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit003\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit004\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit005\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit006\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit007\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit008\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit009\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit010\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Product:001\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:002\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:003\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:004\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:005\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:006\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:007\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:008\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:009\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:InventoryItem:001\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:002\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:003\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:004\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:005\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:006\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:007\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:008\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:401\",\"type\":\"InventoryItem\"}]",
        "payloadType": "json",
        "x": 160,
        "y": 2140,
        "wires": [
            [
                "fb94cbe73aa04821"
            ]
        ]
    },
    {
        "id": "da0bb17c26951e66",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "entities (v2)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Product:011\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:012\",\"type\":\"Product\"}]",
        "payloadType": "json",
        "x": 150,
        "y": 2080,
        "wires": [
            [
                "fb94cbe73aa04821"
            ]
        ]
    },
    {
        "id": "d68bce2cfff7fae2",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "all entities",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 2200,
        "wires": [
            [
                "eefa7c5086b4977d"
            ]
        ]
    },
    {
        "id": "f2b7458a6680a7c6",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 455,
        "y": 2200,
        "wires": [
            [
                "3d46426d3635da24"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "3d46426d3635da24",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /v2/entities?{query}",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion}}}/v2/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 590,
        "y": 2200,
        "wires": [
            [
                "fb94cbe73aa04821"
            ]
        ]
    },
    {
        "id": "eefa7c5086b4977d",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "attrs",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"attrs\": \"id\"\n}",
        "output": "json",
        "x": 350,
        "y": 2200,
        "wires": [
            [
                "f2b7458a6680a7c6"
            ]
        ]
    },
    {
        "id": "f413ac63ad357584",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 790,
        "y": 1600,
        "wires": []
    },
    {
        "id": "b187aa12e3555ce1",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 790,
        "y": 2080,
        "wires": []
    },
    {
        "id": "ce581a260ef4589e",
        "type": "inject",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "FIWARE Lab",
        "props": [
            {
                "p": "orion",
                "v": "http://orion.lab.fiware.org:1026",
                "vt": "str"
            },
            {
                "p": "keyrock",
                "v": "https://account.lab.fiware.org",
                "vt": "str"
            },
            {
                "p": "clientId",
                "v": "ec7ec225e9294a4eba22af1db00d1bdc",
                "vt": "str"
            },
            {
                "p": "clientSecret",
                "v": "f34d1aed9ae2401e98713c4056b46756",
                "vt": "str"
            },
            {
                "p": "username",
                "v": "gamesup@libero.it",
                "vt": "str"
            },
            {
                "p": "password",
                "v": "fisupport",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 120,
        "wires": [
            [
                "87901b1cdb67528b"
            ]
        ]
    },
    {
        "id": "8fee3591df052e52",
        "type": "debug",
        "z": "79f6047133543b6d",
        "g": "c732681448a48707",
        "name": "password",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "password",
        "targetType": "msg",
        "statusVal": "$pad(\"\",$length(password),\"*\")\t",
        "statusType": "jsonata",
        "x": 780,
        "y": 120,
        "wires": []
    },
    {
        "id": "eab3254812aaea16",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "append",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"actionType\": \"append\",\t   \"entities\": payload\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 1600,
        "wires": [
            [
                "24fbc5c8978f7209"
            ]
        ]
    },
    {
        "id": "fb94cbe73aa04821",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "delete",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"actionType\": \"delete\",\t   \"entities\": payload\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 2080,
        "wires": [
            [
                "c3723a5e91b454b0"
            ]
        ]
    },
    {
        "id": "f1e9acee2960a319",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "DELETE (v2)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-v2)\n",
        "x": 150,
        "y": 1980,
        "wires": []
    },
    {
        "id": "9f5e340582b9332c",
        "type": "ui_template",
        "z": "79f6047133543b6d",
        "group": "bb8657c15acd1db1",
        "name": "HTML Viewer",
        "order": 0,
        "width": 0,
        "height": 0,
        "format": "<div ng-bind-html=\"msg.payload\"></div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 800,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "c09a84923b298cab",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "create entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"id\":\"urn:ngsi-ld:TemperatureSensor:001\",\"type\":\"TemperatureSensor\",\"category\":{\"type\":\"Text\",\"value\":\"Sensor\"},\"temperature\":{\"type\":\"Integer\",\"value\":0,\"metadata\":{\"unitCode\":{\"type\":\"Text\",\"value\":\"CEL\"}}}}",
        "payloadType": "json",
        "x": 150,
        "y": 560,
        "wires": [
            [
                "806abdab1f4f43d5"
            ]
        ]
    },
    {
        "id": "28024ceb12e1ea7b",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "PUT /v2/entities/{id}/attrs/{attr}/value",
        "method": "PUT",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities/{{{id}}}/attrs/{{{attr}}}/value",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 450,
        "y": 640,
        "wires": [
            [
                "9c0939ec9e9cc134"
            ]
        ]
    },
    {
        "id": "44ab5352b478bc25",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "write attribute",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "attr",
                "v": "temperature",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "$round(200*$random())-50",
        "payloadType": "jsonata",
        "x": 150,
        "y": 640,
        "wires": [
            [
                "28024ceb12e1ea7b",
                "e510a96e6f270715"
            ]
        ]
    },
    {
        "id": "4fc0f601d665bb17",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "test create",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : \"created at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 790,
        "y": 560,
        "wires": []
    },
    {
        "id": "9c0939ec9e9cc134",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "test write",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : \"updated at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 780,
        "y": 640,
        "wires": []
    },
    {
        "id": "8a56e15f03472cc3",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "read attribute",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "attr",
                "v": "temperature",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 720,
        "wires": [
            [
                "2c9c4ad120cc4554"
            ]
        ]
    },
    {
        "id": "b04a6bc377bdd678",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "test read",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : payload)",
        "statusType": "jsonata",
        "x": 780,
        "y": 720,
        "wires": []
    },
    {
        "id": "161bbcb628d5a04a",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "TEST (v2)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-v2)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-v2)\n",
        "x": 140,
        "y": 520,
        "wires": []
    },
    {
        "id": "7a0be443ceec583d",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "sensor",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\t    {\t        \"id\":\"urn:ngsi-ld:TemperatureSensor:001\",\t        \"type\":\"TemperatureSensor\",\t        \"category\": {\t            \"type\":\"Text\",\t            \"value\":\"Sensor\"\t        },\t        \"temperature\": {\t            \"type\":\"Integer\",\t            \"value\":$round(200*$random())-50,\t            \"metadata\": {\t                \"unitCode\": {\t                    \"type\": \"Text\",\t                    \"value\": \"CEL\"\t                }\t            }\t        }\t    }\t]",
        "payloadType": "jsonata",
        "x": 130,
        "y": 1540,
        "wires": [
            [
                "eab3254812aaea16"
            ]
        ]
    },
    {
        "id": "806abdab1f4f43d5",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "POST /v2/entities",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 390,
        "y": 560,
        "wires": [
            [
                "4fc0f601d665bb17"
            ]
        ]
    },
    {
        "id": "2c9c4ad120cc4554",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /v2/entities/{id}/attrs/{attr}/value",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities/{{{id}}}/attrs/{{{attr}}}/value",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 450,
        "y": 720,
        "wires": [
            [
                "b04a6bc377bdd678"
            ]
        ]
    },
    {
        "id": "739af0fa1eabc191",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /v2/entities/{id}",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion}}}/v2/entities/{{{id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 390,
        "y": 800,
        "wires": [
            [
                "49760ac32b6b017f"
            ]
        ]
    },
    {
        "id": "49760ac32b6b017f",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "test get",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : payload.id)",
        "statusType": "jsonata",
        "x": 780,
        "y": 800,
        "wires": []
    },
    {
        "id": "4259b0ebf2b0d6c8",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "get entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "payload.options",
                "v": "keyValues",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 800,
        "wires": [
            [
                "739af0fa1eabc191"
            ]
        ]
    },
    {
        "id": "f9c3fd976633d9f0",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "DELETE /v2/entities/{id}",
        "method": "DELETE",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities/{{{id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 410,
        "y": 880,
        "wires": [
            [
                "4949ef02b5ad3ba5"
            ]
        ]
    },
    {
        "id": "e4c0b884f44d8484",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "delete entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 880,
        "wires": [
            [
                "f9c3fd976633d9f0"
            ]
        ]
    },
    {
        "id": "4949ef02b5ad3ba5",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "test delete",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : \"deleted at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 790,
        "y": 880,
        "wires": []
    },
    {
        "id": "cac190608c03ab39",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "id",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"id\": \"{{id}}\"\n}\n",
        "output": "json",
        "x": 350,
        "y": 1780,
        "wires": [
            [
                "4618c0719f5b816c"
            ]
        ]
    },
    {
        "id": "c245b31b3876ee02",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /v2/subscriptions/",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 400,
        "y": 1400,
        "wires": [
            [
                "4d886d1a759bdee1",
                "8c6a35787e6fa088"
            ]
        ]
    },
    {
        "id": "c575104b73842b7a",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "list all subs",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 1400,
        "wires": [
            [
                "c245b31b3876ee02"
            ]
        ]
    },
    {
        "id": "d529242274feb241",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "DELETE /v2/subscriptions/{{id}}",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/{{id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 430,
        "y": 1320,
        "wires": [
            [
                "c245b31b3876ee02",
                "6691c2894f4191b4"
            ]
        ]
    },
    {
        "id": "e43452fdbd8a13c6",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "delete latest sub",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "latest",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 160,
        "y": 1320,
        "wires": [
            [
                "d529242274feb241"
            ]
        ]
    },
    {
        "id": "98778878e8b3f370",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "delete all subs",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 1240,
        "wires": [
            [
                "044f485b4ff6cc08"
            ]
        ]
    },
    {
        "id": "044f485b4ff6cc08",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /v2/subscriptions/",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 400,
        "y": 1240,
        "wires": [
            [
                "98acaae032d15de0",
                "6248c8e9df4f4f38"
            ]
        ]
    },
    {
        "id": "936560e06098b99c",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "get flow.latest",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.id",
        "statusType": "msg",
        "x": 800,
        "y": 1400,
        "wires": []
    },
    {
        "id": "89261f220e21b760",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "latest",
                "pt": "flow",
                "to": "payload.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "54a00c1869d977d4",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.id",
                "pt": "msg",
                "to": "id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 1240,
        "wires": [
            [
                "d529242274feb241"
            ]
        ]
    },
    {
        "id": "7616dea7f4577279",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "SUBSCRIBE (v2)",
        "info": " - [Subscriptions](https://github.com/FIWARE/tutorials.Subscriptions/tree/NGSI-v2)\n",
        "x": 160,
        "y": 980,
        "wires": []
    },
    {
        "id": "6691c2894f4191b4",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 790,
        "y": 1320,
        "wires": []
    },
    {
        "id": "98acaae032d15de0",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "split",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 610,
        "y": 1240,
        "wires": []
    },
    {
        "id": "4d886d1a759bdee1",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "split",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 610,
        "y": 1400,
        "wires": []
    },
    {
        "id": "6248c8e9df4f4f38",
        "type": "split",
        "z": "79f6047133543b6d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 610,
        "y": 1240,
        "wires": [
            [
                "54a00c1869d977d4"
            ]
        ]
    },
    {
        "id": "8c6a35787e6fa088",
        "type": "split",
        "z": "79f6047133543b6d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 610,
        "y": 1400,
        "wires": [
            [
                "89261f220e21b760",
                "936560e06098b99c"
            ]
        ]
    },
    {
        "id": "42f9a8470b860a47",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "create simple sub",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"description\":\"Notify me of all temperature changes\",\"subject\":{\"entities\":[{\"idPattern\":\".*\",\"type\":\"TemperatureSensor\"}],\"condition\":{\"attrs\":[\"temperature\"]}},\"notification\":{\"http\":{\"url\":\"https://fiware.zeldalegends.repl.co/temperature-change\"}}}",
        "payloadType": "json",
        "x": 160,
        "y": 1060,
        "wires": [
            [
                "a80527f86421c105"
            ]
        ]
    },
    {
        "id": "a80527f86421c105",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "POST /v2/subscriptions/",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 410,
        "y": 1000,
        "wires": [
            [
                "ed1cef7b6b82a1cd"
            ]
        ]
    },
    {
        "id": "b6458f0dbd53da0b",
        "type": "http in",
        "z": "79f6047133543b6d",
        "name": "",
        "url": "/temperature-change",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 410,
        "y": 1060,
        "wires": [
            [
                "4ef532573bf41580",
                "0aa6d370f93465c6"
            ]
        ]
    },
    {
        "id": "4ef532573bf41580",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "/temperature-change",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature.value",
        "statusType": "msg",
        "x": 820,
        "y": 1060,
        "wires": []
    },
    {
        "id": "e510a96e6f270715",
        "type": "delay",
        "z": "79f6047133543b6d",
        "name": "",
        "pauseType": "delay",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 255,
        "y": 680,
        "wires": [
            [
                "2c9c4ad120cc4554"
            ]
        ],
        "l": false
    },
    {
        "id": "66e9d623ae7a79a8",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "UTILS",
        "info": "",
        "x": 130,
        "y": 3780,
        "wires": []
    },
    {
        "id": "7ad7d076d3781b4b",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 1810,
        "y": 1840,
        "wires": []
    },
    {
        "id": "c639c1fd6cde113b",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "all entities",
        "props": [
            {
                "p": "payload.options",
                "v": "keyValues",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1120,
        "y": 1900,
        "wires": [
            [
                "5cac01f809315e00"
            ]
        ]
    },
    {
        "id": "da566185273a4b49",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "WRITE (v2)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-v2)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-v2)\n",
        "x": 1130,
        "y": 1500,
        "wires": []
    },
    {
        "id": "c9fab7096fe1310f",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "entities (LD)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:TemperatureSensor:002\",\"type\":\"TemperatureSensor\",\"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\"temperature\":{\"type\":\"Property\",\"value\":21,\"unitCode\":\"CEL\"}},{\"id\":\"urn:ngsi-ld:TemperatureSensor:003\",\"type\":\"TemperatureSensor\",\"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\"temperature\":{\"type\":\"Property\",\"value\":27,\"unitCode\":\"CEL\"}}]",
        "payloadType": "json",
        "x": 1130,
        "y": 1600,
        "wires": [
            [
                "4a849f7b31e109b1"
            ]
        ]
    },
    {
        "id": "794b151c7fe16b17",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "READ (v2)",
        "info": " - [CRUD Tutorial](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-v2)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-v2)\n",
        "x": 1120,
        "y": 1740,
        "wires": []
    },
    {
        "id": "92b2f3ab75ed7d5d",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "search by",
        "props": [
            {
                "p": "type",
                "v": "TemperatureSensor",
                "vt": "str"
            },
            {
                "p": "attrs",
                "v": "category,temperature",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1120,
        "y": 1840,
        "wires": [
            [
                "5cac01f809315e00"
            ]
        ]
    },
    {
        "id": "68d17d1c5088d1c3",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "sensor",
        "props": [
            {
                "p": "payload.id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "payload.options",
                "v": "keyValues",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1110,
        "y": 1780,
        "wires": [
            [
                "5cac01f809315e00"
            ]
        ]
    },
    {
        "id": "2543235785d9d998",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "sensor",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ {\"id\":\"urn:ngsi-ld:TemperatureSensor:001\"}]",
        "payloadType": "json",
        "x": 1110,
        "y": 2020,
        "wires": [
            [
                "f25c1286e7ca4ade"
            ]
        ]
    },
    {
        "id": "57e61bab03248915",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "POST /v2/op/update",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/op/update",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1560,
        "y": 2080,
        "wires": [
            [
                "87cdd2eb7ffb2c97"
            ]
        ]
    },
    {
        "id": "2d5c4f2a8d54a764",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1435,
        "y": 2080,
        "wires": [
            [
                "57e61bab03248915"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "910e1077c4bcd047",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "import-data (v2)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Store:001\",\"type\":\"Store\"},{\"id\":\"urn:ngsi-ld:Store:002\",\"type\":\"Store\"},{\"id\":\"urn:ngsi-ld:Store:003\",\"type\":\"Store\"},{\"id\":\"urn:ngsi-ld:Store:004\",\"type\":\"Store\"},{\"id\":\"urn:ngsi-ld:Shelf:unit001\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit002\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit003\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit004\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit005\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit006\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit007\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit008\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit009\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit010\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Product:001\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:002\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:003\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:004\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:005\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:006\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:007\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:008\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:009\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:InventoryItem:001\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:002\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:003\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:004\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:005\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:006\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:007\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:008\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:401\",\"type\":\"InventoryItem\"}]",
        "payloadType": "json",
        "x": 1140,
        "y": 2140,
        "wires": [
            [
                "f25c1286e7ca4ade"
            ]
        ]
    },
    {
        "id": "0dd4765e14553f3a",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "entities (v2)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Product:011\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:012\",\"type\":\"Product\"}]",
        "payloadType": "json",
        "x": 1130,
        "y": 2080,
        "wires": [
            [
                "f25c1286e7ca4ade"
            ]
        ]
    },
    {
        "id": "bd1eafb1da7f9f7a",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "all entities",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1120,
        "y": 2200,
        "wires": [
            [
                "b84df4a8fd511fe4"
            ]
        ]
    },
    {
        "id": "1df94fdf54e77ddd",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1435,
        "y": 2200,
        "wires": [
            [
                "fe3be084c73a46aa"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "fe3be084c73a46aa",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /v2/entities?{query}",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion}}}/v2/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1570,
        "y": 2200,
        "wires": [
            [
                "f25c1286e7ca4ade"
            ]
        ]
    },
    {
        "id": "b84df4a8fd511fe4",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "attrs",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"attrs\": \"id\"\n}",
        "output": "json",
        "x": 1330,
        "y": 2200,
        "wires": [
            [
                "1df94fdf54e77ddd"
            ]
        ]
    },
    {
        "id": "a4323a87559d16f7",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 1810,
        "y": 1600,
        "wires": []
    },
    {
        "id": "87cdd2eb7ffb2c97",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 1770,
        "y": 2080,
        "wires": []
    },
    {
        "id": "f25c1286e7ca4ade",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "delete",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"actionType\": \"delete\",\t   \"entities\": payload\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 2080,
        "wires": [
            [
                "2d5c4f2a8d54a764"
            ]
        ]
    },
    {
        "id": "dc99d55dd46d6296",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "DELETE (v2)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-v2)\n",
        "x": 1130,
        "y": 1980,
        "wires": []
    },
    {
        "id": "582ffc2a199b6f7c",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "create entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "payload"
            },
            {
                "p": "link",
                "v": "link",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"id\":\"urn:ngsi-ld:TemperatureSensor:001\",\"type\":\"TemperatureSensor\",\"category\":{\"type\":\"Property\",\"value\":\"Sensor\"},\"temperature\":{\"type\":\"Property\",\"value\":0,\"unitCode\":\"CEL\"}}",
        "payloadType": "json",
        "x": 1130,
        "y": 560,
        "wires": [
            [
                "82841e5c7c1bbc7e",
                "0b6416d19a26618f"
            ]
        ]
    },
    {
        "id": "efc52f58f12faa60",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "PATCH /ngsi-ld/v1/entities/{id}/attrs",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities/{{{id}}}/attrs",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "msg",
                "valueValue": "link"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            }
        ],
        "x": 1420,
        "y": 640,
        "wires": [
            [
                "e46c754dfbab7eb2"
            ]
        ]
    },
    {
        "id": "4adbe7f07793bb3a",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "write attribute",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "payload"
            },
            {
                "p": "method",
                "v": "PATCH",
                "vt": "str"
            },
            {
                "p": "link",
                "v": "link",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t   \"temperature\": {\t       \"value\": $round(200*$random())-50,\t       \"type\": \"Property\"\t      }\t}\t\t",
        "payloadType": "jsonata",
        "x": 1130,
        "y": 640,
        "wires": [
            [
                "efc52f58f12faa60",
                "8912e493d68227b2"
            ]
        ]
    },
    {
        "id": "cd6838fe8a2396ae",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "test create",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.title : \"created at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 1810,
        "y": 560,
        "wires": []
    },
    {
        "id": "e46c754dfbab7eb2",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "test write",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.title : \"updated at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 1800,
        "y": 640,
        "wires": []
    },
    {
        "id": "aafd0ac30dd39bcb",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "read attribute",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "payload"
            },
            {
                "p": "link",
                "v": "link",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"attrs\":\"temperature\",\"options\":\"keyValues\"}",
        "payloadType": "json",
        "x": 1130,
        "y": 720,
        "wires": [
            [
                "6e3029f3d96fbb66"
            ]
        ]
    },
    {
        "id": "6a2b4557f176b0be",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "test get / read",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (payload.title ? payload.title : payload.temperature)",
        "statusType": "jsonata",
        "x": 1820,
        "y": 720,
        "wires": []
    },
    {
        "id": "39abb911c5ab28d3",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "TEST (LD)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-LD)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-LD)\n",
        "x": 1120,
        "y": 520,
        "wires": []
    },
    {
        "id": "a92d8d93d9e80945",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "sensor",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t    \"id\": \"urn:ngsi-ld:TemperatureSensor:001\",\t    \"type\": \"TemperatureSensor\",\t    \"category\": {\t        \"type\": \"Property\",\t        \"value\": \"Sensor\"\t    },\t    \"temperature\": {\t        \"type\": \"Property\",\t        \"value\": $round(200*$random())-50,\t        \"unitCode\": \"CEL\"\t    }\t}",
        "payloadType": "jsonata",
        "x": 1110,
        "y": 1540,
        "wires": [
            [
                "4a849f7b31e109b1"
            ]
        ]
    },
    {
        "id": "0b6416d19a26618f",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "POST /ngsi-ld/v1/entities/",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "msg",
                "valueValue": "link"
            }
        ],
        "x": 1390,
        "y": 560,
        "wires": [
            [
                "cd6838fe8a2396ae"
            ]
        ]
    },
    {
        "id": "eaa5d19e69c6504b",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /ngsi-ld/v1/entities/{id}",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities/{{{id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "msg",
                "valueValue": "link"
            }
        ],
        "x": 1400,
        "y": 800,
        "wires": [
            [
                "6a2b4557f176b0be",
                "f13a2c1dcdf91351"
            ]
        ]
    },
    {
        "id": "7b5856d922937bf4",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "get entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "link",
                "v": "link",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1120,
        "y": 800,
        "wires": [
            [
                "eaa5d19e69c6504b"
            ]
        ]
    },
    {
        "id": "11e1c4e1895d5ac2",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "DELETE /ngsi-ld/v1/entities/{{id}",
        "method": "DELETE",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities/{{{id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1410,
        "y": 880,
        "wires": [
            [
                "56dbc466f6a503a9"
            ]
        ]
    },
    {
        "id": "a00b3dd58a2e11f2",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "delete entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1130,
        "y": 880,
        "wires": [
            [
                "11e1c4e1895d5ac2"
            ]
        ]
    },
    {
        "id": "56dbc466f6a503a9",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "test delete",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.title : \"deleted at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 1810,
        "y": 880,
        "wires": []
    },
    {
        "id": "fe5309292a67c08a",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /ngsi-ld/v1/subscriptions",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1400,
        "y": 1400,
        "wires": [
            [
                "c5036ba707742c0f",
                "7f5def0fe9e1dd4e"
            ]
        ]
    },
    {
        "id": "29afc729b2675c1c",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "list all subs",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1120,
        "y": 1400,
        "wires": [
            [
                "fe5309292a67c08a"
            ]
        ]
    },
    {
        "id": "edf2bebf06500428",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "DELETE /ngsi-ld/v1/subscriptions/{{id}}",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions/{{id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1430,
        "y": 1320,
        "wires": [
            [
                "fe5309292a67c08a",
                "0f847935f2f117ce"
            ]
        ]
    },
    {
        "id": "e680200047210651",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "delete latest sub",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "latest",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1140,
        "y": 1320,
        "wires": [
            [
                "edf2bebf06500428"
            ]
        ]
    },
    {
        "id": "0b539f15543c31ff",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "delete all subs",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1130,
        "y": 1240,
        "wires": [
            [
                "b1c02612fb9105a7"
            ]
        ]
    },
    {
        "id": "b1c02612fb9105a7",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /ngsi-ld/v1/subscriptions",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1400,
        "y": 1240,
        "wires": [
            [
                "a8ea195e2dbb3ffb",
                "b5bced749a0f711c"
            ]
        ]
    },
    {
        "id": "c3260c1544650081",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "get flow.latest",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.id",
        "statusType": "msg",
        "x": 1820,
        "y": 1400,
        "wires": []
    },
    {
        "id": "4d9c271e23c7fc39",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "latest",
                "pt": "flow",
                "to": "payload.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "2ff5ec4c424f2b79",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "move id and remove payload",
        "rules": [
            {
                "t": "move",
                "p": "payload.id",
                "pt": "msg",
                "to": "id",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1860,
        "y": 1240,
        "wires": [
            [
                "edf2bebf06500428"
            ]
        ]
    },
    {
        "id": "94250286d338127b",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "SUBSCRIBE (LD)",
        "info": " - [Subscriptions](https://github.com/FIWARE/tutorials.Subscriptions/tree/NGSI-LD)\n",
        "x": 1150,
        "y": 980,
        "wires": []
    },
    {
        "id": "0f847935f2f117ce",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 1810,
        "y": 1320,
        "wires": []
    },
    {
        "id": "a8ea195e2dbb3ffb",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "split",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 1590,
        "y": 1240,
        "wires": []
    },
    {
        "id": "c5036ba707742c0f",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "split",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 1590,
        "y": 1400,
        "wires": []
    },
    {
        "id": "b5bced749a0f711c",
        "type": "split",
        "z": "79f6047133543b6d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1590,
        "y": 1240,
        "wires": [
            [
                "2ff5ec4c424f2b79"
            ]
        ]
    },
    {
        "id": "7f5def0fe9e1dd4e",
        "type": "split",
        "z": "79f6047133543b6d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1590,
        "y": 1400,
        "wires": [
            [
                "4d9c271e23c7fc39",
                "c3260c1544650081"
            ]
        ]
    },
    {
        "id": "2570e470316bc6af",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "create simple ld sub",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"description\":\"Notify me of all temperature changes\",\"type\":\"Subscription\",\"entities\":[{\"type\":\"TemperatureSensor\"}],\"watchedAttributes\":[\"temperature\"],\"notification\":{\"format\":\"keyValues\",\"endpoint\":{\"uri\":\"https://fiware.zeldalegends.repl.co/temperature-change-ld\",\"accept\":\"application/json\"}},\"@context\":\"https://fiware.zeldalegends.repl.co/data-models/ngsi-context.jsonld\"}",
        "payloadType": "json",
        "x": 1150,
        "y": 1060,
        "wires": [
            [
                "6a4eb84d4ec86a0f"
            ]
        ]
    },
    {
        "id": "6a4eb84d4ec86a0f",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "POST /ngsi-ld/v1/subscriptions",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/ld+json"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1410,
        "y": 1000,
        "wires": [
            [
                "0af4261d6c0d0ad2"
            ]
        ]
    },
    {
        "id": "0af4261d6c0d0ad2",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & $replace(headers.location, \"/ngsi-ld/v1/subscriptions/\", \"\")",
        "statusType": "jsonata",
        "x": 1810,
        "y": 1000,
        "wires": []
    },
    {
        "id": "af4d685013db909e",
        "type": "http in",
        "z": "79f6047133543b6d",
        "name": "",
        "url": "/temperature-change-ld",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 1420,
        "y": 1060,
        "wires": [
            [
                "d506e4d28761906f",
                "02bb229c88930d92"
            ]
        ]
    },
    {
        "id": "d506e4d28761906f",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "/temperature-change-ld",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature",
        "statusType": "msg",
        "x": 1850,
        "y": 1060,
        "wires": []
    },
    {
        "id": "82841e5c7c1bbc7e",
        "type": "NGSI-v2ToLD",
        "z": "79f6047133543b6d",
        "name": "",
        "x": 1360,
        "y": 500,
        "wires": [
            [
                "a74f73a91be0ecec"
            ]
        ]
    },
    {
        "id": "8ddc43c9ae1ca74b",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "test entity",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1800,
        "y": 500,
        "wires": []
    },
    {
        "id": "a74f73a91be0ecec",
        "type": "json",
        "z": "79f6047133543b6d",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1570,
        "y": 500,
        "wires": [
            [
                "8ddc43c9ae1ca74b"
            ]
        ]
    },
    {
        "id": "0befd19cba6761b7",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "create ld sub with query",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"description\":\"Notify me of all 'anomalous' temperatures (LD version)\",\"type\":\"Subscription\",\"entities\":[{\"type\":\"TemperatureSensor\"}],\"watchedAttributes\":[\"temperature\"],\"q\":\"temperature>75\",\"notification\":{\"attributes\":[\"temperature\"],\"format\":\"keyValues\",\"endpoint\":{\"uri\":\"https://fiware.zeldalegends.repl.co/test-simple-ads-ld\",\"accept\":\"application/json\"}},\"@context\":\"https://fiware.zeldalegends.repl.co/data-models/ngsi-context.jsonld\"}",
        "payloadType": "json",
        "x": 1160,
        "y": 1120,
        "wires": [
            [
                "6a4eb84d4ec86a0f"
            ]
        ]
    },
    {
        "id": "8912e493d68227b2",
        "type": "delay",
        "z": "79f6047133543b6d",
        "name": "",
        "pauseType": "delay",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1235,
        "y": 680,
        "wires": [
            [
                "6e3029f3d96fbb66"
            ]
        ],
        "l": false
    },
    {
        "id": "6e3029f3d96fbb66",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"attrs\":\"temperature\",\"options\":\"keyValues\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 720,
        "wires": [
            [
                "eaa5d19e69c6504b"
            ]
        ]
    },
    {
        "id": "96bffb65574701e1",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "POST /ngsi-ld/v1/entityOperations/upsert",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entityOperations/upsert",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/ld+json"
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "msg",
                "valueValue": "link"
            }
        ],
        "x": 1560,
        "y": 1600,
        "wires": [
            [
                "a4323a87559d16f7"
            ]
        ]
    },
    {
        "id": "f13a2c1dcdf91351",
        "type": "debug",
        "z": "79f6047133543b6d",
        "d": true,
        "name": "test get",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (payload.title? payload.title : payload.id)",
        "statusType": "jsonata",
        "x": 1800,
        "y": 800,
        "wires": []
    },
    {
        "id": "aefe1c2eeeebfab8",
        "type": "comment",
        "z": "79f6047133543b6d",
        "name": "LD >>>",
        "info": "",
        "x": 950,
        "y": 520,
        "wires": []
    },
    {
        "id": "322e1ae983c694e7",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "import-data (LD)",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Building:farm001\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Großer Stern 1\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3505,52.5144]}},\"name\":{\"type\":\"Property\",\"value\":\"Victory Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:barn002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"barn\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Straße des 17. Juni\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3698,52.5163]}},\"name\":{\"type\":\"Property\",\"value\":\"Big Red Barn\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:tower003\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"water_tower\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"John-Foster-Dulles-Allee\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3598,52.5165]}},\"name\":{\"type\":\"Property\",\"value\":\"Triton Tower\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:farm002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Hardenbergplatz 8\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10787\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3127,52.4893]}},\"name\":{\"type\":\"Property\",\"value\":\"Animal Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person002\"}},{\"id\":\"urn:ngsi-ld:Person:person001\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Old MacDonald\"}},{\"id\":\"urn:ngsi-ld:Person:person002\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Napoleon the Pig\"}}]",
        "payloadType": "json",
        "x": 1140,
        "y": 1660,
        "wires": [
            [
                "4a849f7b31e109b1"
            ]
        ]
    },
    {
        "id": "4a849f7b31e109b1",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "LD",
        "rules": [
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "link",
                "pt": "msg",
                "to": "link",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 1600,
        "wires": [
            [
                "96bffb65574701e1"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png"
    },
    {
        "id": "5f2f234810bbce75",
        "type": "template",
        "z": "79f6047133543b6d",
        "name": "payload",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"type\": \"Person\",\n    \"options\": \"keyValues\"\n}\n",
        "output": "json",
        "x": 1460,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "b0498c7eaf1812bd",
        "type": "http request",
        "z": "79f6047133543b6d",
        "name": "GET /ngsi-ld/v1/entities",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "other",
                "valueValue": "<https://fiware.github.io/tutorials.Step-by-Step/tutorials-context.jsonld>; rel=\"http://www.w3.org/ns/json-ld#context\"; type=\"application/ld+json\""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1510,
        "y": 1840,
        "wires": [
            [
                "7ad7d076d3781b4b"
            ]
        ]
    },
    {
        "id": "5cac01f809315e00",
        "type": "change",
        "z": "79f6047133543b6d",
        "name": "LD",
        "rules": [
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "link",
                "pt": "msg",
                "to": "link",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 1840,
        "wires": [
            [
                "b0498c7eaf1812bd"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png"
    },
    {
        "id": "2062c02cfa9462c6",
        "type": "http in",
        "z": "79f6047133543b6d",
        "name": "",
        "url": "/test-simple-ads-ld",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 1430,
        "y": 1120,
        "wires": [
            [
                "02bb229c88930d92",
                "530b6e8e3ca66b86"
            ]
        ]
    },
    {
        "id": "02bb229c88930d92",
        "type": "http response",
        "z": "79f6047133543b6d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1790,
        "y": 1120,
        "wires": []
    },
    {
        "id": "530b6e8e3ca66b86",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "/test-simple-ads-ld",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature",
        "statusType": "msg",
        "x": 1830,
        "y": 1180,
        "wires": []
    },
    {
        "id": "8b0309170b6cedfa",
        "type": "inject",
        "z": "79f6047133543b6d",
        "name": "create scoped sub",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"description\":\"Notify me of all anomalous temperatures\",\"subject\":{\"entities\":[{\"idPattern\":\".*\",\"type\":\"TemperatureSensor\"}],\"condition\":{\"attrs\":[\"temperature\"],\"expression\":{\"q\":\"temperature>75\"}}},\"notification\":{\"http\":{\"url\":\"https://fiware.zeldalegends.repl.co/test-simple-ads\"}}}",
        "payloadType": "json",
        "x": 170,
        "y": 1120,
        "wires": [
            [
                "a80527f86421c105"
            ]
        ]
    },
    {
        "id": "9b23651cd75fc9e6",
        "type": "http in",
        "z": "79f6047133543b6d",
        "name": "",
        "url": "/test-simple-ads",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 420,
        "y": 1120,
        "wires": [
            [
                "0aa6d370f93465c6",
                "45fc4153e45b673f"
            ]
        ]
    },
    {
        "id": "0aa6d370f93465c6",
        "type": "http response",
        "z": "79f6047133543b6d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 1120,
        "wires": []
    },
    {
        "id": "45fc4153e45b673f",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "/test-simple-ads",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature",
        "statusType": "msg",
        "x": 800,
        "y": 1180,
        "wires": []
    },
    {
        "id": "ed1cef7b6b82a1cd",
        "type": "debug",
        "z": "79f6047133543b6d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & $replace(headers.location, \"/v2/subscriptions/\", \"\")",
        "statusType": "jsonata",
        "x": 790,
        "y": 1000,
        "wires": []
    },
    {
        "id": "f279627921458d5f",
        "type": "debug",
        "z": "ba9285a6.957868",
        "name": "GitHub vars",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 120,
        "wires": []
    },
    {
        "id": "bdd706d8fb85efbd",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "set flow.Github",
        "rules": [
            {
                "t": "set",
                "p": "Github.bearer",
                "pt": "flow",
                "to": "$contains($lowercase(token), \"bearer \") ? token : (\"bearer \" & token)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "Github.owner",
                "pt": "flow",
                "to": "username",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "Github.repo",
                "pt": "flow",
                "to": "repository",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 120,
        "wires": [
            [
                "f279627921458d5f"
            ]
        ]
    },
    {
        "id": "172d6356ab04a229",
        "type": "http request",
        "z": "ba9285a6.957868",
        "name": "PUT github",
        "method": "PUT",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "https://api.github.com/repos/{{owner}}/{{repo}}/contents/node-red/data/{{{file}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 870,
        "y": 460,
        "wires": [
            [
                "0c7340d2a44049f7"
            ]
        ]
    },
    {
        "id": "3e5ce0e41afcd72f",
        "type": "http request",
        "z": "ba9285a6.957868",
        "name": "GET github",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "https://api.github.com/repos/{{owner}}/{{repo}}/contents/node-red/data/{{{file}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 870,
        "y": 220,
        "wires": [
            [
                "e866bd89f8560646"
            ]
        ]
    },
    {
        "id": "64523d55e5caf6a2",
        "type": "file in",
        "z": "ba9285a6.957868",
        "name": "",
        "filename": "",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 660,
        "y": 380,
        "wires": [
            [
                "48decdeb736e977e"
            ]
        ]
    },
    {
        "id": "749b59e6136e3253",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "sha",
                "pt": "msg",
                "to": "payload.sha",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 300,
        "wires": [
            [
                "64523d55e5caf6a2"
            ]
        ]
    },
    {
        "id": "48decdeb736e977e",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "set msg.payload",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"content\": $base64encode(payload)}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "Saved from Node-RED editor",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "sha",
                "pt": "msg",
                "to": "payload.sha",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 380,
        "wires": [
            [
                "69472f5dbcdf5382"
            ]
        ]
    },
    {
        "id": "e866bd89f8560646",
        "type": "delay",
        "z": "ba9285a6.957868",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 670,
        "y": 300,
        "wires": [
            [
                "749b59e6136e3253"
            ]
        ]
    },
    {
        "id": "69472f5dbcdf5382",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "set msg.headers",
        "rules": [
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{\"User-Agent\":\"Node-RED\"}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "headers.Authorization",
                "pt": "msg",
                "to": "bearer",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 460,
        "wires": [
            [
                "172d6356ab04a229"
            ]
        ]
    },
    {
        "id": "acda9dd01f83bbe0",
        "type": "debug",
        "z": "ba9285a6.957868",
        "name": "commit statusCode",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 850,
        "y": 540,
        "wires": []
    },
    {
        "id": "43dcd85b58dfee39",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "set msg.headers",
        "rules": [
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{\"User-Agent\":\"Node-RED\"}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "headers.Authorization",
                "pt": "msg",
                "to": "bearer",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 220,
        "wires": [
            [
                "3e5ce0e41afcd72f"
            ]
        ]
    },
    {
        "id": "eaf63b0745580f85",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "get flow.Github",
        "rules": [
            {
                "t": "set",
                "p": "bearer",
                "pt": "msg",
                "to": "Github.bearer",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "owner",
                "pt": "msg",
                "to": "Github.owner",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "repo",
                "pt": "msg",
                "to": "Github.repo",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 160,
        "wires": [
            [
                "43dcd85b58dfee39"
            ]
        ]
    },
    {
        "id": "0c7340d2a44049f7",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "filename",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 540,
        "wires": [
            [
                "acda9dd01f83bbe0"
            ]
        ]
    },
    {
        "id": "3118e4be366f0844",
        "type": "comment",
        "z": "ba9285a6.957868",
        "name": "Github token",
        "info": "Repository:\nhttps://github.com/${GITHUB_USERNAME}/${GITHUB_REPOSITORY}\n\nToken:\nhttps://github.com/settings/tokens\n",
        "x": 890,
        "y": 40,
        "wires": []
    },
    {
        "id": "581edb20c9a627e2",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "set file paths",
        "rules": [
            {
                "t": "set",
                "p": "file",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "\"/data/\" & file",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 220,
        "wires": [
            [
                "eaf63b0745580f85"
            ]
        ]
    },
    {
        "id": "7c55382072ac5ecd",
        "type": "inject",
        "z": "ba9285a6.957868",
        "name": "flows_cred.json",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "flows_cred.json",
        "payloadType": "str",
        "x": 140,
        "y": 220,
        "wires": [
            [
                "581edb20c9a627e2"
            ]
        ]
    },
    {
        "id": "6efcdb36f7b67ad3",
        "type": "inject",
        "z": "ba9285a6.957868",
        "name": "flows.json",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "flows.json",
        "payloadType": "str",
        "x": 120,
        "y": 180,
        "wires": [
            [
                "581edb20c9a627e2"
            ]
        ]
    },
    {
        "id": "30b8aaf6d52456ce",
        "type": "inject",
        "z": "ba9285a6.957868",
        "g": "416fb17dde932093",
        "name": "GitHub",
        "props": [
            {
                "p": "token",
                "v": "GITHUB_TOKEN",
                "vt": "env"
            },
            {
                "p": "username",
                "v": "hybuild-project",
                "vt": "str"
            },
            {
                "p": "repository",
                "v": "PEP-Proxy-NGSI-LD",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 440,
        "y": 60,
        "wires": [
            [
                "bdd706d8fb85efbd"
            ]
        ]
    },
    {
        "id": "f3b82308cbd26c4e",
        "type": "inject",
        "z": "ba9285a6.957868",
        "name": "settings.js",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "settings.js",
        "payloadType": "str",
        "x": 120,
        "y": 140,
        "wires": [
            [
                "581edb20c9a627e2"
            ]
        ]
    },
    {
        "id": "826cd1312e95863f",
        "type": "inject",
        "z": "ba9285a6.957868",
        "name": "package.json",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "package.json",
        "payloadType": "str",
        "x": 130,
        "y": 100,
        "wires": [
            [
                "581edb20c9a627e2"
            ]
        ]
    },
    {
        "id": "9ee5ee3ce991d462",
        "type": "inject",
        "z": "ba9285a6.957868",
        "name": ".config.users.json",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": ".config.users.json",
        "payloadType": "str",
        "x": 140,
        "y": 60,
        "wires": [
            [
                "581edb20c9a627e2"
            ]
        ]
    },
    {
        "id": "7ccf9a969511e69c",
        "type": "ui_template",
        "z": "e52631fa86fdd3be",
        "group": "428fc8e6d916cf55",
        "name": "Orion",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<h4>\n    <img height=\"36\" src=\"https://account.thethingsnetwork.org/api/v2/users/atdfiware/picture.jpg\" />\n    Orion LD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n    <a href=\"https://zeldalegend-tutorialspe-xvippvejf0x.ws-eu54.gitpod.io/\"><input type=\"image\" height=\"36\" src=\"https://gitpod.io/button/open-in-gitpod.svg\" alt=\"Open in Gitpod\"/></a>\n</h4>\n<textarea style=\"font-size:14px;\" rows=\"9\">{{msg.payload}}</textarea>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 570,
        "y": 180,
        "wires": [
            [
                "584dab5ddb454164"
            ]
        ]
    },
    {
        "id": "584dab5ddb454164",
        "type": "NGSI-Update",
        "z": "e52631fa86fdd3be",
        "name": "",
        "endpoint": "ab8a838eb23942ff",
        "protocol": "LD",
        "updateMode": "upsert-replace",
        "updateModev2": "append",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "mimeType": "application/ld+json",
        "x": 710,
        "y": 180,
        "wires": [
            [
                "0291d8caca30be5c"
            ]
        ]
    },
    {
        "id": "0291d8caca30be5c",
        "type": "debug",
        "z": "e52631fa86fdd3be",
        "name": "fiware",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "topic",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "msg",
        "x": 850,
        "y": 180,
        "wires": []
    },
    {
        "id": "11ea9bf44451a42e",
        "type": "contract-call",
        "z": "e52631fa86fdd3be",
        "name": "notarize",
        "smartContract": "511b16494c95c3e9",
        "contractFunction": "notarize",
        "senderAccount": "a46f63f7bc8183e7",
        "readonlyFunction": false,
        "weiTransfer": "",
        "onlyEstimateGas": false,
        "useEstimatedGasLimit": true,
        "gasLimit": "46591",
        "usePreviousBlocksGasPrice": true,
        "gasPrice": "46591",
        "fetchFullTransaction": false,
        "x": 460,
        "y": 420,
        "wires": [
            [
                "5ead606b11285a79"
            ],
            [
                "482a8db682da28f7"
            ]
        ]
    },
    {
        "id": "5c1c64259f8f1c39",
        "type": "debug",
        "z": "e52631fa86fdd3be",
        "name": "txn",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "summary.txHash",
        "statusType": "msg",
        "x": 850,
        "y": 380,
        "wires": []
    },
    {
        "id": "3de5615b1a791c3a",
        "type": "debug",
        "z": "e52631fa86fdd3be",
        "name": "block",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.blockHash",
        "statusType": "msg",
        "x": 850,
        "y": 460,
        "wires": []
    },
    {
        "id": "482a8db682da28f7",
        "type": "ui_template",
        "z": "e52631fa86fdd3be",
        "group": "3887268fb207a290",
        "name": "Goerli testnet",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<h4>\n    <img height=\"36\" src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Ethereum-icon-purple.svg/240px-Ethereum-icon-purple.svg.png\" />\n    Goerli testnet&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n    <a href=\"https://goerli.etherscan.io/tx/{{msg.summary.txHash}}\"><input type=\"image\" height=\"24\" src=\"https://etherscan.io/assets/svg/logos/logo-etherscan.svg\" alt=\"Open in Etherscan.io\"/></a>\n</h4>\n<textarea style=\"font-size:14px;\" rows=\"9\">{{msg.payload}}</textarea>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 710,
        "y": 460,
        "wires": [
            [
                "3de5615b1a791c3a"
            ]
        ]
    },
    {
        "id": "0bcb97d5538ee2d6",
        "type": "http in",
        "z": "e52631fa86fdd3be",
        "name": "",
        "url": "/test",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 280,
        "y": 400,
        "wires": [
            [
                "e7bf9d80e073467c",
                "11ea9bf44451a42e"
            ]
        ]
    },
    {
        "id": "e7bf9d80e073467c",
        "type": "json",
        "z": "e52631fa86fdd3be",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 270,
        "y": 480,
        "wires": [
            [
                "84325e852cd91bbc"
            ]
        ]
    },
    {
        "id": "84325e852cd91bbc",
        "type": "debug",
        "z": "e52631fa86fdd3be",
        "name": "notification",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].id",
        "statusType": "msg",
        "x": 470,
        "y": 480,
        "wires": []
    },
    {
        "id": "486b4d67c15beb04",
        "type": "inject",
        "z": "e52631fa86fdd3be",
        "name": "INIT",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 240,
        "wires": [
            [
                "d33f2b0d0b84571a",
                "7ae59962402411eb"
            ]
        ]
    },
    {
        "id": "df45ac331f0e9ca1",
        "type": "ui_button",
        "z": "e52631fa86fdd3be",
        "name": "",
        "group": "428fc8e6d916cf55",
        "order": 2,
        "width": "3",
        "height": 1,
        "passthru": true,
        "label": "Subscribe",
        "tooltip": "Send to BC via CB subscription",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "create",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 280,
        "y": 300,
        "wires": [
            [
                "1c23b90bebe39753"
            ]
        ]
    },
    {
        "id": "d33f2b0d0b84571a",
        "type": "ui_button",
        "z": "e52631fa86fdd3be",
        "name": "",
        "group": "428fc8e6d916cf55",
        "order": 3,
        "width": "3",
        "height": 1,
        "passthru": true,
        "label": "Unsubscribe",
        "tooltip": "Clear all CB subscriptions",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "first",
        "topicType": "flow",
        "x": 290,
        "y": 260,
        "wires": [
            [
                "d506d76d626f95cc"
            ]
        ]
    },
    {
        "id": "1070881307c41888",
        "type": "comment",
        "z": "e52631fa86fdd3be",
        "name": "FE Universe - FIWARE Notarization",
        "info": "Il programma scrive sul Context Broker\nOrion LD i risultati dei test immessi.\n\nAl riavvio è programmato per annullare\ntutte le sottoscrizioni al Context Broker,\ne mantenerne solo quella al servizio\ndi notarizzazione su Blockchain. \n\nPer imostazione predefinita, notarizza\nsu Blockchain Ethereum (testnet Goerli)\nsolo gli Acceptance Test con un codice\nrisultato pari a 100 o 200.\n\nInserire la URL del Context Broker Orion\nnel flow \"FIWARE\", e a URL di Node-RED\nattualmente sul browser nella scheda\nNotification dei nodi Subscribe.",
        "x": 780,
        "y": 40,
        "wires": []
    },
    {
        "id": "4be507e3bcd99258",
        "type": "ui_text_input",
        "z": "e52631fa86fdd3be",
        "name": "",
        "label": "Test reference",
        "tooltip": "",
        "group": "47bd647b0bf55722",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 300,
        "y": 80,
        "wires": [
            [
                "9ea7a811833baabf"
            ]
        ]
    },
    {
        "id": "b4b540e2423f722e",
        "type": "ui_button",
        "z": "e52631fa86fdd3be",
        "name": "",
        "group": "47bd647b0bf55722",
        "order": 5,
        "width": "0",
        "height": "0",
        "passthru": true,
        "label": "Submit",
        "tooltip": "Send to the CB",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "send",
        "payload": "",
        "payloadType": "date",
        "topic": "test",
        "topicType": "flow",
        "x": 280,
        "y": 180,
        "wires": [
            [
                "f6b2109d74b0c7a2"
            ]
        ]
    },
    {
        "id": "9ea7a811833baabf",
        "type": "change",
        "z": "e52631fa86fdd3be",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "test.reference",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "b6623e02d1286557",
        "type": "change",
        "z": "e52631fa86fdd3be",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "test.result",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "9f860956e48e981d",
        "type": "change",
        "z": "e52631fa86fdd3be",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "test.level",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "afad20550f2620e2",
        "type": "ui_dropdown",
        "z": "e52631fa86fdd3be",
        "name": "",
        "label": "Test level",
        "tooltip": "",
        "place": "Select option",
        "group": "47bd647b0bf55722",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "Unit",
                "value": "Unit",
                "type": "str"
            },
            {
                "label": "Integration",
                "value": "Integration",
                "type": "str"
            },
            {
                "label": "System",
                "value": "System",
                "type": "str"
            },
            {
                "label": "Acceptance",
                "value": "Acceptance",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 280,
        "y": 120,
        "wires": [
            [
                "9f860956e48e981d"
            ]
        ]
    },
    {
        "id": "f6b2109d74b0c7a2",
        "type": "template",
        "z": "e52631fa86fdd3be",
        "name": "NGSI",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"@context\": [\n        \"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\n        \"https://schema.lab.fiware.org/ld/context\"\n    ],\n    \"id\": \"urn:entities:{{topic.reference}}\",\n    \"type\": \"Test\",\n    \"level\": {\n        \"type\": \"Property\",\n        \"value\": \"{{topic.level}}\"\n    },\n    \"reference\": {\n        \"type\": \"Property\",\n        \"value\": \"{{topic.reference}}\"\n    },\n    \"result\": {\n        \"type\": \"Property\",\n        \"value\": {{topic.result}}\n    },\n    \"timestamp\": {\n        \"type\": \"Property\",\n        \"value\": {{payload}}\n    }\n}",
        "output": "json",
        "x": 450,
        "y": 180,
        "wires": [
            [
                "7ccf9a969511e69c"
            ]
        ]
    },
    {
        "id": "33840cdc7d617c9f",
        "type": "inject",
        "z": "e52631fa86fdd3be",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Acceptance",
        "payloadType": "str",
        "x": 130,
        "y": 120,
        "wires": [
            [
                "afad20550f2620e2"
            ]
        ]
    },
    {
        "id": "0b0324e0b7872387",
        "type": "inject",
        "z": "e52631fa86fdd3be",
        "name": "random",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "\"IT\" & $round($random()*1000)",
        "payloadType": "jsonata",
        "x": 120,
        "y": 80,
        "wires": [
            [
                "4be507e3bcd99258"
            ]
        ]
    },
    {
        "id": "c811fa769fa1a033",
        "type": "inject",
        "z": "e52631fa86fdd3be",
        "name": "manual",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 180,
        "wires": [
            [
                "b4b540e2423f722e"
            ]
        ]
    },
    {
        "id": "168ffbbee04893ca",
        "type": "inject",
        "z": "e52631fa86fdd3be",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "200",
        "payloadType": "num",
        "x": 110,
        "y": 40,
        "wires": [
            [
                "7db8b7789c495caf"
            ]
        ]
    },
    {
        "id": "7db8b7789c495caf",
        "type": "ui_numeric",
        "z": "e52631fa86fdd3be",
        "name": "",
        "label": "Test result",
        "tooltip": "",
        "group": "47bd647b0bf55722",
        "order": 4,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "time",
        "topicType": "msg",
        "format": "{{value}}",
        "min": "100",
        "max": "500",
        "step": "100",
        "className": "",
        "x": 290,
        "y": 40,
        "wires": [
            [
                "b6623e02d1286557"
            ]
        ]
    },
    {
        "id": "42cd9ca6be76b1ea",
        "type": "http request",
        "z": "e52631fa86fdd3be",
        "name": "GET",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 610,
        "y": 260,
        "wires": [
            [
                "c43bdd592e35febe"
            ]
        ]
    },
    {
        "id": "c43bdd592e35febe",
        "type": "split",
        "z": "e52631fa86fdd3be",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 730,
        "y": 260,
        "wires": [
            [
                "f129b77e85428011"
            ]
        ]
    },
    {
        "id": "f129b77e85428011",
        "type": "http request",
        "z": "e52631fa86fdd3be",
        "name": "DELETE",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/{{payload.id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 860,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "d506d76d626f95cc",
        "type": "change",
        "z": "e52631fa86fdd3be",
        "name": "get ORION",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "ORION",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 260,
        "wires": [
            [
                "42cd9ca6be76b1ea"
            ]
        ]
    },
    {
        "id": "bb1dfa6b940b2d51",
        "type": "debug",
        "z": "e52631fa86fdd3be",
        "name": "subscription",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.statusCode",
        "statusType": "msg",
        "x": 470,
        "y": 360,
        "wires": []
    },
    {
        "id": "7ae59962402411eb",
        "type": "delay",
        "z": "e52631fa86fdd3be",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 120,
        "y": 300,
        "wires": [
            [
                "df45ac331f0e9ca1"
            ]
        ]
    },
    {
        "id": "2aa71acb46800323",
        "type": "NGSI-Dataset",
        "z": "e52631fa86fdd3be",
        "name": "",
        "endpoint": "ab8a838eb23942ff",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "Test",
        "attrs": "",
        "q": "",
        "mode": "keyValues",
        "x": 450,
        "y": 560,
        "wires": [
            [
                "466246a303951743"
            ]
        ]
    },
    {
        "id": "36ce0b88ca622e3f",
        "type": "inject",
        "z": "e52631fa86fdd3be",
        "name": "get all entities",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 290,
        "y": 560,
        "wires": [
            [
                "2aa71acb46800323"
            ]
        ]
    },
    {
        "id": "466246a303951743",
        "type": "json",
        "z": "e52631fa86fdd3be",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 570,
        "y": 560,
        "wires": [
            [
                "559b6dfa1edda109"
            ]
        ]
    },
    {
        "id": "559b6dfa1edda109",
        "type": "debug",
        "z": "e52631fa86fdd3be",
        "name": "entities",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 700,
        "y": 560,
        "wires": []
    },
    {
        "id": "8f31643a8f64dea8",
        "type": "comment",
        "z": "e52631fa86fdd3be",
        "name": "set notification endpoint",
        "info": "",
        "x": 140,
        "y": 380,
        "wires": []
    },
    {
        "id": "5ead606b11285a79",
        "type": "template",
        "z": "e52631fa86fdd3be",
        "name": "link",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "TXN in progress...\n\nHash: {{payload}}\nLink: https://goerli.etherscan.io/tx/{{payload}}",
        "output": "str",
        "x": 690,
        "y": 380,
        "wires": [
            [
                "5c1c64259f8f1c39",
                "482a8db682da28f7"
            ]
        ]
    },
    {
        "id": "1c23b90bebe39753",
        "type": "NGSI-Subscription",
        "z": "e52631fa86fdd3be",
        "name": "",
        "endpoint": "ab8a838eb23942ff",
        "protocol": "LD",
        "ldContext": "https://schema.lab.fiware.org/ld/context",
        "entityType": "Test",
        "watchedAttributes": "",
        "q": "level==Acceptance;result<300",
        "notificationMode": "normalized",
        "notificationEndpoint": "http://host.docker.internal:1880/test",
        "notificationAttributes": "",
        "mimeType": "application/ld+json",
        "x": 270,
        "y": 360,
        "wires": [
            [
                "bb1dfa6b940b2d51"
            ]
        ]
    },
    {
        "id": "b00b7392cc25aa7c",
        "type": "ui_template",
        "z": "e52631fa86fdd3be",
        "group": "47bd647b0bf55722",
        "name": "Banner",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<div style=\"background-image:url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwMkp29oQjL16Cwdq8l3BOaMDBJTNXSeWdvA&usqp=CAU');text-align:center;font-size:40px;color:white;\">\n    <b>FE Universe</b>\n</div>\n<h4>(C) Alerox, 2022</h4>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 860,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "74f5d320bb16d23a",
        "type": "NGSI-Entity",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "endpoint": "ab8a838eb23942ff",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "mode": "normalized",
        "mimeType": "application/ld+json",
        "attrs": "",
        "x": 390,
        "y": 200,
        "wires": [
            [
                "31376fe3e25d2bc6"
            ]
        ]
    },
    {
        "id": "c2246c8a79185ff6",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "urn:entities:E1",
        "payloadType": "str",
        "x": 130,
        "y": 160,
        "wires": [
            [
                "74f5d320bb16d23a"
            ]
        ]
    },
    {
        "id": "532151c821513cdf",
        "type": "NGSI-Update",
        "z": "44b7dbcf27bd28ae",
        "g": "ed8605f54d7c9002",
        "name": "",
        "endpoint": "ab8a838eb23942ff",
        "protocol": "LD",
        "updateMode": "upsert-update",
        "updateModev2": "append",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "mimeType": "application/ld+json",
        "x": 390,
        "y": 120,
        "wires": [
            [
                "bcd0872ae9ab8726"
            ]
        ]
    },
    {
        "id": "af7754c6ef0cb3bd",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "name": "set E1.p1 = 12",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\"id\":\"urn:entities:E1\",\"type\":\"T\",\"p1\":{\"type\":\"Property\",\"value\":12}}",
        "payloadType": "json",
        "x": 140,
        "y": 40,
        "wires": [
            [
                "532151c821513cdf"
            ]
        ]
    },
    {
        "id": "3d031fec57346466",
        "type": "http in",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "url": "/T",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 260,
        "y": 380,
        "wires": [
            [
                "ed8ddc1ca1d3f908",
                "1424e1d3206be1fa"
            ]
        ]
    },
    {
        "id": "ed8ddc1ca1d3f908",
        "type": "json",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 570,
        "y": 340,
        "wires": [
            [
                "2399d51b93b718dd"
            ]
        ]
    },
    {
        "id": "f9a5ea12b9dc11bd",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "name": "subscribe",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 120,
        "y": 300,
        "wires": [
            [
                "44d52fa4fb700894"
            ]
        ]
    },
    {
        "id": "bcd0872ae9ab8726",
        "type": "debug",
        "z": "44b7dbcf27bd28ae",
        "name": "status",
        "active": true,
        "tosidebar": false,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 570,
        "y": 120,
        "wires": []
    },
    {
        "id": "bd16f9d6d3bfa851",
        "type": "debug",
        "z": "44b7dbcf27bd28ae",
        "name": "p1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.p1.value",
        "statusType": "msg",
        "x": 710,
        "y": 200,
        "wires": []
    },
    {
        "id": "31376fe3e25d2bc6",
        "type": "json",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 570,
        "y": 200,
        "wires": [
            [
                "bd16f9d6d3bfa851"
            ]
        ]
    },
    {
        "id": "25a41fb7f7e1696c",
        "type": "http request",
        "z": "44b7dbcf27bd28ae",
        "name": "GET",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 570,
        "y": 440,
        "wires": [
            [
                "10ea0cd83767b230",
                "9e0ec30507d13f51"
            ]
        ]
    },
    {
        "id": "55e872f5abef25f6",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "name": "list subscriptions",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 440,
        "wires": [
            [
                "1bc5cc56d389f0e3"
            ]
        ]
    },
    {
        "id": "10ea0cd83767b230",
        "type": "split",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 710,
        "y": 440,
        "wires": [
            [
                "5f17343eb183f473",
                "94cf5e0e57bf36e6"
            ]
        ]
    },
    {
        "id": "aab58a90e0095ee0",
        "type": "http request",
        "z": "44b7dbcf27bd28ae",
        "name": "DELETE",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/{{topic}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 580,
        "y": 500,
        "wires": [
            [
                "25a41fb7f7e1696c"
            ]
        ]
    },
    {
        "id": "66b4cda77999764c",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "name": "delete latest subscription",
        "props": [
            {
                "p": "topic",
                "v": "latest",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 170,
        "y": 500,
        "wires": [
            [
                "07d06f24ec64bf87"
            ]
        ]
    },
    {
        "id": "56fda1005f19bbab",
        "type": "debug",
        "z": "44b7dbcf27bd28ae",
        "name": "subscribe",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload.subscriptionId",
        "targetType": "msg",
        "statusVal": "payload.statusCode",
        "statusType": "msg",
        "x": 380,
        "y": 300,
        "wires": []
    },
    {
        "id": "2399d51b93b718dd",
        "type": "debug",
        "z": "44b7dbcf27bd28ae",
        "name": "notify",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].p1.value",
        "statusType": "msg",
        "x": 710,
        "y": 340,
        "wires": []
    },
    {
        "id": "5f17343eb183f473",
        "type": "debug",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.id",
        "statusType": "msg",
        "x": 870,
        "y": 440,
        "wires": []
    },
    {
        "id": "eb3433f71d26e019",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "urn:entities:E2",
        "payloadType": "str",
        "x": 130,
        "y": 180,
        "wires": [
            [
                "74f5d320bb16d23a"
            ]
        ]
    },
    {
        "id": "2e7a44351a016968",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "urn:entities:E3",
        "payloadType": "str",
        "x": 130,
        "y": 200,
        "wires": [
            [
                "74f5d320bb16d23a"
            ]
        ]
    },
    {
        "id": "32069561c52cb26e",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "g": "ed8605f54d7c9002",
        "name": "Orion LD",
        "props": [
            {
                "p": "orion",
                "v": "http://host.docker.internal:1028",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 400,
        "y": 60,
        "wires": [
            [
                "38e5006502348258"
            ]
        ]
    },
    {
        "id": "38e5006502348258",
        "type": "change",
        "z": "44b7dbcf27bd28ae",
        "name": "set ORION",
        "rules": [
            {
                "t": "set",
                "p": "ORION",
                "pt": "global",
                "to": "orion",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 60,
        "wires": [
            [
                "9281f5c77f0b3098"
            ]
        ]
    },
    {
        "id": "7852cad12634a479",
        "type": "debug",
        "z": "44b7dbcf27bd28ae",
        "name": "version",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload[\"orionld version\"]",
        "statusType": "msg",
        "x": 880,
        "y": 60,
        "wires": []
    },
    {
        "id": "9281f5c77f0b3098",
        "type": "http request",
        "z": "44b7dbcf27bd28ae",
        "name": "GET",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/version/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 730,
        "y": 60,
        "wires": [
            [
                "7852cad12634a479"
            ]
        ]
    },
    {
        "id": "a6381005a99dbbe9",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "name": "set E1.p1 = random",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t   \"@context\": \"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\t   \"id\":\"urn:entities:E1\",\t   \"type\":\"T\",\t   \"p1\":{\t       \"type\":\"Property\",\t       \"value\":$round($random()*100)\t   }\t}",
        "payloadType": "jsonata",
        "x": 150,
        "y": 60,
        "wires": [
            [
                "532151c821513cdf"
            ]
        ]
    },
    {
        "id": "04514f7ba4fdde82",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "name": "set E2.p2 = 24",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\"id\":\"urn:entities:E2\",\"type\":\"T\",\"p2\":{\"type\":\"Property\",\"value\":24}}",
        "payloadType": "json",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "532151c821513cdf"
            ]
        ]
    },
    {
        "id": "e568a027f351927b",
        "type": "NGSI-Dataset",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "endpoint": "ab8a838eb23942ff",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "T",
        "attrs": "p1,p2",
        "q": "",
        "mode": "keyValues",
        "x": 370,
        "y": 260,
        "wires": [
            [
                "90550634a0e26ce3"
            ]
        ]
    },
    {
        "id": "122cb2be7a915a9d",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "name": "all entities",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 260,
        "wires": [
            [
                "e568a027f351927b"
            ]
        ]
    },
    {
        "id": "90550634a0e26ce3",
        "type": "json",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 570,
        "y": 260,
        "wires": [
            [
                "a6271514dd4860fb",
                "2d4c33971fc12d15"
            ]
        ]
    },
    {
        "id": "a6271514dd4860fb",
        "type": "split",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 710,
        "y": 300,
        "wires": [
            [
                "53105beacb3e77cf"
            ]
        ]
    },
    {
        "id": "53105beacb3e77cf",
        "type": "debug",
        "z": "44b7dbcf27bd28ae",
        "name": "entity",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 890,
        "y": 300,
        "wires": []
    },
    {
        "id": "2d4c33971fc12d15",
        "type": "debug",
        "z": "44b7dbcf27bd28ae",
        "name": "entities",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 720,
        "y": 260,
        "wires": []
    },
    {
        "id": "1424e1d3206be1fa",
        "type": "http response",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 570,
        "y": 380,
        "wires": []
    },
    {
        "id": "6060f13d759a2f90",
        "type": "split",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 710,
        "y": 560,
        "wires": [
            [
                "3ebd6298bec264e1"
            ]
        ]
    },
    {
        "id": "3e0fdb9637dabb97",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "name": "delete all subscriptions",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 160,
        "y": 560,
        "wires": [
            [
                "099e6922dbcfe7be"
            ]
        ]
    },
    {
        "id": "09d91fa927852555",
        "type": "inject",
        "z": "44b7dbcf27bd28ae",
        "name": "set E3.p1 = 36, p2 = 48",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\"id\":\"urn:entities:E3\",\"type\":\"T\",\"p1\":{\"type\":\"Property\",\"value\":36},\"p2\":{\"type\":\"Property\",\"value\":48}}",
        "payloadType": "json",
        "x": 160,
        "y": 100,
        "wires": [
            [
                "532151c821513cdf"
            ]
        ]
    },
    {
        "id": "1bc5cc56d389f0e3",
        "type": "change",
        "z": "44b7dbcf27bd28ae",
        "name": "get ORION",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "ORION",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 440,
        "wires": [
            [
                "25a41fb7f7e1696c"
            ]
        ]
    },
    {
        "id": "976f12386df076ad",
        "type": "http request",
        "z": "44b7dbcf27bd28ae",
        "name": "GET",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 570,
        "y": 560,
        "wires": [
            [
                "6060f13d759a2f90"
            ]
        ]
    },
    {
        "id": "3ebd6298bec264e1",
        "type": "http request",
        "z": "44b7dbcf27bd28ae",
        "name": "DELETE",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/{{payload.id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 880,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "07d06f24ec64bf87",
        "type": "change",
        "z": "44b7dbcf27bd28ae",
        "name": "get ORION",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "ORION",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 500,
        "wires": [
            [
                "aab58a90e0095ee0"
            ]
        ]
    },
    {
        "id": "099e6922dbcfe7be",
        "type": "change",
        "z": "44b7dbcf27bd28ae",
        "name": "get ORION",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "ORION",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 560,
        "wires": [
            [
                "976f12386df076ad"
            ]
        ]
    },
    {
        "id": "94cf5e0e57bf36e6",
        "type": "change",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "latest",
                "pt": "flow",
                "to": "payload.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "dcae251182b37d2c",
        "type": "comment",
        "z": "44b7dbcf27bd28ae",
        "name": "set notification endpoint",
        "info": "",
        "x": 120,
        "y": 360,
        "wires": []
    },
    {
        "id": "44d52fa4fb700894",
        "type": "NGSI-Subscription",
        "z": "44b7dbcf27bd28ae",
        "name": "",
        "endpoint": "ab8a838eb23942ff",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "T",
        "watchedAttributes": "",
        "q": "",
        "notificationMode": "normalized",
        "notificationEndpoint": "http://host.docker.internal:1880/T",
        "notificationAttributes": "",
        "mimeType": "application/ld+json",
        "x": 250,
        "y": 340,
        "wires": [
            [
                "56fda1005f19bbab"
            ]
        ]
    },
    {
        "id": "9e0ec30507d13f51",
        "type": "debug",
        "z": "44b7dbcf27bd28ae",
        "name": "array",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 400,
        "wires": []
    },
    {
        "id": "666bcf1786a8826b",
        "type": "contract-call",
        "z": "828bae03b631ac33",
        "name": "checkDocument",
        "smartContract": "511b16494c95c3e9",
        "contractFunction": "checkDocument",
        "senderAccount": "a46f63f7bc8183e7",
        "readonlyFunction": true,
        "weiTransfer": "",
        "onlyEstimateGas": false,
        "useEstimatedGasLimit": true,
        "gasLimit": "",
        "usePreviousBlocksGasPrice": true,
        "gasPrice": "",
        "fetchFullTransaction": false,
        "x": 380,
        "y": 160,
        "wires": [
            [],
            [
                "f1eae5e9d4d1818f"
            ]
        ]
    },
    {
        "id": "a8c90eb9fd3bdfa2",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"hello\":\"world\"}",
        "payloadType": "json",
        "x": 140,
        "y": 200,
        "wires": [
            [
                "9f66c2ad0c41f0f4"
            ]
        ]
    },
    {
        "id": "66227205f7d98182",
        "type": "contract-call",
        "z": "828bae03b631ac33",
        "name": "notarize",
        "smartContract": "511b16494c95c3e9",
        "contractFunction": "notarize",
        "senderAccount": "a46f63f7bc8183e7",
        "readonlyFunction": false,
        "weiTransfer": "",
        "onlyEstimateGas": false,
        "useEstimatedGasLimit": true,
        "gasLimit": "46591",
        "usePreviousBlocksGasPrice": true,
        "gasPrice": "46591",
        "fetchFullTransaction": false,
        "x": 360,
        "y": 320,
        "wires": [
            [
                "7584108c1cdcae97"
            ],
            [
                "70a16f865317b93d",
                "a6c079266424dbdf"
            ]
        ]
    },
    {
        "id": "4f17425552d7937f",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "transaction",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "msg",
        "x": 830,
        "y": 260,
        "wires": []
    },
    {
        "id": "d021545ae8c14adf",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"hello\":\"world\"}",
        "payloadType": "json",
        "x": 140,
        "y": 360,
        "wires": [
            [
                "0a87ac0a37a11591"
            ]
        ]
    },
    {
        "id": "996485ba913d1c2c",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "test",
        "payloadType": "str",
        "x": 110,
        "y": 160,
        "wires": [
            [
                "666bcf1786a8826b"
            ]
        ]
    },
    {
        "id": "6cab2521221ae1a2",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "test",
        "payloadType": "str",
        "x": 110,
        "y": 320,
        "wires": [
            [
                "66227205f7d98182"
            ]
        ]
    },
    {
        "id": "2539a76ebd0a9794",
        "type": "comment",
        "z": "828bae03b631ac33",
        "name": "Come ricavare la Private Key",
        "info": "# Procedura su Chrome\n - Estensione Metamask\n - Opzioni account (overflow menu icon)\n - Dettagli Account\n - Esporta Chiave Privata",
        "x": 880,
        "y": 100,
        "wires": []
    },
    {
        "id": "0147458d645aba87",
        "type": "comment",
        "z": "828bae03b631ac33",
        "name": "Come ricavare la Public Key",
        "info": "bash $ `npm i -g ethereum-private-key-to-public-key`\nbash $ `ethereum-private-key-to-public-key` _private-key_\n\n0406c16dffbd03799962604dac8056a0615fd0586c1a1df8c09c05bedd41acec25ab9756c6bc577d0804d4244ed08d86a5bd3fb83991fc67ca13c096a8b8f040e9",
        "x": 880,
        "y": 140,
        "wires": []
    },
    {
        "id": "9125a8580cf73ca4",
        "type": "comment",
        "z": "828bae03b631ac33",
        "name": "node-red-contrib-ethereum",
        "info": "[Github](https://github.com/timweing/node-red-contrib-ethereum)",
        "x": 870,
        "y": 40,
        "wires": []
    },
    {
        "id": "f8737645772d6b90",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "storedValue",
        "payloadType": "flow",
        "x": 140,
        "y": 280,
        "wires": [
            [
                "66227205f7d98182",
                "c4aeb4c22e647f23"
            ]
        ]
    },
    {
        "id": "200abc3bc4f216a2",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "storedValue",
        "payloadType": "flow",
        "x": 140,
        "y": 120,
        "wires": [
            [
                "666bcf1786a8826b",
                "c661074bc8187e52"
            ]
        ]
    },
    {
        "id": "8cb44184df95218b",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "create",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t    \"sender\":\"0x7efC9d38581c7Cb8372325c349Ec5095D027B3Dd\",\t    \"storedValue\":$random(),\t    \"timestamp\":$toMillis($now())\t}",
        "payloadType": "jsonata",
        "x": 110,
        "y": 40,
        "wires": [
            [
                "2dfaec749c6f71e2"
            ]
        ]
    },
    {
        "id": "a2dae50877221c7b",
        "type": "change",
        "z": "828bae03b631ac33",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "storedValue",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 40,
        "wires": [
            [
                "67d7f99fb0af894f"
            ]
        ]
    },
    {
        "id": "67d7f99fb0af894f",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "$eval(payload)",
        "targetType": "jsonata",
        "statusVal": "",
        "statusType": "auto",
        "x": 600,
        "y": 40,
        "wires": []
    },
    {
        "id": "2dfaec749c6f71e2",
        "type": "json",
        "z": "828bae03b631ac33",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 230,
        "y": 40,
        "wires": [
            [
                "a2dae50877221c7b"
            ]
        ]
    },
    {
        "id": "9f66c2ad0c41f0f4",
        "type": "json",
        "z": "828bae03b631ac33",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 290,
        "y": 200,
        "wires": [
            [
                "666bcf1786a8826b"
            ]
        ]
    },
    {
        "id": "0a87ac0a37a11591",
        "type": "json",
        "z": "828bae03b631ac33",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 290,
        "y": 360,
        "wires": [
            [
                "66227205f7d98182"
            ]
        ]
    },
    {
        "id": "70a16f865317b93d",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "block hash",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.blockHash",
        "statusType": "msg",
        "x": 830,
        "y": 380,
        "wires": []
    },
    {
        "id": "f1eae5e9d4d1818f",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "result",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "msg",
        "x": 590,
        "y": 160,
        "wires": []
    },
    {
        "id": "ccaad40191a37e68",
        "type": "comment",
        "z": "828bae03b631ac33",
        "name": "My_PoE.sol",
        "info": "[Remix](https://remix.ethereum.org/)\n```\n// SPDX-License-Identifier: GPL-3.0\npragma solidity >=0.7.0 <0.9.0;\n\n/**\n * @title Proof of Existence\n * @dev Notarization with Blockchain\n */\ncontract ProofOfExistence {\n  // @dev The contract state\n  mapping (bytes32 => bool) private proofs;\n\n  // @dev Private helper function to get a document's SHA256 hash\n  // *pure function\n  function calculateProof(string memory document) private pure returns (bytes32) {\n    return sha256(abi.encode(document));\n  }\n  \n  // @dev Calculate and store the proof for a document in the contract state\n  // *transactional function*\n  function notarize(string memory document) public returns (bytes32) {\n    bytes32 hash = calculateProof(document);\n    require(proofs[hash] != true, \"Document already notarized.\");\n    proofs[hash] = true;\n    return hash;\n  }\n\n  // @dev Check if a document has been notarized\n  // *read-only function*\n  function checkDocument(string memory document) public view returns (bool) {\n    return proofs[calculateProof(document)];\n  }\n}\n```",
        "x": 830,
        "y": 200,
        "wires": []
    },
    {
        "id": "b81c9b20a9cb617f",
        "type": "transaction-reader",
        "z": "828bae03b631ac33",
        "name": "",
        "ethereumClient": "a5b0ce2eb275e336",
        "queryReceipt": false,
        "getByTxHash": true,
        "fromBlock": "-9",
        "toBlock": "latest",
        "filterFrom": "",
        "filterTo": "",
        "x": 630,
        "y": 420,
        "wires": [
            [
                "70a16f865317b93d"
            ]
        ]
    },
    {
        "id": "7584108c1cdcae97",
        "type": "change",
        "z": "828bae03b631ac33",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "transaction",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 260,
        "wires": [
            [
                "4f17425552d7937f"
            ]
        ]
    },
    {
        "id": "40edd948f48d37e5",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "transaction",
        "payloadType": "flow",
        "x": 380,
        "y": 420,
        "wires": [
            [
                "b81c9b20a9cb617f"
            ]
        ]
    },
    {
        "id": "a6c079266424dbdf",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "summary",
        "targetType": "msg",
        "statusVal": "summary.args[0]",
        "statusType": "msg",
        "x": 840,
        "y": 320,
        "wires": []
    },
    {
        "id": "bee2f669ae954ab8",
        "type": "ethers-transaction",
        "z": "828bae03b631ac33",
        "name": "",
        "network": "0a1c6c0edd1fd842",
        "wallet": "93b18379800c0f5a",
        "output": "payload",
        "outputType": "msg",
        "wait": false,
        "address": "",
        "addressType": "str",
        "ether": "",
        "etherType": "str",
        "gaslimit": "",
        "contract": "26a531bf9aef221a",
        "apiCall": "checkDocument",
        "params": [
            "payload"
        ],
        "param0": "payload",
        "typeParam0": "msg",
        "x": 390,
        "y": 500,
        "wires": [
            [
                "35f7ec80981384b0"
            ]
        ]
    },
    {
        "id": "35f7ec80981384b0",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 500,
        "wires": []
    },
    {
        "id": "0a25a3c7164c9449",
        "type": "ethers-transaction",
        "z": "828bae03b631ac33",
        "name": "",
        "network": "0a1c6c0edd1fd842",
        "wallet": "93b18379800c0f5a",
        "output": "payload",
        "outputType": "msg",
        "wait": false,
        "address": "",
        "addressType": "str",
        "ether": "",
        "etherType": "str",
        "gaslimit": "",
        "contract": "26a531bf9aef221a",
        "apiCall": "notarize",
        "params": [
            "payload"
        ],
        "param0": "payload",
        "typeParam0": "msg",
        "x": 380,
        "y": 560,
        "wires": [
            [
                "7a06a1dafea5c8a9"
            ]
        ]
    },
    {
        "id": "6c0efb7d54703c09",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 910,
        "y": 560,
        "wires": []
    },
    {
        "id": "aaf5189ed0b9ad1c",
        "type": "template",
        "z": "828bae03b631ac33",
        "name": "etherscan",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "https://goerli.etherscan.io/tx/{{payload}}",
        "output": "str",
        "x": 760,
        "y": 560,
        "wires": [
            [
                "6c0efb7d54703c09"
            ]
        ]
    },
    {
        "id": "7a06a1dafea5c8a9",
        "type": "function",
        "z": "828bae03b631ac33",
        "name": "error check",
        "func": "if (!msg.error) return msg;\nnode.error(msg.error, msg);",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 560,
        "wires": [
            [
                "aaf5189ed0b9ad1c"
            ]
        ]
    },
    {
        "id": "41f41641c1704274",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Test",
        "payloadType": "str",
        "x": 110,
        "y": 520,
        "wires": [
            [
                "bee2f669ae954ab8"
            ]
        ]
    },
    {
        "id": "05e1517dde152692",
        "type": "comment",
        "z": "828bae03b631ac33",
        "name": "Ropsten (deprecated)",
        "info": "ProofOfExistence3 (Sepolia)\n0x208e521112313e58EbFe8C7642a23dDEEefB4C8C",
        "x": 140,
        "y": 440,
        "wires": []
    },
    {
        "id": "935c0df299bd347b",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "storedValue",
        "payloadType": "flow",
        "x": 140,
        "y": 480,
        "wires": [
            [
                "bee2f669ae954ab8"
            ]
        ]
    },
    {
        "id": "f62e32bae716105f",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "storedValue",
        "payloadType": "flow",
        "x": 140,
        "y": 560,
        "wires": [
            [
                "0a25a3c7164c9449"
            ]
        ]
    },
    {
        "id": "c4aeb4c22e647f23",
        "type": "ethers-transaction",
        "z": "828bae03b631ac33",
        "d": true,
        "name": "",
        "network": "d9ce9f5276beafeb",
        "wallet": "93b18379800c0f5a",
        "output": "payload",
        "outputType": "msg",
        "wait": false,
        "address": "",
        "addressType": "str",
        "ether": "",
        "etherType": "str",
        "gaslimit": "",
        "contract": "26a531bf9aef221a",
        "apiCall": "notarize",
        "params": [
            "payload"
        ],
        "param0": "payload",
        "typeParam0": "msg",
        "x": 380,
        "y": 280,
        "wires": [
            [
                "8fadde141db77098"
            ]
        ]
    },
    {
        "id": "8fadde141db77098",
        "type": "debug",
        "z": "828bae03b631ac33",
        "d": true,
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 120,
        "wires": []
    },
    {
        "id": "c661074bc8187e52",
        "type": "ethers-transaction",
        "z": "828bae03b631ac33",
        "d": true,
        "name": "",
        "network": "d9ce9f5276beafeb",
        "wallet": "93b18379800c0f5a",
        "output": "payload",
        "outputType": "msg",
        "wait": false,
        "address": "",
        "addressType": "str",
        "ether": "",
        "etherType": "str",
        "gaslimit": "",
        "contract": "26a531bf9aef221a",
        "apiCall": "checkDocument",
        "params": [
            "payload"
        ],
        "param0": "payload",
        "typeParam0": "msg",
        "x": 390,
        "y": 120,
        "wires": [
            [
                "8fadde141db77098"
            ]
        ]
    },
    {
        "id": "91618269345c9b5a",
        "type": "ui_button",
        "z": "48a7733923a33252",
        "name": "Refresh",
        "group": "160e81fb.f1c86e",
        "order": 10,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "#5CFEF2",
        "bgcolor": "",
        "className": "",
        "icon": "refresh",
        "payload": "",
        "payloadType": "str",
        "topic": "refresh",
        "topicType": "str",
        "x": 100,
        "y": 380,
        "wires": [
            [
                "874dcadb8b86c83d"
            ]
        ]
    },
    {
        "id": "fc10e0dafc44c769",
        "type": "ui_button",
        "z": "48a7733923a33252",
        "name": "Delete",
        "group": "160e81fb.f1c86e",
        "order": 8,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#f31100",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 90,
        "y": 440,
        "wires": [
            [
                "f115a2bc122c7201"
            ]
        ]
    },
    {
        "id": "f115a2bc122c7201",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "get flow.File",
        "func": "// Get the filename from the flow context\nlet filename = flow.get(\"File\");\n\n// check, if the filename is undefined that means it does not exist yet, nothing is selected yet\n// return: do not output anything\nif (filename === undefined) {\n    return;\n}\n\n// return the filename to the file-in node to delete\nmsg.filename = filename;\n\nif (msg.filename.replace(/^.*(\\\\|\\/|\\:)/, '')[0] !== \".\") {\n    // Only do this if this is a file, we don't delete folders\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 440,
        "wires": [
            [
                "b25609b65f7426c8"
            ]
        ]
    },
    {
        "id": "30c322a137fb9155",
        "type": "file",
        "z": "48a7733923a33252",
        "name": "delete file",
        "filename": "",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 920,
        "y": 440,
        "wires": [
            [
                "91618269345c9b5a"
            ]
        ]
    },
    {
        "id": "9618a7d3262da78d",
        "type": "http in",
        "z": "48a7733923a33252",
        "name": "",
        "url": "/download",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 560,
        "wires": [
            [
                "aca8d6bf153a2f2e"
            ]
        ]
    },
    {
        "id": "8aeaad20c7c71351",
        "type": "http response",
        "z": "48a7733923a33252",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 790,
        "y": 560,
        "wires": []
    },
    {
        "id": "aca8d6bf153a2f2e",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "extract file",
        "func": "msg.filename = msg.req.query.filename;\nmsg.contentdisposition = \"attachment; filename=\\\"\" + msg.req.query.filename.replace(/^.*(\\\\|\\/|\\:)/, '') + \"\\\"\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 560,
        "wires": [
            [
                "4ab5604bd381f56f"
            ]
        ],
        "outputLabels": [
            "Folder selected"
        ]
    },
    {
        "id": "4ab5604bd381f56f",
        "type": "file in",
        "z": "48a7733923a33252",
        "name": "",
        "filename": "",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 480,
        "y": 560,
        "wires": [
            [
                "2fbdf1b2f1e51187"
            ]
        ]
    },
    {
        "id": "2fbdf1b2f1e51187",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "set headers",
        "rules": [
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "headers.content-type",
                "pt": "msg",
                "to": "application/octet-stream",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "headers.Content-Disposition",
                "pt": "msg",
                "to": "contentdisposition",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 560,
        "wires": [
            [
                "8aeaad20c7c71351"
            ]
        ]
    },
    {
        "id": "ac46716ba55a985b",
        "type": "ui_button",
        "z": "48a7733923a33252",
        "name": "Graph",
        "group": "160e81fb.f1c86e",
        "order": 12,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "#FFFE00",
        "bgcolor": "",
        "className": "",
        "icon": "show_chart",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 90,
        "y": 500,
        "wires": [
            [
                "95f454061a2fb879"
            ]
        ]
    },
    {
        "id": "95f454061a2fb879",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "get flow.File",
        "func": "// Get the filename from the flow context\nlet filename = flow.get(\"File\");\n\n// check, if the filename is undefined that means it does not exist yet, nothing is selected yet\n// return: do not output anything\nif (filename === undefined) {\n    return;\n}\n\n// return the filename to the file-in node to delete\nmsg.filename = filename;\n\nif (msg.filename.replace(/^.*(\\\\|\\/|\\:)/, '')[0] !== \".\") {\n    // Only do this if this is a file, we don't delete folders\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 500,
        "wires": [
            [
                "56b9e648a82f0f9e"
            ]
        ]
    },
    {
        "id": "56b9e648a82f0f9e",
        "type": "file in",
        "z": "48a7733923a33252",
        "name": "",
        "filename": "",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 480,
        "y": 500,
        "wires": [
            [
                "2fc2950c9cc1e983"
            ]
        ]
    },
    {
        "id": "2fc2950c9cc1e983",
        "type": "csv",
        "z": "48a7733923a33252",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 630,
        "y": 500,
        "wires": [
            [
                "57d4a10a48990a5b"
            ]
        ]
    },
    {
        "id": "57d4a10a48990a5b",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "chart data",
        "func": "var chart = [{\n    \"series\":[],\n    \"data\":[],\n    \"labels\":[msg.filename]\n}];\n\nlet columns = 0;\n\nfor(var series in msg.payload[0]) {\n    if(series!==\"time\") {\n        chart[0].series.push(series);\n        chart[0].data.push([]);\n        columns++;\n    }\n}\n\nfor (var j=0; j<msg.payload.length; j++) {\n   for(var i=0;i<columns;i++) {\n       chart[0].data[i].push({\"x\":msg.payload[j].time, \"y\":msg.payload[j][chart[0].series[i]]});\n   } \n}\n\nmsg.payload = chart;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 500,
        "wires": [
            [
                "3995b2e8155a78af"
            ]
        ]
    },
    {
        "id": "a4a7c1b41f99642e",
        "type": "ui_toast",
        "z": "48a7733923a33252",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "Yes",
        "cancel": "No",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "ask",
        "x": 630,
        "y": 440,
        "wires": [
            [
                "4df07b1e9c4c73b2"
            ]
        ]
    },
    {
        "id": "b25609b65f7426c8",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "set text",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "\"Delete \" & filename & \"?\"",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Confirmation",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 440,
        "wires": [
            [
                "a4a7c1b41f99642e"
            ]
        ]
    },
    {
        "id": "4df07b1e9c4c73b2",
        "type": "switch",
        "z": "48a7733923a33252",
        "name": "yes?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Yes",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 790,
        "y": 440,
        "wires": [
            [
                "30c322a137fb9155"
            ]
        ]
    },
    {
        "id": "874dcadb8b86c83d",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "set flow.Dir&Hidden",
        "func": "let dir = flow.get(\"Dir\") || \"/\";\nflow.set(\"Dir\", dir);\n\nlet hidden = flow.get(\"Hidden\") || false;\nflow.set(\"Hidden\", hidden);\n\nif (msg.topic===\"parent\") {\n    var path = dir.split('/');\n    path.pop();\n    dir = path.join('/'); \n    if (dir===\"\") dir=\"/\";\n    flow.set(\"Dir\", dir);\n}\n\nif (msg.topic===\"change\") {\n    dir=msg.payload;    \n    flow.set(\"Dir\", dir);\n}\n\nif (msg.topic===\"hidden\") {\n    hidden=msg.payload;    \n    flow.set(\"Hidden\", hidden);\n}\n\n//if (msg.topic===\"refresh\") {\n//}\nnode.status({ fill: \"green\", shape: \"dot\", text: dir });\n\nmsg.payload = {\"start\":dir, \"hidden\": hidden};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 280,
        "wires": [
            [
                "1c8f7941c9d116e6",
                "05e5d89d8abad833"
            ]
        ]
    },
    {
        "id": "5adbf59db2d4b64f",
        "type": "ui_button",
        "z": "48a7733923a33252",
        "name": "Parent",
        "group": "160e81fb.f1c86e",
        "order": 4,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "arrow_upwards",
        "payload": "",
        "payloadType": "str",
        "topic": "parent",
        "topicType": "str",
        "x": 90,
        "y": 160,
        "wires": [
            [
                "874dcadb8b86c83d"
            ]
        ]
    },
    {
        "id": "d560959631afbf82",
        "type": "ui_button",
        "z": "48a7733923a33252",
        "name": "Home",
        "group": "160e81fb.f1c86e",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#51aa00",
        "className": "",
        "icon": "home",
        "payload": "HOME",
        "payloadType": "global",
        "topic": "change",
        "topicType": "str",
        "x": 90,
        "y": 100,
        "wires": [
            [
                "874dcadb8b86c83d"
            ]
        ]
    },
    {
        "id": "1f60efffec2661cc",
        "type": "ui_switch",
        "z": "48a7733923a33252",
        "name": "Hidden",
        "label": "",
        "tooltip": "Show hidden files",
        "group": "160e81fb.f1c86e",
        "order": 14,
        "width": 1,
        "height": 1,
        "passthru": false,
        "decouple": "false",
        "topic": "hidden",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "check_box",
        "oncolor": "#000000",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "check_box_outline_blank",
        "offcolor": "#000000",
        "animate": true,
        "className": "",
        "x": 100,
        "y": 220,
        "wires": [
            [
                "874dcadb8b86c83d"
            ]
        ]
    },
    {
        "id": "f3b40cbd5c41ca85",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "chdir",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.name",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "change",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 280,
        "wires": [
            [
                "874dcadb8b86c83d"
            ]
        ]
    },
    {
        "id": "0f87aa78c13d2d5c",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "set flow.File",
        "rules": [
            {
                "t": "set",
                "p": "File",
                "pt": "flow",
                "to": "payload.name",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "payload.name",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 140,
        "wires": [
            [
                "4eccfb8e73e80732"
            ]
        ]
    },
    {
        "id": "d0799928afba9280",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "table data",
        "func": "for (var i = 0; i < msg.payload.length; i++) {\n//  msg.payload[i].stat.size = msg.payload[i].stat.size / 1024;\n    msg.payload[i].stat.created = msg.payload[i].stat.created.toISOString().slice(0, 19).replace('T', ' ');\n    msg.payload[i].stat.changed = msg.payload[i].stat.changed.toISOString().slice(0, 19).replace('T', ' ');\n    msg.payload[i].stat.accessed = msg.payload[i].stat.accessed.toISOString().slice(0, 19).replace('T', ' ');\n    msg.payload[i].stat.statusChanged = msg.payload[i].stat.statusChanged.toISOString().slice(0, 19).replace('T', ' ');\n//  msg.payload[i].fname = (msg.payload[i].stat.isFile?\"\":\"[\") + msg.payload[i].name.replace(/^.*(\\\\|\\/|\\:)/, '')+(msg.payload[i].stat.isFile?\"\":\"]\");\n    msg.payload[i].fname = (msg.payload[i].stat.isFile ? \"\" : \"<b>[\") + msg.payload[i].name.replace(/^.*(\\\\|\\/|\\:)/, '') + (msg.payload[i].stat.isFile ? \"\" : \"]</b>\");\n    if (msg.payload[i].fname.startsWith('.') || msg.payload[i].fname.startsWith('<b>[.'))\n        msg.payload[i].fname = \"<i>\" + msg.payload[i].fname + \"</i>\";\n//  msg.payload[i].link = msg.payload[i].stat.isDirectory ? \"\" : \"/download?filename=\" + msg.payload[i].name;\n    msg.payload[i].link = msg.payload[i].stat.isDirectory ? \"\" : \"<a href=\\\"/download?filename=\" + msg.payload[i].name + \"\\\"><img src=\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACf0lEQVR42mNkwAE0ApLF/wqIKwOZ/5k/vLxzY8Pc19jUMaILGPdsjfik4VDy5ieD0X+oPBPQEBF2htN8Nw50nynxXoPVADEzVw6himVLX/znCmLAAyQZv6142xEV/+rU7l8oBiitfrn2HRMPXDPQVgZWJgj797//DP+QHCv878uyu6Hi0XADJKuXR3438luGbJO7GAPDbP2/YHbqsc8MO7/wAVUzweW5zm0KetYauR5sgPCiJ2f/cgsa4TIg7fA7hl1vWRj+cfIDnQYxhPnL22Nv4+WsGZnldSR4+048AxrPCHOSuzgDg6nAf4ZUuX9gxbOvfWI49/4fw643TAy/OaCG/P//73ORmSgji56TDU/95sPItjuLMjDM1PvLwAZ18a+//xmyj31g2PcWKMDMzPCbnRfsnS/1nqaMzFrWtrzNuw6hhzbMEKBNYM37gZoZmRghbmRiZvjFxs3wqcrZjJFRQEKab86dx4yMjIyYhvxnYPnyjmH/G0awZogSKM3I+O9FmpY4WISn68h5FmVDfZAmTmYGBjvh/3BDmP7+YWD++xOs6cCL3wx/gBEMYv++dfrU63pfc7CtrFZB8dxFixaAwpGf5R9DtsRnRKwDxRih9NQ7fxl+MjCDDXjbEx/x48yOlTB1zFxFi9azWQf7gvzM+O8vA8uvL+DEBFIMcTHC+d8Or177fmpOGFDgH8LfrOx8XDkzl7Jah/iAFf//x8D2+xsDM5CGRTBU8/r3MwrjGP7+/oItM7GymvvFs/sX5DGrmWqDgo7t7w8Glr+///2+ffrS501TJ/44u3MJUN0fnLkRCtgYuQXkmMQVlBj+A93y8v7d/98+PgElCXSFAKXm39j74So1AAAAAElFTkSuQmCC\\\" /></a>\";\n}\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 200,
        "wires": [
            [
                "b8b88aab13c13447"
            ]
        ]
    },
    {
        "id": "b8b88aab13c13447",
        "type": "sort",
        "z": "48a7733923a33252",
        "name": "",
        "order": "ascending",
        "as_num": false,
        "target": "payload",
        "targetType": "msg",
        "msgKey": "$lowercase(fname)\t",
        "msgKeyType": "jsonata",
        "seqKey": "payload",
        "seqKeyType": "msg",
        "x": 270,
        "y": 140,
        "wires": [
            [
                "54cee00c2aab4588"
            ]
        ]
    },
    {
        "id": "e02e46b423ddef65",
        "type": "switch",
        "z": "48a7733923a33252",
        "name": "is file?",
        "property": "payload.stat.isFile",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 630,
        "y": 140,
        "wires": [
            [
                "0f87aa78c13d2d5c",
                "2999856f3c6017d7"
            ],
            [
                "f3b40cbd5c41ca85"
            ]
        ]
    },
    {
        "id": "f696127a39b59722",
        "type": "yaml",
        "z": "48a7733923a33252",
        "property": "payload",
        "name": "",
        "x": 770,
        "y": 100,
        "wires": [
            [
                "dcfa53334425c5c5"
            ]
        ]
    },
    {
        "id": "dcfa53334425c5c5",
        "type": "ui_template",
        "z": "48a7733923a33252",
        "group": "26e8fe8026c92abb",
        "name": "Details",
        "order": 2,
        "width": 6,
        "height": 6,
        "format": "<textarea rows=\"21\">{{msg.payload}}</textarea>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 930,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "968d285a67eab4bb",
        "type": "inject",
        "z": "48a7733923a33252",
        "name": "INIT",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "ui_control",
                "v": "{\"tabulator\":{\"selectable\":1}}",
                "vt": "json"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "x": 90,
        "y": 40,
        "wires": [
            [
                "54cee00c2aab4588",
                "b3b5c93025760016"
            ]
        ]
    },
    {
        "id": "4eccfb8e73e80732",
        "type": "file in",
        "z": "48a7733923a33252",
        "name": "",
        "filename": "",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 920,
        "y": 200,
        "wires": [
            [
                "bffe6dff2143e980"
            ]
        ]
    },
    {
        "id": "4931b2b91991fb77",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "clean",
        "rules": [
            {
                "t": "delete",
                "p": "payload.link",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.fname",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 100,
        "wires": [
            [
                "f696127a39b59722"
            ]
        ]
    },
    {
        "id": "3995b2e8155a78af",
        "type": "ui_chart",
        "z": "48a7733923a33252",
        "name": "",
        "group": "26e8fe8026c92abb",
        "order": 3,
        "width": 6,
        "height": 4,
        "label": "CSV file",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "4",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 920,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "54cee00c2aab4588",
        "type": "ui_table",
        "z": "48a7733923a33252",
        "group": "160e81fb.f1c86e",
        "name": "",
        "order": 18,
        "width": 12,
        "height": 10,
        "columns": [
            {
                "field": "fname",
                "title": "Name",
                "width": "35%",
                "align": "left",
                "formatter": "html",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "stat.size",
                "title": "Size",
                "width": "15%",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "stat.created",
                "title": "Created",
                "width": "22%",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "stat.changed",
                "title": "Changed",
                "width": "22%",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "link",
                "title": "",
                "width": "",
                "align": "left",
                "formatter": "html",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 490,
        "y": 140,
        "wires": [
            [
                "e02e46b423ddef65",
                "4931b2b91991fb77"
            ]
        ]
    },
    {
        "id": "aa26cdb6da42d2f5",
        "type": "ui_form",
        "z": "48a7733923a33252",
        "name": "Editor",
        "label": "",
        "group": "4128a70510a0cd4e",
        "order": 2,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "File name",
                "value": "filename",
                "type": "text",
                "required": true,
                "rows": null
            },
            {
                "label": "",
                "value": "content",
                "type": "multiline",
                "required": true,
                "rows": 9
            }
        ],
        "formValue": {
            "filename": "",
            "content": ""
        },
        "payload": "",
        "submit": "Save",
        "cancel": "",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 930,
        "y": 320,
        "wires": [
            [
                "7ec0ae66e287c97c"
            ]
        ]
    },
    {
        "id": "bffe6dff2143e980",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "form data",
        "func": "var cloned = RED.util.cloneMessage(msg);\nvar formdata = {payload:{}};\nformdata.payload.filename = cloned.filename;\nformdata.payload.content = cloned.payload;\nreturn formdata;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 260,
        "wires": [
            [
                "aa26cdb6da42d2f5"
            ]
        ]
    },
    {
        "id": "7ec0ae66e287c97c",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "set msg",
        "rules": [
            {
                "t": "move",
                "p": "payload.filename",
                "pt": "msg",
                "to": "filename",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.content",
                "pt": "msg",
                "to": "content",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Confirmation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "\"Save \" & filename & \"?\"",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 380,
        "wires": [
            [
                "50d209d0b31f25a6"
            ]
        ]
    },
    {
        "id": "50d209d0b31f25a6",
        "type": "ui_toast",
        "z": "48a7733923a33252",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "Yes",
        "cancel": "No",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "confirm",
        "x": 480,
        "y": 380,
        "wires": [
            [
                "d6dd05798b041c4a"
            ]
        ]
    },
    {
        "id": "d6dd05798b041c4a",
        "type": "switch",
        "z": "48a7733923a33252",
        "name": "yes?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Yes",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 630,
        "y": 380,
        "wires": [
            [
                "c84fa79f2496e377"
            ]
        ]
    },
    {
        "id": "5aec8815f6ae6c9c",
        "type": "file",
        "z": "48a7733923a33252",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 920,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "c84fa79f2496e377",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "content",
        "rules": [
            {
                "t": "move",
                "p": "content",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 380,
        "wires": [
            [
                "5aec8815f6ae6c9c"
            ]
        ]
    },
    {
        "id": "b3b5c93025760016",
        "type": "exec",
        "z": "48a7733923a33252",
        "command": "pwd",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 270,
        "y": 40,
        "wires": [
            [
                "1a1a090377e2b43e"
            ],
            [],
            []
        ]
    },
    {
        "id": "8096898980123bce",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "get Dir",
        "rules": [
            {
                "t": "set",
                "p": "path",
                "pt": "msg",
                "to": "Dir",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "path & \"/\" & file.name",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 40,
        "wires": [
            [
                "5af00f52190803f6"
            ]
        ]
    },
    {
        "id": "5af00f52190803f6",
        "type": "file",
        "z": "48a7733923a33252",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 920,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "1c8f7941c9d116e6",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "is dir",
        "rules": [
            {
                "t": "set",
                "p": "payload.name",
                "pt": "msg",
                "to": "payload.start",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 280,
        "wires": [
            [
                "2999856f3c6017d7"
            ]
        ]
    },
    {
        "id": "2999856f3c6017d7",
        "type": "ui_text",
        "z": "48a7733923a33252",
        "group": "160e81fb.f1c86e",
        "order": 2,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Path:",
        "format": "{{msg.payload.name}}",
        "layout": "row-left",
        "className": "",
        "x": 630,
        "y": 280,
        "wires": []
    },
    {
        "id": "71ca9deecf8d99c0",
        "type": "watch-directory",
        "z": "48a7733923a33252",
        "folder": "Dir",
        "recursive": 0,
        "typeEvent": "create",
        "ignoreInitial": true,
        "ignoredFiles": "",
        "name": "create",
        "x": 70,
        "y": 280,
        "wires": [
            [
                "91618269345c9b5a"
            ]
        ]
    },
    {
        "id": "e945f13798bed93a",
        "type": "watch-directory",
        "z": "48a7733923a33252",
        "folder": "Dir",
        "recursive": 0,
        "typeEvent": "update",
        "ignoreInitial": true,
        "ignoredFiles": "",
        "name": "update",
        "x": 90,
        "y": 300,
        "wires": [
            [
                "91618269345c9b5a"
            ]
        ]
    },
    {
        "id": "c58e8827edbef0b8",
        "type": "watch-directory",
        "z": "48a7733923a33252",
        "folder": "Dir",
        "recursive": 0,
        "typeEvent": "delete",
        "ignoreInitial": true,
        "ignoredFiles": "",
        "name": "delete",
        "x": 110,
        "y": 320,
        "wires": [
            [
                "91618269345c9b5a"
            ]
        ]
    },
    {
        "id": "05e5d89d8abad833",
        "type": "fs-file-lister",
        "z": "48a7733923a33252",
        "name": "",
        "start": "data",
        "pattern": "*.*",
        "folders": "*",
        "hidden": false,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 280,
        "y": 200,
        "wires": [
            [
                "d0799928afba9280"
            ]
        ]
    },
    {
        "id": "c5268070.c55a3",
        "type": "ui_template",
        "z": "48a7733923a33252",
        "group": "26e8fe8026c92abb",
        "name": "upload",
        "order": 4,
        "width": 6,
        "height": 1,
        "format": "\n<body>\n<button class=\"md-raised md-button md-ink-ripple\" onclick=\"importData()\">Upload</button>    \n\n<script>\nlet restoreScope = scope;\n\nfunction importData() {\n  let input = document.createElement('input');\n  input.type = 'file';\n  input.id = 'restoreBtn';\n  input.onchange = _ => {\n    // you can use this method to get file and perform respective operations\n        let fReader = new FileReader();\n        fReader.readAsArrayBuffer(input.files[0]);\n        fReader.onloadend = function(event){\n        restoreScope.send({\n            file:{name:input.files[0].name},\n            payload:event.target.result\n          });}\n        };\n  input.click();\n}\n</script>\n</body>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 630,
        "y": 60,
        "wires": [
            [
                "8096898980123bce"
            ]
        ]
    },
    {
        "id": "1a1a090377e2b43e",
        "type": "change",
        "z": "48a7733923a33252",
        "g": "34047250a1f44ce1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "HOME",
                "pt": "global",
                "to": "$trim(payload)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 60,
        "wires": [
            [
                "d560959631afbf82"
            ]
        ]
    },
    {
        "id": "b382101fb64bb6cd",
        "type": "debug",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 360,
        "wires": []
    },
    {
        "id": "85770b738242d577",
        "type": "inject",
        "z": "f29ecd9eab0f0d83",
        "d": true,
        "name": "5s",
        "props": [],
        "repeat": "5",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "topic": "",
        "x": 110,
        "y": 120,
        "wires": [
            [
                "b36e0ea9b8c2c5a8"
            ]
        ]
    },
    {
        "id": "b36e0ea9b8c2c5a8",
        "type": "function",
        "z": "f29ecd9eab0f0d83",
        "d": true,
        "name": "system mon",
        "func": "var freemem               = os.freemem();\nvar totalmem              = os.totalmem();\nvar os_uptime             = os.uptime();\nvar {user, system}        = process.cpuUsage();\nvar {heapUsed, heapTotal} = process.memoryUsage();\nvar p_uptime              = process.uptime();\nvar loadavg               = os.loadavg();\n\ncpuUsage(perc => node.send({\n    payload: {\n        cpu_usage:    perc,\n        cpu_user:     user / 1000 / 1000,\n        cpu_system:   system / 1000 / 1000,\n\n        used_heap_MB: round(heapUsed / 1024 / 1024),\n        heap_usage:   round(heapUsed / heapTotal * 100),\n        tot_heap_MB:  round(heapTotal / 1024 / 1024),\n        free_heap_MB: round((heapTotal - heapUsed) / 1024 / 1024),\n        \n        free_ram_GB:  round(freemem / 1024 / 1024 / 1024),\n        tot_ram_GB:   round(totalmem / 1024 / 1024 / 1024),\n        ram_usage:    round((1 - freemem / totalmem) * 100),\n        used_ram_GB:  round((totalmem - freemem) / 1024 / 1024 / 1024),\n\n        loadavg_1:    loadavg[0],\n        loadavg_5:    loadavg[1],\n        loadavg_15:   loadavg[2],\n\n        os_uptime_s:  os_uptime,\n        os_uptime:    timeConversion(os_uptime),\n        p_uptime_s:   p_uptime,\n        p_uptime:     timeConversion(p_uptime),\n\n        last_update: new Date()\n    }\n}))\n\n/**\n * Method used in node-os-utils\n * \n * @description Measure the CPU usage calculated between two different CPU usage samples\n * @param {function} cb A callback function the result is passed to\n * @param {number} [core=-1] The CPU core index to measure. When is not greater than -1 then it is \"averaged\" for all CPU cores.\n * @param {number} [sampleMs=1000]  The number of milliseconds between the CPU usage samples\n */\nfunction cpuUsage(cb, core, sampleMs) {\n    var deltaUsed;\n    var deltaIdle;\n    var timesKeys = [\"user\", \"nice\", \"sys\", \"irq\"];\n    var allCores = null === core || !(core > -1);\n\n    var byCore = (cpu, i) =>\n        allCores || core === i;\n\n    var bySampleKey = (sample, key) =>\n        sample.filter(byCore).reduce(\n            (sum, cpu) => sum + cpu.times[key], 0);\n\n    var sample0 = os.cpus();\n\n    setTimeout(function () {\n        var sample1 = os.cpus();\n\n        deltaUsed = timesKeys.reduce(\n            (diff, key) => diff + bySampleKey(sample1, key) - bySampleKey(sample0, key), 0);\n\n        deltaIdle = bySampleKey(sample1, \"idle\") - bySampleKey(sample0, \"idle\");\n\n        if (\"function\" === typeof cb) {\n            cb(100 * (deltaUsed / (deltaUsed + deltaIdle)));\n        }\n    }, sampleMs || 1000);\n}\n\nfunction round(n, d = 2) {\n    return Math.round(n * 10 ** d) / 10 ** d;\n}\n\nfunction timeConversion(seconds) {\n    var minutes = seconds / 60;\n    var hours = seconds / 3600;\n    var days = seconds / 86400;\n\n    if (seconds < 60) {\n        return seconds.toFixed(1) + \" Sec\";\n    } else if (minutes < 60) {\n        return minutes.toFixed(1) + \" Min\";\n    } else if (hours < 24) {\n        return hours.toFixed(1) + \" Hrs\";\n    } else {\n        return days.toFixed(1) + \" Days\"\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "os",
                "module": "os"
            },
            {
                "var": "process",
                "module": "process"
            }
        ],
        "x": 290,
        "y": 120,
        "wires": [
            [
                "d433dfb4813e729c",
                "87e284b688c9bc1d",
                "d5f8bbdc8a50d1c4",
                "1bb52214bb93b59c",
                "407393b06d188578",
                "978f120d4b6d5d8d",
                "7c204748fb1d30c6",
                "9c89af026d6e876a",
                "943a803ae4a09ae9"
            ]
        ]
    },
    {
        "id": "d59207da68d0e961",
        "type": "ui_chart",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "ade1f84b9abbf285",
        "order": 2,
        "width": "6",
        "height": "5",
        "label": "Memory",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "6",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 840,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "4b5a96f2a67089df",
        "type": "ui_chart",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "ade1f84b9abbf285",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "Processor",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "6",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 840,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "d433dfb4813e729c",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 1,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Uptime os/node",
        "format": "{{msg.payload.os_uptime}} / {{msg.payload.p_uptime}}",
        "layout": "row-spread",
        "className": "",
        "x": 540,
        "y": 220,
        "wires": []
    },
    {
        "id": "e475bf4d1347ce6d",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 2,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Hostname (IP)",
        "format": "{{msg.payload.hostname}} ({{msg.payload.address}})",
        "layout": "row-right",
        "className": "",
        "x": 540,
        "y": 260,
        "wires": []
    },
    {
        "id": "38fb665c04a2fa2b",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 3,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Platform Arch",
        "format": "{{msg.payload.platform}} {{msg.payload.arch}} {{msg.payload.endianness}}",
        "layout": "row-spread",
        "className": "",
        "x": 540,
        "y": 300,
        "wires": []
    },
    {
        "id": "12262ec3b4702e3b",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 4,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Cloud Release",
        "format": "{{msg.payload.release}}",
        "layout": "row-spread",
        "className": "",
        "x": 540,
        "y": 340,
        "wires": []
    },
    {
        "id": "93fcb0ebab0ad1fb",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 5,
        "width": "0",
        "height": "0",
        "name": "CPU Model",
        "label": "CPU #{{msg.payload.n_cores}}",
        "format": "{{msg.payload.cpu_model}}",
        "layout": "row-spread",
        "className": "",
        "x": 530,
        "y": 380,
        "wires": []
    },
    {
        "id": "772de72b62e1e4e0",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 6,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "User info (GID:UID)",
        "format": "{{msg.payload.username}} ({{msg.payload.gid}}:{{msg.payload.uid}})",
        "layout": "row-spread",
        "className": "",
        "x": 550,
        "y": 460,
        "wires": []
    },
    {
        "id": "990e8802adb04ed7",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 9,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Node version",
        "format": "{{msg.payload.node_version}}",
        "layout": "row-spread",
        "className": "",
        "x": 530,
        "y": 580,
        "wires": []
    },
    {
        "id": "1bb52214bb93b59c",
        "type": "ui_gauge",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "b6cc1aae65862dae",
        "order": 4,
        "width": "6",
        "height": "3",
        "gtype": "gage",
        "title": "CPU",
        "label": "units",
        "format": "{{msg.payload.cpu_usage | number:3}} %",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 510,
        "y": 80,
        "wires": []
    },
    {
        "id": "87e284b688c9bc1d",
        "type": "ui_gauge",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "b6cc1aae65862dae",
        "order": 4,
        "width": "6",
        "height": "3",
        "gtype": "gage",
        "title": "Heap",
        "label": "MB",
        "format": "{{msg.payload.used_heap_MB| number:2}} / {{msg.payload.tot_heap_MB| number:2}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 510,
        "y": 160,
        "wires": []
    },
    {
        "id": "d5f8bbdc8a50d1c4",
        "type": "ui_gauge",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "b6cc1aae65862dae",
        "order": 4,
        "width": "6",
        "height": "3",
        "gtype": "gage",
        "title": "RAM",
        "label": "GB",
        "format": "{{msg.payload.used_ram_GB| number:2}} / {{msg.payload.tot_ram_GB| number:2}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 510,
        "y": 120,
        "wires": []
    },
    {
        "id": "357b6025664fd028",
        "type": "inject",
        "z": "f29ecd9eab0f0d83",
        "d": true,
        "name": "5min",
        "props": [],
        "repeat": "300",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "topic": "",
        "x": 110,
        "y": 320,
        "wires": [
            [
                "e5dc586dcb92b24a"
            ]
        ]
    },
    {
        "id": "4a1850006419b797",
        "type": "function",
        "z": "f29ecd9eab0f0d83",
        "name": "node-os-utils",
        "func": "var freemem = os.freemem();\nvar totalmem = os.totalmem();\nvar os_uptime = os.uptime();\nvar { user, system } = process.cpuUsage();\nvar { heapUsed, heapTotal } = process.memoryUsage();\nvar p_uptime = process.uptime();\nvar loadavg = os.loadavg();\n\ncpuUsage(perc => node.send({\n    payload: {\n        cpu_usage:    perc,\n        cpu_user:     user / 1000 / 1000,\n        cpu_system:   system / 1000 / 1000,\n\n        used_heap_MB: round(heapUsed / 1024 / 1024),\n        heap_usage:   round(heapUsed / heapTotal * 100),\n        tot_heap_MB:  round(heapTotal / 1024 / 1024),\n        free_heap_MB: round((heapTotal - heapUsed) / 1024 / 1024),\n        \n        free_ram_GB:  round(freemem / 1024 / 1024 / 1024),\n        tot_ram_GB:   round(totalmem / 1024 / 1024 / 1024),\n        ram_usage:    round((1 - freemem / totalmem) * 100),\n        used_ram_GB:  round((totalmem - freemem) / 1024 / 1024 / 1024),\n        \n        loadavg_1:    loadavg[0],\n        loadavg_5:    loadavg[1],\n        loadavg_15:   loadavg[2],\n\n        os_uptime_s:  os_uptime,\n        os_uptime:    timeConversion(os_uptime),\n        p_uptime_s:   p_uptime,\n        p_uptime:     timeConversion(p_uptime),\n\n        arch: os.arch(),\n        cpus: os.cpus(),\n        cpu_model: os.cpus()[os.cpus().length - 1].model,\n        cpu_speed: os.cpus()[os.cpus().length - 1].speed,\n        n_cores: os.cpus().length,\n        endianness: os.endianness(),\n        homedir: os.homedir(),\n        hostname: os.hostname(),\n        network: os.networkInterfaces(),\n        address: os.networkInterfaces().eth0[0].address,\n        platform: os.platform(),\n        release: os.release(),\n        type: os.type(),\n        userInfo: os.userInfo(),\n        gid: os.userInfo().gid,\n        uid: os.userInfo().uid,\n        username: os.userInfo().username,\n        shell: os.userInfo().shell,\n        os_version: os.version(),\n\n        cwd: process.cwd(),\n        node_version: process.version,\n\n        last_update: new Date()\n    }\n}))\n\n/**\n * Method used in node-os-utils\n * \n * @description Measure the CPU usage calculated between two different CPU usage samples\n * @param {function} cb A callback function the result is passed to\n * @param {number} [core=-1] The CPU core index to measure. When is not greater than -1 then it is \"averaged\" for all CPU cores.\n * @param {number} [sampleMs=1000]  The number of milliseconds between the CPU usage samples\n */\nfunction cpuUsage(cb, core, sampleMs) {\n    var deltaUsed;\n    var deltaIdle;\n    var timesKeys = [\"user\", \"nice\", \"sys\", \"irq\"];\n    var allCores = null === core || !(core > -1);\n\n    var byCore = (cpu, i) =>\n        allCores || core === i;\n\n    var bySampleKey = (sample, key) =>\n        sample.filter(byCore).reduce(\n            (sum, cpu) => sum + cpu.times[key], 0);\n\n    var sample0 = os.cpus();\n\n    setTimeout(function () {\n        var sample1 = os.cpus();\n\n        deltaUsed = timesKeys.reduce(\n            (diff, key) => diff + bySampleKey(sample1, key) - bySampleKey(sample0, key), 0);\n\n        deltaIdle = bySampleKey(sample1, \"idle\") - bySampleKey(sample0, \"idle\");\n\n        if (\"function\" === typeof cb) {\n            cb(100 * (deltaUsed / (deltaUsed + deltaIdle)));\n        }\n    }, sampleMs || 1000);\n}\n\nfunction round(n, d = 2) {\n    return Math.round(n * 10 ** d) / 10 ** d;\n}\n\nfunction timeConversion(seconds) {\n    var minutes = seconds / 60;\n    var hours = seconds / 3600;\n    var days = seconds / 86400;\n\n    if (seconds < 60) {\n        return seconds.toFixed(1) + \" Sec\";\n    } else if (minutes < 60) {\n        return minutes.toFixed(1) + \" Min\";\n    } else if (hours < 24) {\n        return hours.toFixed(1) + \" Hrs\";\n    } else {\n        return days.toFixed(1) + \" Days\"\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "os",
                "module": "os"
            },
            {
                "var": "process",
                "module": "process"
            }
        ],
        "x": 290,
        "y": 360,
        "wires": [
            [
                "407393b06d188578",
                "1bb52214bb93b59c",
                "d5f8bbdc8a50d1c4",
                "87e284b688c9bc1d",
                "d433dfb4813e729c",
                "7c204748fb1d30c6",
                "9c89af026d6e876a",
                "943a803ae4a09ae9",
                "978f120d4b6d5d8d",
                "e475bf4d1347ce6d",
                "38fb665c04a2fa2b",
                "12262ec3b4702e3b",
                "93fcb0ebab0ad1fb",
                "772de72b62e1e4e0",
                "a72c3c707a0495a6",
                "f66d1fae20c650a0",
                "990e8802adb04ed7",
                "716b83720f6ed7c3",
                "b382101fb64bb6cd"
            ]
        ]
    },
    {
        "id": "a72c3c707a0495a6",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 7,
        "width": "0",
        "height": "0",
        "name": "Home (bash)",
        "label": "Home (bash:{{msg.payload.shell}}) Current dir",
        "format": "{{msg.payload.homedir}} {{msg.payload.cwd}} ",
        "layout": "row-spread",
        "className": "",
        "x": 530,
        "y": 500,
        "wires": []
    },
    {
        "id": "f66d1fae20c650a0",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 8,
        "width": "0",
        "height": "0",
        "name": "OS version",
        "label": "{{msg.payload.type}} version",
        "format": "{{msg.payload.os_version}}",
        "layout": "row-spread",
        "className": "",
        "x": 530,
        "y": 540,
        "wires": []
    },
    {
        "id": "e5dc586dcb92b24a",
        "type": "function",
        "z": "f29ecd9eab0f0d83",
        "d": true,
        "name": "system info",
        "func": "msg.payload = {       \n    arch:         os.arch(),\n    cpus:         os.cpus(),\n    cpu_model:    os.cpus()[os.cpus().length - 1].model,\n    cpu_speed:    os.cpus()[os.cpus().length - 1].speed,\n    n_cpus:       os.cpus().length,\n    endianness:   os.endianness(),\n    homedir:      os.homedir(),\n    hostname:     os.hostname(),\n    network:      os.networkInterfaces(),\n    address:      os.networkInterfaces().eth0[0].address,\n    platform:     os.platform(),\n    release:      os.release(),\n    type:         os.type(),\n    userInfo:     os.userInfo(),\n    gid:          os.userInfo().gid,\n    uid:          os.userInfo().uid,\n    username:     os.userInfo().username,\n    shell:        os.userInfo().shell,\n    os_version:   os.version(),\n\n    cwd:          process.cwd(),\n    node_version: process.version,\n\n    last_update:  new Date()\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "os",
                "module": "os"
            },
            {
                "var": "process",
                "module": "process"
            }
        ],
        "x": 290,
        "y": 320,
        "wires": [
            [
                "e475bf4d1347ce6d",
                "38fb665c04a2fa2b",
                "12262ec3b4702e3b",
                "93fcb0ebab0ad1fb",
                "772de72b62e1e4e0",
                "a72c3c707a0495a6",
                "f66d1fae20c650a0",
                "990e8802adb04ed7"
            ]
        ]
    },
    {
        "id": "407393b06d188578",
        "type": "split",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 510,
        "y": 40,
        "wires": [
            [
                "e14bc855c64bcbec",
                "1ff2be7d96afb5f0"
            ]
        ]
    },
    {
        "id": "e14bc855c64bcbec",
        "type": "switch",
        "z": "f29ecd9eab0f0d83",
        "name": "mem?",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ram",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "heap",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 60,
        "wires": [
            [],
            [
                "d59207da68d0e961"
            ]
        ]
    },
    {
        "id": "5a48bbed736ee220",
        "type": "comment",
        "z": "f29ecd9eab0f0d83",
        "name": "README",
        "info": "### Function nodes\n```node-os-utils``` =\n```system mon``` + \n```system info```\n\n### Swith node\n*mem* = *ram* + *heap*\n\n### UI Widget configuration via msg.ui_control\nhttps://github.com/node-red/node-red-dashboard/blob/master/config-fields.md",
        "x": 100,
        "y": 40,
        "wires": []
    },
    {
        "id": "7c204748fb1d30c6",
        "type": "ui_gauge",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "f6e5eaea1a3d31cf",
        "order": 1,
        "width": "6",
        "height": "2",
        "gtype": "gage",
        "title": "1 Minute",
        "label": "load",
        "format": "{{msg.payload.loadavg_1| number:2}}",
        "min": 0,
        "max": "4",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "1",
        "seg2": "3",
        "className": "",
        "x": 840,
        "y": 500,
        "wires": []
    },
    {
        "id": "9c89af026d6e876a",
        "type": "ui_gauge",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "f6e5eaea1a3d31cf",
        "order": 2,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "5 Minutes",
        "label": "load",
        "format": "{{msg.payload.loadavg_5| number:2}}",
        "min": 0,
        "max": "4",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "1",
        "seg2": "3",
        "className": "",
        "x": 840,
        "y": 540,
        "wires": []
    },
    {
        "id": "943a803ae4a09ae9",
        "type": "ui_gauge",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "f6e5eaea1a3d31cf",
        "order": 4,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "15 Minutes",
        "label": "load",
        "format": "{{msg.payload.loadavg_15| number:2}}",
        "min": 0,
        "max": "4",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "1",
        "seg2": "3",
        "className": "",
        "x": 850,
        "y": 580,
        "wires": []
    },
    {
        "id": "52c2417885093efb",
        "type": "ui_chart",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "f6e5eaea1a3d31cf",
        "order": 0,
        "width": "6",
        "height": "4",
        "label": "CPU Load Average",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "6",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": "",
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 870,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "978f120d4b6d5d8d",
        "type": "split",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 510,
        "y": 420,
        "wires": [
            [
                "4fef2b553738432c"
            ]
        ]
    },
    {
        "id": "4fef2b553738432c",
        "type": "switch",
        "z": "f29ecd9eab0f0d83",
        "name": "load?",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "n_cores",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "loadavg",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 420,
        "wires": [
            [
                "72daa15a9e8dee07"
            ],
            [
                "52c2417885093efb"
            ]
        ]
    },
    {
        "id": "eeac84aba4122de6",
        "type": "inject",
        "z": "f29ecd9eab0f0d83",
        "name": "5s",
        "props": [],
        "repeat": "15",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "topic": "",
        "x": 110,
        "y": 360,
        "wires": [
            [
                "4a1850006419b797"
            ]
        ]
    },
    {
        "id": "716b83720f6ed7c3",
        "type": "change",
        "z": "f29ecd9eab0f0d83",
        "name": "gauge",
        "rules": [
            {
                "t": "set",
                "p": "ui_control.max",
                "pt": "msg",
                "to": "payload.n_cores * 4",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "ui_control.seg1",
                "pt": "msg",
                "to": "payload.n_cores *1.5",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "ui_control.seg2",
                "pt": "msg",
                "to": "payload.n_cores * 3",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 540,
        "wires": [
            [
                "7c204748fb1d30c6",
                "9c89af026d6e876a",
                "943a803ae4a09ae9"
            ]
        ]
    },
    {
        "id": "1ff2be7d96afb5f0",
        "type": "switch",
        "z": "f29ecd9eab0f0d83",
        "name": "cpu?",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "cpu_sys",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "cpu_us",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 20,
        "wires": [
            [
                "4b5a96f2a67089df"
            ],
            [
                "4b5a96f2a67089df"
            ]
        ]
    },
    {
        "id": "72daa15a9e8dee07",
        "type": "change",
        "z": "f29ecd9eab0f0d83",
        "name": "warning",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "warning",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload * 2",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 420,
        "wires": [
            [
                "52c2417885093efb"
            ]
        ]
    }
]